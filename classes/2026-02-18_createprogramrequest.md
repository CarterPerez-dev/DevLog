# CreateProgramRequest

**Type:** Class Documentation
**Repository:** stripe-referral
**File:** src/stripe_referral/schemas/payout.py
**Language:** python
**Lines:** 91-138
**Complexity:** 0.0

---

## Source Code

```python
class CreateProgramRequest(BaseModel):
    """
    Request schema for creating referral program
    """
    name: str = Field(
        ...,
        min_length = 1,
        max_length = MAX_PROGRAM_NAME_LENGTH
    )
    program_key: str = Field(
        ...,
        min_length = 1,
        max_length = MAX_PROGRAM_KEY_LENGTH
    )
    reward_amount: float = Field(..., ge = MIN_REWARD_AMOUNT)
    reward_currency: str = Field(
        default = CurrencyCode.USD.value,
        min_length = CURRENCY_CODE_LENGTH,
        max_length = CURRENCY_CODE_LENGTH
    )
    reward_type: str = Field(default = RewardType.ONE_TIME.value)
    adapter_type: str = Field(default = AdapterType.MANUAL.value)
    max_rewards_per_user: int | None = Field(
        None,
        ge = MIN_MAX_REWARDS_PER_USER,
        le = MAX_MAX_REWARDS_PER_USER
    )
    conversion_window_days: int | None = Field(
        None,
        ge = MIN_CONVERSION_WINDOW_DAYS,
        le = MAX_CONVERSION_WINDOW_DAYS
    )

    @field_validator("name", "program_key")
    @classmethod
    def validate_no_whitespace(cls, v: str) -> str:
        """
        Ensure no leading/trailing whitespace
        """
        return v.strip()

    @field_validator("reward_currency")
    @classmethod
    def validate_currency_uppercase(cls, v: str) -> str:
        """
        Ensure currency is uppercase
        """
        return v.upper()
```

---

## Class Documentation

### CreateProgramRequest

**Class Responsibility and Purpose:**
The `CreateProgramRequest` class defines a request schema for creating a referral program, ensuring that all necessary fields are validated according to specific constraints. This class is part of the Stripe Referral service's API layer.

**Public Interface (Key Methods):**
- **Field Validators:** The class uses Pydantic field validators (`validate_no_whitespace`, `validate_currency_uppercase`) to enforce data validation rules on the `name`, `program_key`, and `reward_currency` fields. These methods ensure that input values meet predefined criteria, such as no leading or trailing whitespace and uppercase currency codes.

**Design Patterns Used:**
- **Data Validation:** The class employs Pydantic's field validators to implement data validation logic in a clean and maintainable way.
- **Single Responsibility Principle:** Each method focuses on a specific validation task, adhering to the Single Responsibility Principle by ensuring that the class owns only what it needs to.

**How It Fits in the Architecture:**
This class is part of the `stripe_referral.schemas.payout` module, which handles request schemas for creating and managing referral programs. By validating input data before processing, this class ensures that only valid requests reach downstream components such as business logic handlers or database services. This helps maintain a robust and reliable system architecture by preventing invalid data from entering critical parts of the application.

---

*Generated by CodeWorm on 2026-02-18 23:26*
