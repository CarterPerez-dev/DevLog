# SafeEnum

**Type:** Class Documentation
**Repository:** fullstack-template
**File:** stacks/fastapi-react/backend/app/core/enums.py
**Language:** python
**Lines:** 22-46
**Complexity:** 0.0

---

## Source Code

```python
class SafeEnum(sa.Enum):
    """
    SQLAlchemy Enum type that stores VALUES and handles unknown values gracefully

    https://blog.wrouesnel.com/posts/sqlalchemy-enums-careful-what-goes-into-the-database/
    """
    def __init__(self, *enums: type[Enum], **kw: Any) -> None:
        if "values_callable" not in kw:
            kw["values_callable"] = enum_values_callable
        super().__init__(*enums, **kw)
        self._unknown_value = (
            kw["_adapted_from"]._unknown_value
            if "_adapted_from" in kw else kw.get("unknown_value")
        )

    def _object_value_for_elem(self, elem: str) -> Enum:
        """
        Override to return unknown_value instead of raising LookupError
        """
        try:
            return self._object_lookup[elem]
        except LookupError:
            if self._unknown_value is not None:
                return self._unknown_value
            raise
```

---

## Class Documentation

### SafeEnum Class Documentation

**Class Responsibility and Purpose:**
The `SafeEnum` class is a custom SQLAlchemy Enum type designed to handle unknown values gracefully by storing their VALUES. It extends the standard SQLAlchemy Enum type while providing additional flexibility and robustness.

**Public Interface (Key Methods):**
- **`__init__(*enums: type[Enum], **kw: Any) -> None`:** Initializes the `SafeEnum` with a list of enum types, setting up the `_unknown_value` attribute.
- **`_object_value_for_elem(self, elem: str) -> Enum`:** Overrides the default behavior to return an `_unknown_value` instead of raising a `LookupError`.

**Design Patterns Used:**
The class leverages the Factory pattern through its constructor and the Strategy pattern via the `_unknown_value` handling mechanism.

**Relationship to Other Classes:**
- This class is part of the `enums.py` module in the backend application, specifically designed for use with SQLAlchemy models.
- It interacts with SQLAlchemy's Enum type by extending it and providing custom behavior.

**State Management Approach:**
The state management approach involves setting up `_unknown_value` during initialization. This value can be customized or adapted from another enum if needed, ensuring that unknown values are handled gracefully without breaking the application flow.

---

*Generated by CodeWorm on 2026-02-18 15:49*
