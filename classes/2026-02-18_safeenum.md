# SafeEnum

**Type:** Class Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/core/enums.py
**Language:** python
**Lines:** 22-48
**Complexity:** 0.0

---

## Source Code

```python
class SafeEnum(sa.Enum):
    """
    SQLAlchemy Enum type that stores VALUES and handles unknown values gracefully

    https://blog.wrouesnel.com/posts/sqlalchemy-enums-careful-what-goes-into-the-database/
    """
    def __init__(self, *enums: type[Enum], **kw: Any) -> None:
        if "values_callable" not in kw:
            kw["values_callable"] = enum_values_callable
        if "create_type" not in kw:
            kw["create_type"] = False
        super().__init__(*enums, **kw)
        self._unknown_value = (
            kw["_adapted_from"]._unknown_value
            if "_adapted_from" in kw else kw.get("unknown_value")
        )

    def _object_value_for_elem(self, elem: str) -> Enum:
        """
        Override to return unknown_value instead of raising LookupError
        """
        try:
            return self._object_lookup[elem]
        except LookupError:
            if self._unknown_value is not None:
                return self._unknown_value
            raise
```

---

## Class Documentation

### SafeEnum Class Documentation

**Class Responsibility and Purpose:**
The `SafeEnum` class extends SQLAlchemy's `Enum` type to handle unknown values gracefully, ensuring that operations involving enums are more robust and user-friendly.

**Public Interface (Key Methods):**
- **`__init__(*enums: type[Enum], **kw: Any)`**: Initializes the enum with a list of possible values. It sets default parameters for handling unknown values.
- **`_object_value_for_elem(elem: str) -> Enum`**: Overrides the default behavior to return an `unknown_value` instead of raising an error when an unknown value is encountered.

**Design Patterns Used:**
- **Factory Method Pattern**: The class acts as a factory, creating and managing enum types with specific behaviors.
- **Strategy Pattern**: It uses a strategy for handling unknown values, allowing flexibility in how to manage such cases.

**Relationship to Other Classes:**
`SafeEnum` is part of the `enums.py` module within the CarterOS-Server project. It integrates with SQLAlchemy's ORM by extending its enum type functionality. This class is likely used throughout the application where robust enum handling is required, ensuring that unknown values are managed gracefully without crashing.

**State Management Approach:**
The state management involves setting up default parameters for handling unknown values during initialization and storing these settings internally to ensure consistent behavior across instances of `SafeEnum`.

---

*Generated by CodeWorm on 2026-02-18 18:12*
