# FileTargetFinder

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 41-113
**Complexity:** 0.0

---

## Source Code

```python
class FileTargetFinder:
    """
    Finds files worth documenting at the file level
    """
    def __init__(self, scanner: RepoScanner) -> None:
        self.scanner = scanner

    def find(
        self,
        repo: RepoEntry,
        limit: int = 20,
    ) -> list[DocumentationTarget]:
        targets: list[DocumentationTarget] = []

        for scanned_file in self.scanner.scan_repo(repo.path, repo.name):
            try:
                source = scanned_file.path.read_text(encoding = "utf-8")
            except Exception:
                continue

            line_count = source.count("\n") + 1
            if line_count < 20:
                continue

            extractor = CodeExtractor(source, scanned_file.language)
            func_count = sum(1 for _ in extractor.extract_functions())

            score = min(
                100.0,
                (
                    min(line_count / 200,
                        1.0) * 30 + min(func_count / 8,
                                        1.0) * 30 +
                    min(scanned_file.size_bytes / 5000,
                        1.0) * 20 + min(source.count("import ") / 10,
                                        1.0) * 20
                )
            )

            if score < 20:
                continue

            snippet = CodeSnippet(
                repo = repo.name,
                file_path = scanned_file.path,
                function_name = None,
                class_name = None,
                language = scanned_file.language,
                source = source[: 4000],
                start_line = 1,
                end_line = line_count,
                interest_score = score,
                doc_type = DocType.FILE_DOC,
            )

            targets.append(
                DocumentationTarget(
                    doc_type = DocType.FILE_DOC,
                    snippet = snippet,
                    source_context = source[: 6000],
                    metadata = {
                        "line_count": line_count,
                        "function_count": func_count,
                        "relative_path": str(scanned_file.relative_path),
                    },
                )
            )

            if len(targets) >= limit * 2:
                break

        targets.sort(key = lambda t: t.score, reverse = True)
        return targets[: limit]
```

---

## Class Documentation

### FileTargetFinder

**Class Responsibility and Purpose:**
The `FileTargetFinder` class is responsible for identifying files within a repository that are worth documenting based on specific criteria such as file size, function count, and import statements. It leverages a `RepoScanner` to scan through the repository's files.

**Public Interface:**
- **find(repo: RepoEntry, limit: int = 20) -> list[DocumentationTarget]**: This method scans the repository for files that meet the documentation criteria and returns up to `limit` number of `DocumentationTarget` objects.

**Design Patterns Used:**
The class does not explicitly use any design patterns. However, it employs a **Strategy Pattern** through the `CodeExtractor`, which is used to extract functions from the source code based on different languages.

**Relationship to Other Classes:**
- **RepoScanner**: Provides the mechanism for scanning files in the repository.
- **DocumentationTarget**: Represents a file that has been identified as worth documenting, containing metadata and a snippet of the file's content.
- **CodeExtractor**: Extracts functions from source code based on the language.

**State Management Approach:**
The class maintains an internal state through the `targets` list to store potential documentation targets. It sorts these targets by their interest score before returning the top `limit` number of targets.

This class fits into the architecture as part of a larger system for analyzing and documenting codebases, ensuring that only relevant files are considered for documentation based on predefined criteria.

---

*Generated by CodeWorm on 2026-02-19 13:58*
