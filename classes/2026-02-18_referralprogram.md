# ReferralProgram

**Type:** Class Documentation
**Repository:** stripe-referral
**File:** src/stripe_referral/models/ReferralProgram.py
**Language:** python
**Lines:** 45-104
**Complexity:** 0.0

---

## Source Code

```python
class ReferralProgram(Base, TimestampMixin):
    """
    Referral program configuration
    """
    __tablename__ = "referral_programs"

    id: Mapped[int] = mapped_column(
        primary_key = True,
        autoincrement = True
    )
    name: Mapped[str] = mapped_column(
        String(MAX_PROGRAM_NAME_LENGTH),
        unique = True,
        index = True
    )
    program_key: Mapped[str] = mapped_column(
        String(MAX_PROGRAM_KEY_LENGTH),
        unique = True,
        index = True
    )

    reward_amount: Mapped[float] = mapped_column(Float, nullable = False)
    reward_currency: Mapped[str] = mapped_column(
        String(3),
        default = CurrencyCode.USD.value
    )
    reward_type: Mapped[str] = mapped_column(
        String(50),
        default = RewardType.ONE_TIME.value
    )

    is_active: Mapped[bool] = mapped_column(Boolean, default = True)
    max_rewards_per_user: Mapped[int | None] = mapped_column(
        Integer,
        nullable = True
    )
    conversion_window_days: Mapped[int | None] = mapped_column(
        Integer,
        nullable = True
    )

    adapter_type: Mapped[str] = mapped_column(
        String(50),
        default = AdapterType.MANUAL.value
    )
    adapter_config: Mapped[dict[str,
                                Any]] = mapped_column(
                                    JSON,
                                    default = dict
                                )

    codes: Mapped[list[ReferralCode]] = relationship(
        "ReferralCode",
        back_populates = "program",
        cascade = "all, delete-orphan"
    )
    trackings: Mapped[list[ReferralTracking]] = relationship(
        "ReferralTracking",
        back_populates = "program"
    )
```

---

## Class Documentation

### ReferralProgram Class Documentation

**Class Responsibility and Purpose:**
The `ReferralProgram` class represents a configuration for a referral program within the Stripe Referral application. It manages key attributes such as name, reward details, and adapter configurations, facilitating the setup and tracking of referrals.

**Public Interface (Key Methods):**
- No public methods are defined in this class; it primarily serves as a data model with properties representing various aspects of a referral program.
- Key attributes include `name`, `reward_amount`, `reward_currency`, `is_active`, etc., which define the program's configuration.

**Design Patterns Used:**
The class leverages SQLAlchemy ORM patterns for database interaction, utilizing mapped columns and relationships. It also incorporates Pythonâ€™s type hints (`Mapped`) to ensure strong typing and maintainability.

**How it Fits in the Architecture:**
`ReferralProgram` is a core entity within the application's data layer. It interacts with related entities like `ReferralCode` and `ReferralTracking` through SQLAlchemy relationships, enabling the tracking of referral codes and user activities. This class ensures that all necessary configurations for a referral program are stored and managed efficiently, supporting the overall functionality of the referral system.

This class is integral to the application's architecture, providing a structured way to manage and query referral programs in the database.

---

*Generated by CodeWorm on 2026-02-18 23:56*
