# ChecklistItemRepository

**Type:** Class Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/life_manager/facets/checklist/repository.py
**Language:** python
**Lines:** 18-51
**Complexity:** 0.0

---

## Source Code

```python
class ChecklistItemRepository(BaseRepository[ChecklistItem]):
    """
    Repository for ChecklistItem operations
    """
    model = ChecklistItem

    @classmethod
    async def get_active(
        cls,
        session: AsyncSession,
    ) -> Sequence[ChecklistItem]:
        """
        Get all active items ordered by sort_order
        """
        result = await session.execute(
            select(ChecklistItem).where(
                ChecklistItem.is_active == sa.true()
            ).order_by(ChecklistItem.sort_order)
        )
        return result.scalars().all()

    @classmethod
    async def soft_delete(
        cls,
        session: AsyncSession,
        item: ChecklistItem,
    ) -> ChecklistItem:
        """
        Set is_active=False instead of deleting
        """
        item.is_active = False
        await session.flush()
        await session.refresh(item)
        return item
```

---

## Class Documentation

### ChecklistItemRepository Documentation

**Class Responsibility and Purpose:**
The `ChecklistItemRepository` class is responsible for managing operations related to `ChecklistItem` entities, such as retrieving active items and soft-deleting them. This class adheres to the repository pattern, providing a clean interface for database interactions.

**Public Interface (Key Methods):**
- **`get_active(session: AsyncSession) -> Sequence[ChecklistItem]`:** Retrieves all active `ChecklistItem` instances ordered by their `sort_order`.
- **`soft_delete(session: AsyncSession, item: ChecklistItem) -> ChecklistItem`:** Soft-deletes a `ChecklistItem` by setting its `is_active` attribute to `False`.

**Design Patterns Used:**
The class employs the **Repository Pattern**, which abstracts data access and encapsulates database operations. This pattern ensures that business logic remains separate from data-access concerns.

**How It Fits in the Architecture:**
This repository is part of a larger system, likely within the `angelamos-operations` project. It interacts directly with the database through SQLAlchemy sessions to perform CRUD-like operations on `ChecklistItem` entities. The class provides a clear and consistent interface for other parts of the application to interact with checklist items without needing to know the underlying database implementation details.

This design promotes loose coupling, making it easier to switch out the data access layer or use different storage mechanisms in the future if needed.

---

*Generated by CodeWorm on 2026-02-22 19:21*
