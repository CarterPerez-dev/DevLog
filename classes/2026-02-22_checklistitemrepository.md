# ChecklistItemRepository

**Type:** Class Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/life_manager/facets/checklist/repository.py
**Language:** python
**Lines:** 18-51
**Complexity:** 0.0

---

## Source Code

```python
class ChecklistItemRepository(BaseRepository[ChecklistItem]):
    """
    Repository for ChecklistItem operations
    """
    model = ChecklistItem

    @classmethod
    async def get_active(
        cls,
        session: AsyncSession,
    ) -> Sequence[ChecklistItem]:
        """
        Get all active items ordered by sort_order
        """
        result = await session.execute(
            select(ChecklistItem)
            .where(ChecklistItem.is_active == sa.true())
            .order_by(ChecklistItem.sort_order)
        )
        return result.scalars().all()

    @classmethod
    async def soft_delete(
        cls,
        session: AsyncSession,
        item: ChecklistItem,
    ) -> ChecklistItem:
        """
        Set is_active=False instead of deleting
        """
        item.is_active = False
        await session.flush()
        await session.refresh(item)
        return item
```

---

## Class Documentation

### ChecklistItemRepository

**Class Responsibility and Purpose:**
The `ChecklistItemRepository` class is responsible for managing operations related to `ChecklistItem` entities, including fetching active items and soft-deleting them. This class follows the repository pattern to abstract database interactions.

**Public Interface (Key Methods):**
- `get_active(session)`: Retrieves all active checklist items ordered by their sort order.
- `soft_delete(session, item)`: Marks a specific checklist item as inactive without physically deleting it from the database.

**Design Patterns Used:**
The class uses the **Repository Pattern**, which encapsulates data access logic and provides a clean interface for interacting with the underlying storage. This pattern is particularly useful in maintaining separation of concerns between business logic and data access layers.

**How It Fits in the Architecture:**
`ChecklistItemRepository` acts as an intermediary between the application layer and the database, ensuring that all operations related to `ChecklistItem` are handled consistently. By using this repository, other parts of the application can interact with checklist items without needing to know about the underlying database implementation details.

This design promotes flexibility and maintainability by allowing changes in data storage mechanisms (e.g., switching from SQL to NoSQL) without affecting higher-level business logic.

---

*Generated by CodeWorm on 2026-02-22 07:41*
