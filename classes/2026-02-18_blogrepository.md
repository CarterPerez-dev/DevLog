# BlogRepository

**Type:** Class Documentation
**Repository:** my-portfolio
**File:** v1/backend/app/blog/repository.py
**Language:** python
**Lines:** 16-91
**Complexity:** 0.0

---

## Source Code

```python
class BlogRepository(BaseRepository[Blog]):
    """
    Repository for Blog model database operations.
    """
    model = Blog

    @classmethod
    async def get_visible_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
        skip: int = config.PAGINATION_DEFAULT_SKIP,
        limit: int = config.PAGINATION_DEFAULT_LIMIT,
    ) -> Sequence[Blog]:
        """
        Get all visible blog posts for a language.
        Ordered by display_order for consistent listing.
        """
        result = await session.execute(
            select(Blog).where(Blog.language == language).where(
                Blog.is_visible == True
            ).order_by(Blog.display_order).offset(skip).limit(limit)
        )
        return result.scalars().all()

    @classmethod
    async def get_featured_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
        limit: int = config.PAGINATION_FEATURED_LIMIT,
    ) -> Sequence[Blog]:
        """
        Get featured blog posts for a language.
        Used for overview page highlights.
        """
        result = await session.execute(
            select(Blog).where(Blog.language == language).where(
                Blog.is_visible == True
            ).where(Blog.is_featured == True).order_by(Blog.display_order
                                                       ).limit(limit)
        )
        return result.scalars().all()

    @classmethod
    async def get_by_category_and_language(
        cls,
        session: AsyncSession,
        category: config.BlogCategory,
        language: config.Language,
    ) -> Sequence[Blog]:
        """
        Get blog posts by category and language.
        """
        result = await session.execute(
            select(Blog).where(Blog.language == language).where(
                Blog.category == category
            ).where(Blog.is_visible == True).order_by(Blog.display_order)
        )
        return result.scalars().all()

    @classmethod
    async def count_visible_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
    ) -> int:
        """
        Count visible blog posts for pagination.
        """
        result = await session.execute(
            select(func.count()).select_from(Blog).where(
                Blog.language == language
            ).where(Blog.is_visible == True)
        )
        return result.scalar_one()
```

---

## Class Documentation

### BlogRepository Documentation

**Class Responsibility and Purpose:**
The `BlogRepository` class is responsible for managing database operations related to the `Blog` model. It provides a clean, abstracted interface for fetching blog posts based on various criteria such as visibility, language, category, and featured status.

**Public Interface (Key Methods):**
- **get_visible_by_language**: Retrieves visible blog posts for a specific language.
- **get_featured_by_language**: Fetches featured blog posts for a given language.
- **get_by_category_and_language**: Returns blog posts by category and language.
- **count_visible_by_language**: Counts the number of visible blog posts for pagination.

**Design Patterns Used:**
The class utilizes the **Repository Pattern**, which encapsulates data access logic. It also employs **Query Object** pattern through its methods, ensuring that complex queries are isolated from business logic.

**How it Fits in the Architecture:**
`BlogRepository` acts as a central hub for all database interactions related to blog posts within the application. By abstracting database operations, it promotes loose coupling and makes the code more maintainable. It interacts with other components like `config.Language`, `config.BlogCategory`, and `AsyncSession` to provide flexible and dynamic data retrieval mechanisms.

---

*Generated by CodeWorm on 2026-02-18 21:09*
