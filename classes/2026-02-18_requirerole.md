# RequireRole

**Type:** Class Documentation
**Repository:** fullstack-template
**File:** stacks/fastapi-react/backend/app/core/dependencies.py
**Language:** python
**Lines:** 112-129
**Complexity:** 0.0

---

## Source Code

```python
class RequireRole:
    """
    Dependency class to check user role
    """
    def __init__(self, *allowed_roles: UserRole) -> None:
        self.allowed_roles = allowed_roles

    async def __call__(
        self,
        user: Annotated[User,
                        Depends(get_current_active_user)],
    ) -> User:
        if user.role not in self.allowed_roles:
            raise PermissionDenied(
                message =
                f"Requires one of roles: {', '.join(r.value for r in self.allowed_roles)}",
            )
        return user
```

---

## Class Documentation

### RequireRole Class Documentation

**Class Responsibility and Purpose:**
The `RequireRole` class is a dependency injection tool designed to enforce role-based access control in FastAPI applications. It checks if the user's role matches one of the allowed roles specified during its initialization.

**Public Interface (Key Methods):**
- **Constructor (`__init__`)**: Initializes the `RequireRole` instance with a list of allowed roles.
- **Async Call Method (`__call__`)**: This method is called to validate the user's role. It takes an annotated `User` object as input and raises a `PermissionDenied` exception if the userâ€™s role does not match any of the allowed roles.

**Design Patterns Used:**
The class leverages the **Dependency Injection** pattern, ensuring that the validation logic is decoupled from the application code. This promotes testability and maintainability.

**How It Fits in the Architecture:**
In the FastAPI backend architecture, `RequireRole` acts as a dependency that can be injected into routes or endpoints where role-based access control is required. By using this class, developers can easily enforce specific permissions without cluttering their route handlers with validation logic. This approach aligns with the **Single Responsibility Principle**, keeping each component focused on its core functionality.

The `RequireRole` class integrates seamlessly with FastAPI's dependency injection system through the use of annotations and the `Depends` function, making it a versatile tool for managing access control in complex applications.

---

*Generated by CodeWorm on 2026-02-18 15:59*
