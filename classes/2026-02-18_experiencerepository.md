# ExperienceRepository

**Type:** Class Documentation
**Repository:** my-portfolio
**File:** v1/backend/app/experience/repository.py
**Language:** python
**Lines:** 17-74
**Complexity:** 0.0

---

## Source Code

```python
class ExperienceRepository(BaseRepository[Experience]):
    """
    Repository for Experience model database operations.
    """
    model = Experience

    @classmethod
    async def get_visible_by_language(
        cls,
        session: AsyncSession,
        language: Language,
        skip: int = config.PAGINATION_DEFAULT_SKIP,
        limit: int = config.PAGINATION_DEFAULT_LIMIT,
    ) -> Sequence[Experience]:
        """
        Get all visible experiences for a language.
        Ordered by display_order for consistent timeline.
        """
        result = await session.execute(
            select(Experience).where(Experience.language == language).where(
                Experience.is_visible == True
            ).order_by(Experience.display_order).offset(skip).limit(limit)
        )
        return result.scalars().all()

    @classmethod
    async def get_current_by_language(
        cls,
        session: AsyncSession,
        language: Language,
    ) -> Sequence[Experience]:
        """
        Get current (ongoing) positions for a language.
        """
        result = await session.execute(
            select(Experience).where(Experience.language == language).where(
                Experience.is_visible == True
            ).where(Experience.is_current == True).order_by(
                Experience.display_order
            )
        )
        return result.scalars().all()

    @classmethod
    async def count_visible_by_language(
        cls,
        session: AsyncSession,
        language: Language,
    ) -> int:
        """
        Count visible experiences for pagination.
        """
        result = await session.execute(
            select(func.count()).select_from(Experience).where(
                Experience.language == language
            ).where(Experience.is_visible == True)
        )
        return result.scalar_one()
```

---

## Class Documentation

### ExperienceRepository Documentation

**Class Responsibility and Purpose:**
The `ExperienceRepository` class is responsible for managing database operations related to the `Experience` model within the `my-portfolio` application. It provides a structured way to interact with the database, ensuring that all queries adhere to specific criteria such as visibility and language.

**Public Interface (Key Methods):**
- **`get_visible_by_language`:** Retrieves visible experiences for a given language, ordered by display order.
- **`get_current_by_language`:** Fetches current (ongoing) positions for a specified language.
- **`count_visible_by_language`:** Counts the number of visible experiences for pagination purposes.

**Design Patterns Used:**
The class employs the **Repository Pattern**, which encapsulates all data-access concerns and provides a clean interface to interact with the database. It also uses **Dependency Injection** for the `AsyncSession`, ensuring that dependencies are passed in rather than being tightly coupled within the repository itself.

**How it Fits in the Architecture:**
`ExperienceRepository` is part of the data access layer, specifically designed for handling CRUD operations related to experiences. It interacts with the database through SQLAlchemy sessions and provides methods tailored for common use cases such as filtering by visibility and language. This class ensures that business logic remains separate from data-access concerns, promoting a clean separation of responsibilities within the application architecture.

---

*Generated by CodeWorm on 2026-02-18 21:25*
