# ChallengeLogRepository

**Type:** Class Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/challenge/facets/tracker/repository.py
**Language:** python
**Lines:** 107-176
**Complexity:** 0.0

---

## Source Code

```python
class ChallengeLogRepository(BaseRepository[ChallengeLog]):
    """
    Repository for ChallengeLog operations
    """
    model = ChallengeLog

    @classmethod
    async def get_by_challenge(
        cls,
        session: AsyncSession,
        challenge_id: UUID,
    ) -> Sequence[ChallengeLog]:
        """
        Get all logs for a challenge
        """
        result = await session.execute(
            select(ChallengeLog).where(
                ChallengeLog.challenge_id == challenge_id
            ).order_by(ChallengeLog.log_date.asc())
        )
        return result.scalars().all()

    @classmethod
    async def get_by_date(
        cls,
        session: AsyncSession,
        challenge_id: UUID,
        log_date: date,
    ) -> ChallengeLog | None:
        """
        Get log for a specific date
        """
        result = await session.execute(
            select(ChallengeLog).where(
                ChallengeLog.challenge_id == challenge_id,
                ChallengeLog.log_date == log_date,
            )
        )
        return result.scalar_one_or_none()

    @classmethod
    async def get_totals(
        cls,
        session: AsyncSession,
        challenge_id: UUID,
    ) -> tuple[int,
               int]:
        """
        Get total content and jobs for a challenge
        """
        result = await session.execute(
            select(
                func.coalesce(
                    func.sum(
                        ChallengeLog.tiktok +
                        ChallengeLog.instagram_reels +
                        ChallengeLog.youtube_shorts +
                        ChallengeLog.twitter + ChallengeLog.reddit +
                        ChallengeLog.linkedin_personal +
                        ChallengeLog.linkedin_company +
                        ChallengeLog.youtube_full + ChallengeLog.medium
                    ),
                    0
                ).label('total_content'),
                func.coalesce(func.sum(ChallengeLog.jobs_applied),
                              0).label('total_jobs'),
            ).where(ChallengeLog.challenge_id == challenge_id)
        )
        row = result.one()
        return int(row.total_content), int(row.total_jobs)
```

---

## Class Documentation

### ChallengeLogRepository Documentation

**Class Responsibility and Purpose:**
The `ChallengeLogRepository` class is responsible for managing database operations related to `ChallengeLog` entities within the `angelamos-operations` application. It provides methods to retrieve logs based on challenge IDs and specific dates, as well as calculating aggregate totals.

**Public Interface (Key Methods):**
- `get_by_challenge(session: AsyncSession, challenge_id: UUID) -> Sequence[ChallengeLog]`: Retrieves all logs for a given challenge.
- `get_by_date(session: AsyncSession, challenge_id: UUID, log_date: date) -> ChallengeLog | None`: Fetches the log entry for a specific date within a challenge.
- `get_totals(session: AsyncSession, challenge_id: UUID) -> tuple[int, int]`: Computes the total content and job applications across various platforms for a given challenge.

**Design Patterns Used:**
The class employs a **Repository Pattern**, which abstracts data access operations. It also uses SQLAlchemy's ORM to interact with the database asynchronously via `AsyncSession`.

**How it Fits in the Architecture:**
`ChallengeLogRepository` is part of the data layer, providing a clean interface for higher-level services and controllers to perform CRUD-like operations on challenge logs without dealing directly with database queries. This separation enhances maintainability and testability by encapsulating database interactions within this class.

---

*Generated by CodeWorm on 2026-02-22 07:32*
