# PatternTargetFinder

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 463-582
**Complexity:** 0.0

---

## Source Code

```python
class PatternTargetFinder:
    """
    Finds design patterns across a repository
    """
    PATTERN_SIGNATURES = {
        "singleton": {
            "indicators": ["_instance",
                           "__new__",
                           "getInstance"],
            "description": "Singleton pattern",
        },
        "factory": {
            "indicators": ["create_",
                           "make_",
                           "build_",
                           "factory"],
            "description": "Factory pattern",
        },
        "observer": {
            "indicators": [
                "subscribe",
                "notify",
                "on_event",
                "emit",
                "listener",
                "addEventListener"
            ],
            "description":
            "Observer/Event pattern",
        },
        "decorator_pattern": {
            "indicators": ["wrapper",
                           "wraps",
                           "functools.wraps",
                           "@wraps"],
            "description": "Decorator pattern",
        },
        "strategy": {
            "indicators": ["Strategy",
                           "execute",
                           "set_strategy",
                           "algorithm"],
            "description": "Strategy pattern",
        },
        "middleware": {
            "indicators": ["middleware",
                           "next()",
                           "dispatch",
                           "use("],
            "description": "Middleware/Pipeline pattern",
        },
        "repository_pattern": {
            "indicators":
            ["Repository",
             "get_by_id",
             "find_all",
             "save(",
             "delete("],
            "description": "Repository pattern",
        },
    }

    def __init__(self, scanner: RepoScanner) -> None:
        self.scanner = scanner

    def find(
        self,
        repo: RepoEntry,
        limit: int = 10,
    ) -> list[DocumentationTarget]:
        targets: list[DocumentationTarget] = []

        for scanned_file in self.scanner.scan_repo(repo.path, repo.name):
            try:
                source = scanned_file.path.read_text(encoding = "utf-8")
            except Exception:
                continue

            for pattern_name, pattern_info in self.PATTERN_SIGNATURES.items():
                matches = sum(
                    1 for indicator in pattern_info["indicators"]
                    if indicator in source
                )
                if matches < 2:
                    continue

                score = min(100.0, matches * 15 + 30)

                snippet = CodeSnippet(
                    repo = repo.name,
                    file_path = scanned_file.path,
                    function_name = pattern_name,
                    class_name = None,
                    language = scanned_file.language,
                    source = source[: 4000],
                  
```

---

## Class Documentation

### PatternTargetFinder Documentation

**Class Responsibility and Purpose:**
The `PatternTargetFinder` class is responsible for identifying design pattern implementations within a codebase. It leverages predefined signatures to detect common design patterns such as Singleton, Factory, Observer, Decorator, Strategy, Middleware, and Repository.

**Public Interface (Key Methods):**
- **`__init__(self, scanner: RepoScanner) -> None`:** Initializes the `PatternTargetFinder` with a `RepoScanner` instance.
- **`find(self, repo: RepoEntry, limit: int = 10) -> list[DocumentationTarget]`:** Scans a repository for design pattern implementations and returns up to `limit` relevant documentation targets.

**Design Patterns Used:**
The class utilizes the following design patterns:
- **Factory Pattern:** To create instances of different design pattern indicators.
- **Observer/Event Pattern:** For monitoring and updating detected patterns.
- **Decorator Pattern:** To enhance functionality without modifying existing code, such as adding logging or performance metrics to scanning operations.

**How it Fits in the Architecture:**
`PatternTargetFinder` acts as a core component within CodeWormâ€™s analysis module. It interfaces with `RepoScanner` to scan repositories and identify design patterns. The findings are then used by other parts of the system, such as documentation generation tools or code review assistants, to provide insights into the architectural quality and maintainability of the codebase.

---

*Generated by CodeWorm on 2026-02-19 13:37*
