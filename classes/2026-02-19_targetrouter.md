# TargetRouter

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 624-684
**Complexity:** 0.0

---

## Source Code

```python
class TargetRouter:
    """
    Routes doc_type requests to the appropriate target finder
    """
    def __init__(
        self,
        analyzer: object,
        scanner: RepoScanner,
    ) -> None:
        self.file_finder = FileTargetFinder(scanner)
        self.class_finder = ClassTargetFinder(scanner)
        self.module_finder = ModuleTargetFinder()
        self.evolution_finder = EvolutionTargetFinder()
        self.pattern_finder = PatternTargetFinder(scanner)
        self.perspective_finder = FunctionPerspectiveFinder(analyzer)

    def find_targets(
        self,
        doc_type: DocType,
        repo: RepoEntry,
        limit: int = 20,
    ) -> list[DocumentationTarget]:
        if doc_type == DocType.FUNCTION_DOC:
            candidates = self.perspective_finder.analyzer.find_candidates(
                repo = repo,
                limit = limit,
            )
            return [
                DocumentationTarget(
                    doc_type = DocType.FUNCTION_DOC,
                    snippet = c.snippet,
                    source_context = c.snippet.source,
                    metadata = {
                        "relative_path": str(c.scanned_file.relative_path)
                    },
                ) for c in candidates
            ]

        if doc_type == DocType.FILE_DOC:
            return self.file_finder.find(repo, limit)

        if doc_type == DocType.CLASS_DOC:
            return self.class_finder.find(repo, limit)

        if doc_type == DocType.MODULE_DOC:
            return self.module_finder.find(repo, limit)

        if doc_type == DocType.CODE_EVOLUTION:
            return self.evolution_finder.find(repo, limit)

        if doc_type == DocType.PATTERN_ANALYSIS:
            return self.pattern_finder.find(repo, limit)

        if doc_type in (
                DocType.SECURITY_REVIEW,
                DocType.PERFORMANCE_ANALYSIS,
                DocType.TIL,
        ):
            return self.perspective_finder.find(repo, doc_type, limit)

        return []
```

---

## Class Documentation

### TargetRouter

**Class Responsibility and Purpose:**  
The `TargetRouter` class is responsible for routing requests based on document types (`DocType`) to appropriate target finders. It acts as a central hub, delegating tasks to specific finder classes depending on the type of documentation required.

**Public Interface (Key Methods):**  
- **`__init__(self, analyzer: object, scanner: RepoScanner)`**: Initializes the `TargetRouter` with an `analyzer` and a `scanner`. The `analyzer` is used by some finders to process code snippets.
- **`find_targets(self, doc_type: DocType, repo: RepoEntry, limit: int = 20) -> list[DocumentationTarget]`**: This method routes the request to the appropriate finder based on the `doc_type`. It returns a list of `DocumentationTarget` objects.

**Design Patterns Used:**  
- **Strategy Pattern**: The `find_targets` method delegates the actual finding logic to different finder classes (`FileTargetFinder`, `ClassTargetFinder`, etc.) depending on the `doc_type`.
- **Factory Method**: Although not explicitly named, each specific finder class can be seen as a factory for generating `DocumentationTarget` objects.

**How it Fits in the Architecture:**  
In the CodeWorm architecture, `TargetRouter` serves as an intermediary between the core analysis logic and various target finders. It ensures that requests are processed efficiently by routing them to the correct finder based on the document type. This design promotes modularity and flexibility, allowing for easy addition of new document types or finder classes without altering existing code.

---

*Generated by CodeWorm on 2026-02-19 14:01*
