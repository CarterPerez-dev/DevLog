# WeightedRepoSelector

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/scanner.py
**Language:** python
**Lines:** 255-283
**Complexity:** 0.0

---

## Source Code

```python
class WeightedRepoSelector:
    """
    Selects repositories based on configured weights
    """
    def __init__(self, repos: list[RepoEntry]) -> None:
        """
        Initialize with list of repo configurations
        """
        self.repos = [r for r in repos if r.enabled]
        self._weights = [r.weight for r in self.repos]
        self._total_weight = sum(self._weights)

    def select(self) -> RepoEntry | None:
        """
        Select a repository using weighted random selection
        """
        if not self.repos:
            return None

        return random.choices(self.repos, weights = self._weights, k = 1)[0]

    def select_multiple(self, count: int) -> list[RepoEntry]:
        """
        Select multiple repositories allowing duplicates based on weight
        """
        if not self.repos:
            return []

        return random.choices(self.repos, weights = self._weights, k = count)
```

---

## Class Documentation

### WeightedRepoSelector Documentation

**Class Responsibility and Purpose:**
The `WeightedRepoSelector` class is responsible for selecting repositories from a list based on their configured weights. This is useful in scenarios where different repositories should be chosen with varying probabilities.

**Public Interface (Key Methods):**
- **`__init__(repos: list[RepoEntry]) -> None`:** Initializes the selector with a list of `RepoEntry` objects, filtering out disabled entries and calculating total weight.
- **`select() -> RepoEntry | None`:** Selects a single repository using weighted random selection. Returns `None` if no enabled repositories are available.
- **`select_multiple(count: int) -> list[RepoEntry]`:** Selects multiple repositories (allowing duplicates) based on their weights, returning an empty list if no enabled repositories are available.

**Design Patterns Used:**
The class utilizes the **Strategy Pattern** implicitly through its use of weighted random selection. It also employs a simple filtering mechanism to manage repository states (`enabled`).

**How it Fits in the Architecture:**
This class is part of the `CodeWorm` project's analysis module, specifically designed for selecting repositories during code scanning processes. The `WeightedRepoSelector` ensures that repositories are chosen according to their configured weights, providing a flexible and dynamic way to prioritize different sources based on criteria such as repository size or relevance. This integration supports more sophisticated and context-aware scanning behaviors within the broader architecture of CodeWorm.

---

*Generated by CodeWorm on 2026-02-19 14:21*
