# CertificationRepository

**Type:** Class Documentation
**Repository:** my-portfolio
**File:** v1/backend/app/certification/repository.py
**Language:** python
**Lines:** 16-94
**Complexity:** 0.0

---

## Source Code

```python
class CertificationRepository(BaseRepository[Certification]):
    """
    Repository for Certification model database operations.
    """
    model = Certification

    @classmethod
    async def get_visible_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
        skip: int = config.PAGINATION_DEFAULT_SKIP,
        limit: int = config.PAGINATION_DEFAULT_LIMIT,
    ) -> Sequence[Certification]:
        """
        Get all visible certifications for a language.
        Ordered by display_order for consistent listing.
        """
        result = await session.execute(
            select(Certification).where(
                Certification.language == language
            ).where(Certification.is_visible == True).order_by(
                Certification.display_order
            ).offset(skip).limit(limit)
        )
        return result.scalars().all()

    @classmethod
    async def get_active_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
    ) -> Sequence[Certification]:
        """
        Get non-expired certifications for a language.
        """
        result = await session.execute(
            select(Certification).where(
                Certification.language == language
            ).where(Certification.is_visible == True).where(
                Certification.is_expired == False
            ).order_by(Certification.display_order)
        )
        return result.scalars().all()

    @classmethod
    async def get_by_category_and_language(
        cls,
        session: AsyncSession,
        category: config.CertificationCategory,
        language: config.Language,
    ) -> Sequence[Certification]:
        """
        Get certifications by category and language.
        """
        result = await session.execute(
            select(Certification).where(
                Certification.language == language
            ).where(Certification.category == category).where(
                Certification.is_visible == True
            ).order_by(Certification.display_order)
        )
        return result.scalars().all()

    @classmethod
    async def count_visible_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
    ) -> int:
        """
        Count visible certifications for pagination.
        """
        result = await session.execute(
            select(func.count()).select_from(Certification).where(
                Certification.language == language
            ).where(Certification.is_visible == True)
        )
        return result.scalar_one()
```

---

## Class Documentation

### CertificationRepository

**Responsibility and Purpose:**
The `CertificationRepository` class is responsible for managing database operations related to the `Certification` model. It provides a clean, abstracted interface for retrieving certifications based on various criteria such as language, category, and visibility status.

**Public Interface (Key Methods):**
- `get_visible_by_language`: Retrieves visible certifications for a specific language.
- `get_active_by_language`: Fetches non-expired certifications for a given language.
- `get_by_category_and_language`: Obtains certifications by both category and language.
- `count_visible_by_language`: Counts the number of visible certifications for pagination purposes.

**Design Patterns Used:**
The class leverages the **Repository Pattern**, which encapsulates all access to the data source, ensuring that business logic remains separate from database interactions. This pattern is particularly useful in maintaining a clean separation between domain logic and persistence concerns.

**How it Fits in the Architecture:**
`CertificationRepository` acts as a central hub for certification-related operations within the application architecture. It interacts with the `BaseRepository` class, which provides common CRUD functionalities. By adhering to the Repository Pattern, this class ensures that business logic remains decoupled from database-specific implementations, facilitating easier maintenance and testing.

This design promotes a modular and maintainable codebase, making it easier to scale and adapt to future requirements.

---

*Generated by CodeWorm on 2026-02-18 21:02*
