# TelehookLoggingHandler

**Type:** Class Documentation
**Repository:** Telehook
**File:** src/telehook/adapters/logging_handler.py
**Language:** python
**Lines:** 13-37
**Complexity:** 0.0

---

## Source Code

```python
class TelehookLoggingHandler(logging.Handler):
    def __init__(self, notifier: Notifier, level: int = logging.ERROR):
        super().__init__(level)
        self._notifier = notifier

    def emit(self, record: logging.LogRecord) -> None:
        try:
            if record.exc_info and record.exc_info[1]:
                text = error_formatter(
                    exception = record.exc_info[1],
                    component = record.name,
                )
            else:
                text = (
                    f"\u26a0\ufe0f <b>{record.levelname}: {record.name}</b>"
                    f"\n\n<code>{record.getMessage()}</code>"
                )

            try:
                loop = asyncio.get_running_loop()
                loop.create_task(self._notifier.send(text))
            except RuntimeError:
                self._notifier.send_sync(text)
        except Exception:
            self.handleError(record)
```

---

## Class Documentation

### TelehookLoggingHandler Documentation

**Class Responsibility and Purpose:**
The `TelehookLoggingHandler` class is responsible for handling log records by sending notifications via an external notifier service. It integrates with Python's logging framework to format and transmit logs asynchronously.

**Public Interface (Key Methods):**
- **`__init__(self, notifier: Notifier, level: int = logging.ERROR)`**: Initializes the handler with a `Notifier` instance and sets the log level.
- **`emit(self, record: logging.LogRecord) -> None`**: The core method that processes each log record by formatting it and sending it to the notifier.

**Design Patterns Used:**
The class leverages the **Observer Pattern** through its interaction with the `Notifier`. It acts as an observer for log records, receiving notifications when new logs are emitted.

**How it Fits in the Architecture:**
`TelehookLoggingHandler` is part of the logging infrastructure within the Telehook application. It sits between the Python logging system and external notification services, ensuring that critical or error messages are promptly relayed to designated recipients. This class adheres to the Single Responsibility Principle by focusing solely on handling log records and notifying via a specified notifier service.

This design allows for flexible integration with various logging frameworks while maintaining a clear separation of concerns between logging and notification functionalities.

---

*Generated by CodeWorm on 2026-03-01 07:23*
