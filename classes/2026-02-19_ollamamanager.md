# OllamaManager

**Type:** Class Documentation
**Repository:** vuemantics
**File:** backend/services/ai/manager.py
**Language:** python
**Lines:** 12-52
**Complexity:** 0.0

---

## Source Code

```python
class OllamaManager:
    """
    Manages Ollama client connection
    """
    def __init__(self) -> None:
        """
        Initialize Ollama manager
        """
        self._ollama_client: AsyncClient | None = None

    async def get_client(self) -> AsyncClient:
        """
        Get or create Ollama async client
        """
        if self._ollama_client is None:
            self._ollama_client = AsyncClient(
                host = config.settings.ollama_host,
                timeout = httpx.Timeout(
                    connect = 10.0,
                    read = 300.0,
                    write = 60.0,
                    pool = 30.0
                ),
            )
        return self._ollama_client

    async def list_models(self) -> list[str]:
        """
        List available models in Ollama
        """
        client = await self.get_client()
        models = await client.list()
        return [m["name"] for m in models.get("models", [])]

    async def check_model_available(self, model_name: str) -> bool:
        """
        Check if a specific model is available
        """
        models = await self.list_models()
        base_name = model_name.split(":")[0]
        return any(base_name in m for m in models)
```

---

## Class Documentation

### OllamaManager Documentation

**Class Responsibility and Purpose:**
The `OllamaManager` class is responsible for managing the connection to an Ollama client, ensuring that a single asynchronous client instance is created and reused throughout its lifecycle. This class provides methods to list available models and check if a specific model is available in the Ollama service.

**Public Interface (Key Methods):**
- `__init__`: Initializes the manager with an optional async client.
- `get_client`: Retrieves or creates an asynchronous Ollama client instance, configured with connection and timeout settings from the configuration.
- `list_models`: Lists all available models in the Ollama service by querying the client.
- `check_model_available`: Checks if a specific model is available by comparing its base name against the list of available models.

**Design Patterns Used:**
The class uses the **Singleton pattern** implicitly through the lazy initialization of the `_ollama_client` attribute, ensuring that only one instance of the async client exists. It also follows the **Factory Method pattern** for creating and managing the client instance.

**How it Fits in the Architecture:**
In the architecture, `OllamaManager` serves as a central point for interacting with the Ollama service. Its methods are used by other components to perform operations like listing models or checking model availability without needing direct access to the underlying client implementation details. This encapsulation helps maintain clean interfaces and promotes reusability across different parts of the application.

---

*Generated by CodeWorm on 2026-02-19 07:04*
