# VideoEntryService

**Type:** Class Documentation
**Repository:** social-media-notes
**File:** backend/app/video/service.py
**Language:** python
**Lines:** 22-204
**Complexity:** 0.0

---

## Source Code

```python
class VideoEntryService:
    """
    Business logic for video entry operations
    """
    def __init__(self, session: AsyncSession) -> None:
        self.session = session

    async def create_entry(
        self,
        user_id: UUID,
        data: VideoEntryCreate,
    ) -> VideoEntryResponse:
        """
        Create a new video entry
        """
        video_number = data.video_number
        if video_number == 0:
            video_number = await VideoEntryRepository.get_next_video_number(
                self.session,
                user_id,
                data.platform,
            )

        entry = await VideoEntryRepository.create(
            self.session,
            user_id=user_id,
            platform=data.platform,
            video_number=video_number,
            description=data.description,
            youtube_description=data.youtube_description,
            scheduled_time=data.scheduled_time,
        )
        return VideoEntryResponse.model_validate(entry)

    async def get_entry(
        self,
        entry_id: UUID,
        user_id: UUID,
    ) -> VideoEntryResponse:
        """
        Get a video entry by ID
        """
        entry = await VideoEntryRepository.get_by_id_and_user(
            self.session,
            entry_id,
            user_id,
        )
        if not entry:
            raise NotFoundError("Video entry not found")
        return VideoEntryResponse.model_validate(entry)

    async def update_entry(
        self,
        entry_id: UUID,
        user_id: UUID,
        data: VideoEntryUpdate,
    ) -> VideoEntryResponse:
        """
        Update a video entry
        """
        entry = await VideoEntryRepository.get_by_id_and_user(
            self.session,
            entry_id,
            user_id,
        )
        if not entry:
            raise NotFoundError("Video entry not found")

        update_dict = data.model_dump(exclude_unset=True)
        updated = await VideoEntryRepository.update(
            self.session,
            entry,
            **update_dict,
        )
        return VideoEntryResponse.model_validate(updated)

    async def delete_entry(
        self,
        entry_id: UUID,
        user_id: UUID,
    ) -> None:
        """
        Delete a video entry
        """
        entry = await VideoEntryRepository.get_by_id_and_user(
            self.session,
            entry_id,
            user_id,
        )
        if not entry:
            raise NotFoundError("Video entry not found")
        await VideoEntryRepository.delete(self.session, entry)

    async def list_entries(
        self,
        user_id: UUID,
        platform: Platform | None = None,
        page: int = 1,
        size: int = 20,
    ) -> VideoEntryListResponse:
        """
        List video entries with optional platform filter
        """
        skip = (page - 1) * size

        if platform:
            entries = await VideoEntryRepository.get_by_user_and_platform(
                self.session,
  
```

---

## Class Documentation

### VideoEntryService Documentation

**Class Responsibility and Purpose:**
The `VideoEntryService` class is responsible for handling business logic related to video entries, including creation, retrieval, updating, deletion, listing, and copying across different platforms.

**Public Interface (Key Methods):**
- **create_entry**: Creates a new video entry.
- **get_entry**: Retrieves a video entry by ID.
- **update_entry**: Updates an existing video entry.
- **delete_entry**: Deletes a video entry.
- **list_entries**: Lists video entries for a user, optionally filtered by platform.
- **copy_to_platform**: Copies a video entry to another platform.

**Design Patterns Used:**
The class leverages the **Repository Pattern** through `VideoEntryRepository` for database operations. This pattern helps in separating business logic from data access concerns.

**How It Fits in the Architecture:**
`VideoEntryService` acts as a service layer, providing a clean interface to interact with video entries. It abstracts away the complexities of database interactions and ensures that all operations related to video entries are handled consistently. The class collaborates with `VideoEntryRepository` for data persistence, ensuring a clear separation between business logic and data access.

This design promotes maintainability and testability by encapsulating business rules within the service layer while delegating data storage responsibilities to the repository.

---

*Generated by CodeWorm on 2026-02-19 10:40*
