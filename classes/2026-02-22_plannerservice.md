# PlannerService

**Type:** Class Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/life_manager/facets/planner/service.py
**Language:** python
**Lines:** 32-102
**Complexity:** 0.0

---

## Source Code

```python
class PlannerService:
    """
    Service for planner operations
    """
    @staticmethod
    async def get_blocks_by_date(
        session: AsyncSession,
        block_date: date,
    ) -> TimeBlockListResponse:
        """
        Get all time blocks for a date
        """
        blocks = await TimeBlockRepository.get_by_date(session, block_date)
        return TimeBlockListResponse(
            items = [TimeBlockResponse.model_validate(b) for b in blocks],
            date = block_date,
        )

    @staticmethod
    async def create_block(
        session: AsyncSession,
        data: TimeBlockCreate,
    ) -> TimeBlockResponse:
        """
        Create a time block
        """
        block = await TimeBlockRepository.create(
            session,
            block_date = data.block_date,
            start_time = data.start_time,
            end_time = data.end_time,
            title = data.title,
            description = data.description,
            color = data.color,
            sort_order = data.sort_order,
        )
        return TimeBlockResponse.model_validate(block)

    @staticmethod
    async def update_block(
        session: AsyncSession,
        block_id: UUID,
        data: TimeBlockUpdate,
    ) -> TimeBlockResponse:
        """
        Update a time block
        """
        block = await TimeBlockRepository.get_by_id(session, block_id)
        if not block:
            raise TimeBlockNotFound(block_id)

        update_dict = data.model_dump(exclude_unset = True)
        block = await TimeBlockRepository.update(
            session,
            block,
            **update_dict
        )
        return TimeBlockResponse.model_validate(block)

    @staticmethod
    async def delete_block(
        session: AsyncSession,
        block_id: UUID,
    ) -> None:
        """
        Delete a time block
        """
        block = await TimeBlockRepository.get_by_id(session, block_id)
        if not block:
            raise TimeBlockNotFound(block_id)
        await TimeBlockRepository.delete(session, block)
```

---

## Class Documentation

### PlannerService

**Class Responsibility and Purpose:**
The `PlannerService` class is a service layer responsible for managing time blocks within a planner application. It provides methods to get, create, update, and delete time blocks, ensuring data integrity and consistency.

**Public Interface (Key Methods):**
- **get_blocks_by_date**: Retrieves all time blocks for a specified date.
- **create_block**: Creates a new time block with the provided details.
- **update_block**: Updates an existing time block based on its ID and the updated data.
- **delete_block**: Deletes a time block by its ID.

**Design Patterns Used:**
The class leverages the **Factory Method** pattern through static methods, which handle different operations without tightly coupling them to specific implementations. It also uses **Repository Pattern** for database interactions via `TimeBlockRepository`.

**How it Fits in the Architecture:**
`PlannerService` acts as a high-level service layer that abstracts the business logic from the repository layer. This separation ensures that changes in data storage or retrieval methods do not affect the core application logic, promoting modularity and maintainability. It integrates seamlessly with other services and repositories to manage planner operations efficiently.

---

*Generated by CodeWorm on 2026-02-22 07:28*
