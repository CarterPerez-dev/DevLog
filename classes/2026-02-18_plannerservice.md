# PlannerService

**Type:** Class Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/life_manager/facets/planner/service.py
**Language:** python
**Lines:** 29-96
**Complexity:** 0.0

---

## Source Code

```python
class PlannerService:
    """
    Service for planner operations
    """

    @staticmethod
    async def get_blocks_by_date(
        session: AsyncSession,
        block_date: date,
    ) -> TimeBlockListResponse:
        """
        Get all time blocks for a date
        """
        blocks = await TimeBlockRepository.get_by_date(session, block_date)
        return TimeBlockListResponse(
            items=[TimeBlockResponse.model_validate(b) for b in blocks],
            date=block_date,
        )

    @staticmethod
    async def create_block(
        session: AsyncSession,
        data: TimeBlockCreate,
    ) -> TimeBlockResponse:
        """
        Create a time block
        """
        block = await TimeBlockRepository.create(
            session,
            block_date=data.block_date,
            start_time=data.start_time,
            end_time=data.end_time,
            title=data.title,
            description=data.description,
            color=data.color,
            sort_order=data.sort_order,
        )
        return TimeBlockResponse.model_validate(block)

    @staticmethod
    async def update_block(
        session: AsyncSession,
        block_id: UUID,
        data: TimeBlockUpdate,
    ) -> TimeBlockResponse:
        """
        Update a time block
        """
        block = await TimeBlockRepository.get_by_id(session, block_id)
        if not block:
            raise TimeBlockNotFound(block_id)

        update_dict = data.model_dump(exclude_unset=True)
        block = await TimeBlockRepository.update(session, block, **update_dict)
        return TimeBlockResponse.model_validate(block)

    @staticmethod
    async def delete_block(
        session: AsyncSession,
        block_id: UUID,
    ) -> None:
        """
        Delete a time block
        """
        block = await TimeBlockRepository.get_by_id(session, block_id)
        if not block:
            raise TimeBlockNotFound(block_id)
        await TimeBlockRepository.delete(session, block)
```

---

## Class Documentation

### PlannerService

**Class Responsibility and Purpose:**
The `PlannerService` class is responsible for handling operations related to time blocks within a planner system. It provides static methods to create, update, retrieve, and delete time blocks, ensuring data integrity and consistency.

**Public Interface (Key Methods):**
- `get_blocks_by_date(session: AsyncSession, block_date: date) -> TimeBlockListResponse`: Retrieves all time blocks for a specific date.
- `create_block(session: AsyncSession, data: TimeBlockCreate) -> TimeBlockResponse`: Creates a new time block with the provided data.
- `update_block(session: AsyncSession, block_id: UUID, data: TimeBlockUpdate) -> TimeBlockResponse`: Updates an existing time block based on the given ID and updated data.
- `delete_block(session: AsyncSession, block_id: UUID) -> None`: Deletes a time block by its unique identifier.

**Design Patterns Used:**
The class leverages the **Repository Pattern**, where `TimeBlockRepository` handles database operations such as fetching, creating, updating, and deleting time blocks. This decouples data access logic from service-level business rules.

**Architecture Fit:**
`PlannerService` acts as a high-level service layer that interacts with the repository to manage planner-related tasks. It ensures that all operations are performed in an asynchronous manner using `AsyncSession`, making it suitable for modern web applications requiring efficient and scalable database interactions. The class is designed to be stateless, adhering to Pythonic practices such as type hints and static methods.

---

*Generated by CodeWorm on 2026-02-18 17:18*
