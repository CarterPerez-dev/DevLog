# ClassTargetFinder

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 116-195
**Complexity:** 0.0

---

## Source Code

```python
class ClassTargetFinder:
    """
    Finds classes worth documenting
    """
    def __init__(self, scanner: RepoScanner) -> None:
        self.scanner = scanner

    def find(
        self,
        repo: RepoEntry,
        limit: int = 20,
    ) -> list[DocumentationTarget]:
        targets: list[DocumentationTarget] = []

        for scanned_file in self.scanner.scan_repo(repo.path, repo.name):
            try:
                source = scanned_file.path.read_text(encoding = "utf-8")
            except Exception:
                continue

            extractor = CodeExtractor(source, scanned_file.language)

            for parsed_class in extractor.extract_classes():
                method_count = len(parsed_class.methods or [])
                line_count = parsed_class.end_line - parsed_class.start_line + 1

                if line_count < 15:
                    continue

                score = min(
                    100.0,
                    (
                        min(method_count / 6,
                            1.0) * 35 + min(line_count / 100,
                                            1.0) * 25 +
                        (10 if parsed_class.docstring else 0) +
                        min(len(parsed_class.decorators or []) * 5,
                            15) + 15
                    )
                )

                snippet = CodeSnippet(
                    repo = repo.name,
                    file_path = scanned_file.path,
                    function_name = None,
                    class_name = parsed_class.name,
                    language = scanned_file.language,
                    source = parsed_class.source[: 4000],
                    start_line = parsed_class.start_line,
                    end_line = parsed_class.end_line,
                    interest_score = score,
                    doc_type = DocType.CLASS_DOC,
                )

                targets.append(
                    DocumentationTarget(
                        doc_type = DocType.CLASS_DOC,
                        snippet = snippet,
                        source_context = parsed_class.source[: 6000],
                        metadata = {
                            "method_count":
                            method_count,
                            "method_names":
                            [m.name for m in (parsed_class.methods or [])],
                            "has_docstring":
                            bool(parsed_class.docstring),
                            "relative_path":
                            str(scanned_file.relative_path),
                        },
                    )
                )

                if len(targets) >= limit * 2:
                    break

            if len(targets) >= limit * 2:
                break

        targets.sort(key = lambda t: t.score, reverse = True)
        return targets[: limit]
```

---

## Class Documentation

### Class Documentation: `ClassTargetFinder`

**Responsibility and Purpose:**
The `ClassTargetFinder` class is responsible for identifying classes within a repository that are worth documenting based on specific criteria such as code complexity, presence of docstrings, and method count.

**Public Interface (Key Methods):**
- **`__init__(self, scanner: RepoScanner) -> None`:** Initializes the `ClassTargetFinder` with a `RepoScanner` instance.
- **`find(self, repo: RepoEntry, limit: int = 20) -> list[DocumentationTarget]`:** Scans a repository to find classes that meet the documentation criteria and returns up to a specified number of targets.

**Design Patterns Used:**
The class employs several design patterns:
- **Factory Pattern:** Implicitly through `CodeExtractor` which extracts code elements.
- **Strategy Pattern:** Through dynamic method extraction and scoring logic, allowing for flexible scoring strategies based on different factors.

**Relationship to Other Classes:**
- **`RepoScanner`:** Provides the scanned files from the repository.
- **`DocumentationTarget`:** Represents a class that has been identified as worth documenting.
- **`CodeExtractor`:** Extracts classes and methods from source code snippets.
- **`CodeSnippet`, `DocType`:** Used to store metadata about the extracted classes.

**State Management Approach:**
The state of the `ClassTargetFinder` is managed through instance variables like `self.scanner`. The class maintains a list of potential documentation targets, sorting them by their interest score before returning the top `limit` number of targets.

---

*Generated by CodeWorm on 2026-02-19 13:39*
