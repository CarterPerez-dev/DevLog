# ManualBankAdapter

**Type:** Class Documentation
**Repository:** stripe-referral
**File:** src/stripe_referral/adapters/manual.py
**Language:** python
**Lines:** 18-90
**Complexity:** 0.0

---

## Source Code

```python
class ManualBankAdapter(PayoutAdapter):
    """
    Manual bank transfer adapter for admin processed payouts
    """
    def send_payout(
        self,
        user_id: str,
        amount: float,
        _currency: str,
        _recipient_data: dict[str,
                              Any],
    ) -> PayoutResult:
        """
        Mark payout as pending manual review and processing
        """
        transaction_id = f"{MANUAL_PAYOUT_ID_PREFIX}{user_id}_{int(amount * 100)}"

        return PayoutResult(
            success = True,
            transaction_id = transaction_id,
        )

    def validate_recipient(
        self,
        recipient_data: dict[str,
                             Any]
    ) -> RecipientValidation:
        """
        Validate bank account information is present
        """
        required_fields = [
            "bank_account_number",
            "routing_number",
            "account_holder_name",
        ]

        missing_fields = [
            field for field in required_fields
            if field not in recipient_data
        ]

        if missing_fields:
            return RecipientValidation(
                valid = False,
                error =
                f"Missing required fields: {', '.join(missing_fields)}",
            )

        account_number = recipient_data.get("bank_account_number", "")
        if not account_number or len(account_number) < 4:
            return RecipientValidation(
                valid = False,
                error = "Invalid bank account number",
            )

        routing_number = recipient_data.get("routing_number", "")
        if not routing_number or len(routing_number) != 9:
            return RecipientValidation(
                valid = False,
                error = "Invalid routing number (must be 9 digits)",
            )

        account_holder_name = recipient_data.get(
            "account_holder_name",
            ""
        )
        if not account_holder_name or len(account_holder_name) < 2:
            return RecipientValidation(
                valid = False,
                error = "Invalid account holder name",
            )

        return RecipientValidation(valid = True)
```

---

## Class Documentation

### ManualBankAdapter

**Class Responsibility and Purpose:**
The `ManualBankAdapter` class is responsible for handling manual bank transfer payouts, specifically designed for admin-processed transactions. It ensures that all necessary recipient information is validated before marking a payout as pending.

**Public Interface (Key Methods):**
- **send_payout(user_id: str, amount: float, _currency: str, _recipient_data: dict[str, Any]) -> PayoutResult**: Marks the payout as pending for manual review and processing.
- **validate_recipient(recipient_data: dict[str, Any]) -> RecipientValidation**: Validates the bank account information provided by the recipient.

**Design Patterns Used:**
The class does not explicitly use any design patterns. However, it follows a simple validation pattern to ensure that all required fields are present before proceeding with the payout process.

**Relationship to Other Classes:**
- **PayoutAdapter**: Inherits from this abstract base class, ensuring compliance with the adapter pattern.
- **RecipientValidation**: Used for returning validation results, indicating whether the recipient data is valid or not.
- **PayoutResult**: Returned by `send_payout` method, indicating the success of the payout process.

**State Management Approach:**
The state management is straightforward, focusing on validating and marking payouts. The class does not maintain any complex internal states; instead, it relies on simple validation checks and returns results based on these checks.

This class fits into the architecture by providing a specific implementation for manual bank transfer payouts, ensuring that all necessary validations are performed before processing the payout manually.

---

*Generated by CodeWorm on 2026-02-18 23:19*
