# CommitMessageGenerator

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/git/ops.py
**Language:** python
**Lines:** 319-355
**Complexity:** 0.0

---

## Source Code

```python
class CommitMessageGenerator:
    """
    Generates varied commit messages for natural patterns
    """
    def __init__(self) -> None:
        """
        Initialize generator
        """
        self._last_prefix: str | None = None

    def generate(
        self,
        function_name: str,
        language: str,
        is_minor: bool = False
    ) -> str:
        """
        Generate a commit message for a documentation commit
        """
        if is_minor:
            template = random.choice(MINOR_FIX_MESSAGES)
            return template.format(name = function_name)

        prefix = random.choice(
            [p for p in COMMIT_PREFIXES if p != self._last_prefix]
        )
        self._last_prefix = prefix

        templates = [
            f"{prefix} {function_name} implementation",
            f"{prefix} {function_name} in {language}",
            f"{prefix} {function_name}",
            f"add snippet: {function_name}",
            f"cover {function_name} patterns",
        ]

        return random.choice(templates)
```

---

## Class Documentation

### CommitMessageGenerator Class Documentation

**Class Responsibility and Purpose:**
The `CommitMessageGenerator` class is responsible for generating natural-sounding commit messages, particularly for documentation commits. It ensures that each message has a unique prefix to maintain consistency across multiple commits.

**Public Interface (Key Methods):**
- **`__init__(self) -> None`:** Initializes the generator with an optional last prefix.
- **`generate(self, function_name: str, language: str, is_minor: bool = False) -> str`:** Generates a commit message based on the provided parameters. It uses random selection from predefined templates and ensures that each commit has a unique prefix.

**Design Patterns Used:**
The class leverages the **Strategy Pattern** through its use of different templates for generating messages. The `generate` method selects from multiple strategies (templates) based on whether the commit is minor or not, providing flexibility in message generation.

**How it Fits in the Architecture:**
This class is part of the `git/ops.py` module within the CodeWorm repository. It interacts with other modules that handle git operations by providing appropriate commit messages for documentation changes. The use of random selection and unique prefixes ensures a natural flow of commits, enhancing the overall commit history's readability and maintainability.

The class maintains state through the `_last_prefix` attribute to ensure each commit has a distinct prefix, adhering to best practices in version control systems.

---

*Generated by CodeWorm on 2026-02-19 14:43*
