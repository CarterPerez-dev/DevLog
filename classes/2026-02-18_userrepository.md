# UserRepository

**Type:** Class Documentation
**Repository:** Cybersecurity-Projects
**File:** TEMPLATES/fullstack-template/examples/minimal-production/backend/app/user/repository.py
**Language:** python
**Lines:** 14-91
**Complexity:** 0.0

---

## Source Code

```python
class UserRepository(BaseRepository[User]):
    """
    Repository for User model database operations
    """
    model = User

    @classmethod
    async def get_by_email(
        cls,
        session: AsyncSession,
        email: str,
    ) -> User | None:
        """
        Get user by email address
        """
        result = await session.execute(
            select(User).where(User.email == email)
        )
        return result.scalars().first()

    @classmethod
    async def get_by_id(
        cls,
        session: AsyncSession,
        id: UUID,
    ) -> User | None:
        """
        Get user by ID
        """
        return await session.get(User, id)

    @classmethod
    async def email_exists(
        cls,
        session: AsyncSession,
        email: str,
    ) -> bool:
        """
        Check if email is already registered
        """
        result = await session.execute(
            select(User.id).where(User.email == email)
        )
        return result.scalars().first() is not None

    @classmethod
    async def create_user(
        cls,
        session: AsyncSession,
        email: str,
        hashed_password: str,
    ) -> User:
        """
        Create a new user
        """
        user = User(
            email = email,
            hashed_password = hashed_password,
        )
        session.add(user)
        await session.flush()
        await session.refresh(user)
        return user

    @classmethod
    async def update_password(
        cls,
        session: AsyncSession,
        user: User,
        hashed_password: str,
    ) -> User:
        """
        Update user password
        """
        user.hashed_password = hashed_password
        await session.flush()
        await session.refresh(user)
        return user
```

---

## Class Documentation

### UserRepository Documentation

**Class Responsibility and Purpose:**
The `UserRepository` class is responsible for handling all database operations related to the `User` model within a Python application using SQLAlchemy. It provides methods to retrieve, create, update, and check the existence of user records.

**Public Interface (Key Methods):**
- **get_by_email(session: AsyncSession, email: str) -> User | None**: Fetches a user by their email address.
- **get_by_id(session: AsyncSession, id: UUID) -> User | None**: Retrieves a user by their unique identifier.
- **email_exists(session: AsyncSession, email: str) -> bool**: Checks if an email is already registered in the database.
- **create_user(session: AsyncSession, email: str, hashed_password: str) -> User**: Creates a new user with the provided email and password hash.
- **update_password(session: AsyncSession, user: User, hashed_password: str) -> User**: Updates a user's password.

**Design Patterns Used:**
The class employs the **Repository Pattern**, which abstracts database operations, ensuring that business logic remains separate from data access concerns. This pattern is particularly useful in maintaining clean architecture and promoting testability.

**How it Fits in the Architecture:**
`UserRepository` acts as a central hub for all user-related database interactions. It interfaces with the `BaseRepository[User]` class to leverage generic repository functionalities while providing specific methods tailored to user management. This design ensures that any changes in database operations are encapsulated within this single class, making the application more maintainable and scalable.

The use of asynchronous methods (`async def`) aligns with modern Python practices for handling I/O-bound tasks efficiently, which is crucial in web applications where performance is key.

---

*Generated by CodeWorm on 2026-02-18 10:37*
