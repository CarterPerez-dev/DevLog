# GitignoreFilter

**Type:** Class Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/scanner.py
**Language:** python
**Lines:** 55-100
**Complexity:** 0.0

---

## Source Code

```python
class GitignoreFilter:
    """
    Filters files based on gitignore patterns
    """
    def __init__(
        self,
        repo_root: Path,
        extra_patterns: list[str] | None = None
    ) -> None:
        """
        Initialize filter with gitignore from repo root
        """
        self.repo_root = repo_root
        patterns: list[str] = []

        gitignore_path = repo_root / ".gitignore"
        if gitignore_path.exists():
            patterns.extend(gitignore_path.read_text().splitlines())

        if extra_patterns:
            patterns.extend(extra_patterns)

        patterns.extend(
            [
                ".git/",
                "__pycache__/",
                "*.pyc",
                "node_modules/",
                ".venv/",
                "venv/",
                ".env",
                "*.egg-info/",
            ]
        )

        self.spec = pathspec.PathSpec.from_lines("gitwildmatch", patterns)

    def is_ignored(self, path: Path) -> bool:
        """
        Check if a path should be ignored
        """
        try:
            rel_path = path.relative_to(self.repo_root)
            return self.spec.match_file(str(rel_path))
        except ValueError:
            return False
```

---

## Class Documentation

### GitignoreFilter Class Documentation

**Class Responsibility and Purpose:**
The `GitignoreFilter` class is responsible for filtering files based on `.gitignore` patterns from a specified repository root directory. It ensures that certain paths are ignored according to predefined rules, making it useful for code analysis tools like CodeWorm.

**Public Interface (Key Methods):**
- **`__init__(self, repo_root: Path, extra_patterns: list[str] | None = None)`**: Initializes the filter with gitignore patterns from the repository root and any additional patterns.
- **`is_ignored(self, path: Path) -> bool`**: Checks if a given path should be ignored based on the defined patterns.

**Design Patterns Used:**
The class leverages the **Strategy pattern** through the `pathspec.PathSpec.from_lines()` method to dynamically apply gitignore rules. This allows for flexible and extensible pattern handling.

**How it Fits in the Architecture:**
`GitignoreFilter` is part of CodeWorm's analysis module, specifically within the scanner component. It ensures that irrelevant files are excluded from code analysis, maintaining focus on relevant source code. The class interacts with other components by providing filtered paths to further processing steps, ensuring efficient and accurate analysis.

---

*Generated by CodeWorm on 2026-02-19 14:26*
