# UploadResponse

**Type:** Class Documentation
**Repository:** vuemantics
**File:** backend/schemas/upload.py
**Language:** python
**Lines:** 23-124
**Complexity:** 0.0

---

## Source Code

```python
class UploadResponse(TimestampMixin):
    """
    Upload response with all fields including embedding
    """
    model_config = ConfigDict(
        extra = "forbid",
        from_attributes = True,
    )

    id: UUID = Field(description = "Upload's unique identifier")
    user_id: UUID = Field(description = "Owner's user ID")
    filename: str = Field(description = "Original filename")
    file_path: str = Field(description = "Storage path")
    file_type: FileType = Field(description = "Type of media")
    file_size: int = Field(gt = 0, description = "File size in bytes")
    mime_type: str = Field(description = "MIME type")
    processing_status: ProcessingStatus = Field(
        description = "Current processing status"
    )
    description: str | None = Field(
        default = None,
        description = "AI generated description from vision model"
    )
    description_audit_score: int | None = Field(
        default = None,
        ge = 0,
        le = 100,
        description = "Description quality score (0-100, higher is better)"
    )
    embedding_local: list[float] | None = Field(
        default = None,
        description =
        f"{EMBEDDING_DIMENSIONS}-dimensional embedding vector from bge-m3",
        min_length = EMBEDDING_DIMENSIONS,
        max_length = EMBEDDING_DIMENSIONS,
    )
    has_embedding: bool = Field(
        default = False,
        description = "Whether this upload has an embedding generated"
    )
    thumbnail_path: str | None = Field(
        default = None,
        description = "Path to generated thumbnail"
    )
    video_codec: str | None = Field(
        default = None,
        description = "Video codec (h264, hevc, vp9, av1, etc) - videos only"
    )
    error_message: str | None = Field(
        default = None,
        description = "Error details if processing failed"
    )
    metadata: dict[str,
                   Any] | None = Field(
                       default = None,
                       description = "Additional file metadata"
                   )
    hidden: bool = Field(
        default = False,
        description = "Whether this upload is hidden from gallery"
    )
    regeneration_count: int = Field(
        default = 0,
        ge = 0,
        description = "Number of times description was regenerated"
    )
    last_regenerated_at: datetime | None = Field(
        default = None,
        description = "Timestamp of last regeneration"
    )

    @field_validator("embedding_local")
    @classmethod
    def validate_embedding_dimensions(cls,
                                      v: list[float] | None
                                      ) -> list[float] | None:
        """
        Ensure embedding has exactly required dimensions.
        """
        if v is not None and len(v) != EMBEDDING_DIMENSIONS:
            raise ValueError(
                f"Embedding must have exactly {EMBEDDING_DIMENSIONS} dimensions, got {len(v)}"
            )
        return v

    @field_serializer("f
```

---

## Class Documentation

### UploadResponse Class Documentation

**Class Responsibility and Purpose:**
The `UploadResponse` class is responsible for representing an upload response with all its fields, including metadata and embedding information. It ensures that each field has a well-defined purpose and adheres to specific constraints.

**Public Interface (Key Methods):**
- **Field Validators:** The class uses Pydantic validators (`@field_validator`) to enforce data integrity rules, such as validating the dimensions of the `embedding_local` vector.
- **Field Serializers:** Custom serializers are used for serializing `file_path` and `thumbnail_path`, ensuring that relative paths are correctly prefixed with `/files/`.

**Design Patterns Used:**
- **Pydantic Models:** The class leverages Pydantic models to define data validation rules, making it easier to handle structured data.
- **Field Validators & Serializers:** These patterns ensure data consistency and proper formatting during serialization.

**How It Fits in the Architecture:**
`UploadResponse` is part of a broader schema system that handles file uploads and responses. It integrates with other classes and services by providing a standardized representation of upload metadata, which can be used for various purposes such as error handling, logging, and UI rendering. The class ensures data integrity and consistency, making it a crucial component in the backend architecture.

---

*Generated by CodeWorm on 2026-02-19 07:00*
