# LeaderboardCache

**Type:** Class Documentation
**Repository:** CertGames-Core
**File:** backend/api/core/decorators/cache.py
**Language:** python
**Lines:** 148-188
**Complexity:** 0.0

---

## Source Code

```python
class LeaderboardCache:
    """
    Specialized cache for leaderboard data
    """
    def __init__(self) -> None:
        self.cache: list[Any] = []
        self.previous_cache: list[Any] = []
        self.cache_timestamp: int = 0
        self.cache_duration_ms: int = Cache.LEADERBOARD_CACHE_DURATION_MS

    def is_expired(self) -> bool:
        """Check if cache is expired"""
        now_ms: int = int(time.time() * 1000)
        return now_ms - self.cache_timestamp > self.cache_duration_ms

    def get_cache(self) -> list[Any] | None:
        """
        Get cached data if valid
        """
        if self.is_expired():
            return None
        return self.cache

    def set_cache(
        self,
        data: list[Any],
        preserve_previous: bool = True
    ) -> None:
        """
        Set cache data
        """
        if preserve_previous:
            self.previous_cache = self.cache.copy()
        self.cache = data
        self.cache_timestamp = int(time.time() * 1000)

    def get_previous_cache(self) -> list[Any]:
        """
        Get previous cache for comparison
        """
        return self.previous_cache
```

---

## Class Documentation

### LeaderboardCache Documentation

**Class Responsibility and Purpose:**
The `LeaderboardCache` class manages a specialized cache for leaderboard data, ensuring that cached data is fresh by checking its expiration time. It supports caching mechanisms to optimize database queries and reduce load times.

**Public Interface (Key Methods):**
- **`is_expired()`**: Checks if the current cache has expired based on the cache duration.
- **`get_cache()`**: Retrieves the cached leaderboard data, returning `None` if it has expired.
- **`set_cache(data: list[Any], preserve_previous: bool = True)`**: Sets new cache data and optionally preserves the previous cache for comparison purposes.
- **`get_previous_cache()`**: Returns the previously stored cache data.

**Design Patterns Used:**
The class does not explicitly use a design pattern but follows principles of state management, where it maintains internal states such as `cache`, `previous_cache`, and `cache_timestamp`. It also uses simple conditional logic to manage cache expiration and updates.

**How it Fits in the Architecture:**
`LeaderboardCache` is part of the caching mechanism within the backend API. It interacts with other classes or services that require leaderboard data, ensuring that frequent database queries are minimized by leveraging cached results. The class fits into a broader architecture where caching strategies are employed to enhance performance and reduce load times.

This class is crucial for maintaining efficient data retrieval in scenarios where leaderboard data needs to be frequently accessed but updated less often.

---

*Generated by CodeWorm on 2026-02-18 14:50*
