# DailyLogRepository

**Type:** Class Documentation
**Repository:** ios-test
**File:** fastapi/app/daily_log/repository.py
**Language:** python
**Lines:** 17-82
**Complexity:** 0.0

---

## Source Code

```python
class DailyLogRepository(BaseRepository[DailyLog]):
    """
    Database operations for DailyLog model
    """
    model = DailyLog

    @classmethod
    async def get_by_partner_id(
        cls,
        session: AsyncSession,
        partner_id: UUID,
        skip: int = 0,
        limit: int = 100,
    ) -> Sequence[DailyLog]:
        """
        Get daily logs for a partner, ordered by log_date descending
        """
        result = await session.execute(
            select(DailyLog)
            .where(DailyLog.partner_id == partner_id)
            .order_by(DailyLog.log_date.desc())
            .offset(skip)
            .limit(limit)
        )
        return result.scalars().all()

    @classmethod
    async def get_by_partner_and_date(
        cls,
        session: AsyncSession,
        partner_id: UUID,
        log_date: date,
    ) -> DailyLog | None:
        """
        Get daily log by partner and date (unique constraint)
        """
        result = await session.execute(
            select(DailyLog)
            .where(
                DailyLog.partner_id == partner_id,
                DailyLog.log_date == log_date,
            )
        )
        return result.scalars().first()

    @classmethod
    async def get_date_range(
        cls,
        session: AsyncSession,
        partner_id: UUID,
        start_date: date,
        end_date: date,
    ) -> Sequence[DailyLog]:
        """
        Get daily logs within a date range
        """
        result = await session.execute(
            select(DailyLog)
            .where(
                DailyLog.partner_id == partner_id,
                DailyLog.log_date >= start_date,
                DailyLog.log_date <= end_date,
            )
            .order_by(DailyLog.log_date.desc())
        )
        return result.scalars().all()
```

---

## Class Documentation

### DailyLogRepository Documentation

**Class Responsibility and Purpose:**
The `DailyLogRepository` class is responsible for handling database operations related to the `DailyLog` model. It provides a clean, abstracted interface for interacting with daily logs stored in a PostgreSQL database.

**Public Interface (Key Methods):**
- **`get_by_partner_id`:** Retrieves daily logs for a specific partner, ordered by log date.
- **`get_by_partner_and_date`:** Fetches a single daily log entry based on partner ID and log date.
- **`get_date_range`:** Obtains all daily logs within a specified date range.

**Design Patterns Used:**
The class employs the **Repository Pattern**, which encapsulates data access logic, ensuring that business logic remains separate from database interactions. This pattern is particularly useful for maintaining clean code and facilitating unit testing.

**How it Fits in the Architecture:**
`DailyLogRepository` serves as a central point of interaction with the `DailyLog` model's database operations within the application. It interacts directly with SQLAlchemy sessions to perform CRUD operations, ensuring that all data access follows a consistent pattern. This class is part of the Data Access Layer (DAL) and works closely with the service layer to provide business logic with robust data handling capabilities.

This design ensures that the repository can be easily replaced or extended without affecting higher-level components in the application architecture.

---

*Generated by CodeWorm on 2026-02-19 09:27*
