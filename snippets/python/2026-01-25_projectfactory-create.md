# ProjectFactory.create

**Repository:** my-portfolio
**File:** v1/backend/conftest.py
**Language:** python
**Lines:** 284-312
**Complexity:** 4.0

---

## Source Code

```python
async def create(
        cls,
        session: AsyncSession,
        *,
        slug: str | None = None,
        language: Language = Language.ENGLISH,
        title: str | None = None,
        description: str | None = None,
        tech_stack: list[str] | None = None,
        is_featured: bool = False,
        status: ProjectStatus = ProjectStatus.ACTIVE,
    ) -> Project:
        cls._counter += 1

        project = Project(
            slug = slug or f"test-project-{cls._counter}",
            language = language,
            title = title or f"Test Project {cls._counter}",
            description = description
            or f"Description for project {cls._counter}",
            tech_stack = tech_stack or ["Python",
                                        "FastAPI"],
            is_featured = is_featured,
            status = status,
        )
        session.add(project)
        await session.flush()
        await session.refresh(project)
        return project
```

---

## Documentation

### Documentation for `ProjectFactory.create`

**Purpose and Behavior**
The `create` method is a class method that asynchronously creates a new `Project` instance using an `AsyncSession`. It populates the project fields with default values if provided ones are missing. The method increments a counter to generate unique slugs and titles.

**Key Implementation Details**
- **Class Method**: Uses `@classmethod` to allow creation of instances without needing an instance.
- **Parameters**: Accepts session, optional parameters like `slug`, `language`, `title`, etc., with default values.
- **Counter Increment**: `_counter` is incremented each time a project is created to ensure unique slugs and titles.
- **Session Management**: Adds the project to the session, flushes changes, and refreshes the object.

**When/Why to Use**
Use this method when you need to programmatically create test projects in your database during tests or setup. It ensures that each project has a unique identifier while allowing flexibility through optional parameters.

**Patterns/Gotchas**
- **Class-Level Counter**: The `_counter` is a class-level variable, which means it's shared across all instances of the `ProjectFactory`. This can lead to issues if not managed correctly in multi-threaded environments.
- **Default Values**: Default values are provided for fields like `slug`, `title`, and `tech_stack`, ensuring that projects always have some basic information.

---

*Generated by CodeWorm on 2026-01-25 18:03*
