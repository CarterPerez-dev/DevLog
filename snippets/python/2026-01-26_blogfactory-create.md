# BlogFactory.create

**Repository:** my-portfolio
**File:** v1/backend/conftest.py
**Language:** python
**Lines:** 417-444
**Complexity:** 4.0

---

## Source Code

```python
async def create(
        cls,
        session: AsyncSession,
        *,
        language: Language = Language.ENGLISH,
        title: str | None = None,
        description: str | None = None,
        external_url: str | None = None,
        category: BlogCategory = BlogCategory.TUTORIAL,
        is_visible: bool = True,
        is_featured: bool = False,
    ) -> Blog:
        cls._counter += 1

        blog = Blog(
            language = language,
            title = title or f"Test Blog {cls._counter}",
            description = description or f"Blog description {cls._counter}",
            external_url = external_url
            or f"https://blog.test.com/post-{cls._counter}",
            category = category,
            is_visible = is_visible,
            is_featured = is_featured,
        )
        session.add(blog)
        await session.flush()
        await session.refresh(blog)
        return blog
```

---

## Documentation

### Documentation for `create` Method

**Purpose and Behavior**
The `create` method is a class method that asynchronously creates a new `Blog` instance using an `AsyncSession`. It initializes the blog with default values if provided parameters are missing, such as setting a title or description. The method also increments a static counter to generate unique identifiers for each blog.

**Key Implementation Details**
- **Parameters**: Accepts session, language, title, description, external_url, category, is_visible, and is_featured.
- **Static Counter**: Uses `cls._counter` to ensure each blog has a unique identifier.
- **Session Operations**: Adds the blog instance to the session, flushes changes, and refreshes the object with updated data from the database.

**When/Why to Use This Code**
Use this method when you need to programmatically create new blog entries in your application. It handles default values gracefully and ensures that each blog has a unique identifier. The asynchronous nature makes it suitable for use cases where database operations are part of an async workflow, such as API endpoints or background tasks.

**Patterns and Gotchas**
- **Class Method Decorator**: Utilizes `@classmethod` to allow the method to be called on the class itself.
- **Static Counter**: Be cautious with static variables; ensure they are thread-safe if used in a multi-threaded environment. Consider using an alternative approach like UUIDs for unique identifiers if concurrency is a concern.

This method provides a clean and maintainable way to manage blog entries, making it easier to handle default values and database interactions.

---

*Generated by CodeWorm on 2026-01-26 01:11*
