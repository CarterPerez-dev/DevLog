# ComplexityAnalyzer.analyze_directory

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/complexity.py
**Language:** python
**Lines:** 165-183
**Complexity:** 6.0

---

## Source Code

```python
def analyze_directory(self,
                          directory: Path,
                          recursive: bool = True) -> Iterator[FileComplexity]:
        """
        Analyze all supported files in a directory
        """
        pattern = "**/*" if recursive else "*"
        for ext in self._extensions:
            for file_path in directory.glob(f"{pattern}{ext}"):
                if file_path.is_file():
                    try:
                        yield self.analyze_file(file_path)
                    except Exception as e:
                        logger.debug(
                            "file_analysis_failed",
                            file = str(file_path),
                            error = str(e)
                        )
                        continue
```

---

## Documentation

### Documentation for `analyze_directory` Method

**Purpose and Behavior:**
The `analyze_directory` method in the `ComplexityAnalyzer` class recursively (or non-recursively) analyzes all supported file extensions within a specified directory. It yields an iterator of `FileComplexity` objects, each representing the complexity analysis of a file.

**Key Implementation Details:**
- **Pattern Matching:** The pattern `pattern = "**/*" if recursive else "*"` dynamically sets the glob pattern based on whether recursion is enabled.
- **Extension Filtering:** Files are filtered by supported extensions stored in `_extensions`.
- **Error Handling:** Each file's analysis is wrapped in a try-except block to handle potential errors gracefully, logging any failures.

**When/Why to Use:**
Use this method when you need to analyze the complexity of multiple files within a directory. It supports recursive analysis and handles various file extensions efficiently. This method is particularly useful for code quality assessments or static code analysis tools.

**Patterns/Gotchas:**
- **Error Logging:** Ensure proper logging configuration to capture detailed error messages.
- **Recursive Analysis:** Be mindful that enabling recursion can significantly increase the scope of analysis, potentially impacting performance on large directories.
- **File Path Validation:** The `is_file()` check ensures only actual files are analyzed, ignoring directories or symbolic links.

---

*Generated by CodeWorm on 2026-02-18 10:37*
