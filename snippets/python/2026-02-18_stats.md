# stats

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/cli.py
**Language:** python
**Lines:** 271-295
**Complexity:** 4.0

---

## Source Code

```python
def stats(ctx: click.Context, devlog: Path | None) -> None:
    """
    Show documentation statistics
    """
    from codeworm.core import StateManager

    overrides = {"debug": ctx.obj["debug"]}
    if devlog:
        overrides["devlog"] = {"repo_path": devlog}

    settings = load_settings(config_dir = ctx.obj["config_dir"], **overrides)

    state = StateManager(settings.db_path)
    stats_data = state.get_stats()

    console.print("\n[bold]CodeWorm Statistics[/bold]\n")
    console.print(
        f"Total documented: [green]{stats_data['total_documented']}[/green]"
    )
    console.print(f"Last 7 days: [cyan]{stats_data['last_7_days']}[/cyan]")

    if stats_data["by_repo"]:
        console.print("\n[bold]By Repository:[/bold]")
        for repo_name, count in stats_data["by_repo"].items():
            console.print(f"  {repo_name}: {count}")
```

---

## Documentation

### Documentation for `stats` Function

**Purpose and Behavior:**
The `stats` function in the CodeWorm CLI displays documentation statistics based on configuration settings and optional development logs. It retrieves and prints total documented files, recent changes, and repository-specific counts.

**Key Implementation Details:**
- **Parameters:** 
  - `ctx`: A Click context object for accessing command-line arguments.
  - `devlog`: An optional Path to a development log file.
  
- **StateManager**: Manages state data using settings from the configuration directory. It loads overrides based on debug mode and devlog path if provided.

- **Stats Data:** 
  - Fetches statistics from the database at `settings.db_path`.
  - Prints formatted output using Rich's `console.print` for styled text.

**When/Why to Use:**
Use this function when you need to quickly review documentation coverage across repositories or track recent changes. It’s particularly useful during code reviews, project audits, or when integrating with CI/CD pipelines.

**Patterns and Gotchas:**
- **Type Hints:** Utilizes `Path` from the `pathlib` module for file paths.
- **Context Manager:** Implicitly uses Click context to manage command-line arguments.
- **Rich Library:** Leverages Rich’s console printing for styled output, ensuring readability in logs or terminal interfaces.

This function exemplifies a clean, modular approach to handling configuration overrides and database interactions.

---

*Generated by CodeWorm on 2026-02-18 10:14*
