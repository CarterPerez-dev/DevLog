# chart

**Type:** Documentation
**Repository:** Cybersecurity-Projects
**File:** PROJECTS/beginner/network-traffic-analyzer/python/src/netanal/main.py
**Language:** python
**Lines:** 363-423
**Complexity:** 8.0

---

## Source Code

```python
def chart(
    pcap_file: Annotated[
        Path,
        typer.Argument(help="PCAP file to visualize"),
    ],
    chart_type: Annotated[
        ChartType,
        typer.Option(
            "--type",
            "-t",
            help="Chart type",
        ),
    ] = "all",
    output: Annotated[
        Path | None,
        typer.Option(
            "--output",
            "-o",
            help="Output file path (for single chart)",
        ),
    ] = None,
    output_dir: Annotated[
        Path | None,
        typer.Option(
            "--output-dir",
            "-d",
            help="Output directory (for all charts)",
        ),
    ] = None,
) -> None:
    """
    [bold green]Generate charts[/bold green] from capture data

    Examples:
        netanal chart traffic.pcap --type protocols -o protocols.png
        netanal chart traffic.pcap --type all -d ./charts/
    """
    if not pcap_file.exists():
        print_error(f"File not found: {pcap_file}")
        raise typer.Exit(1)

    stats, _ = _analyze_pcap_to_stats(pcap_file)

    if chart_type == "all":
        out_dir = output_dir or Path()
        generated = generate_all_charts(stats, out_dir)
        for path in generated:
            print_success(f"Generated {path}")
    else:
        if not output:
            output = Path(f"{chart_type}.png")

        if chart_type == "protocols":
            fig = create_protocol_bar_chart(stats)
        elif chart_type == "top-talkers":
            fig = create_top_talkers_chart(stats)
        else:
            fig = create_bandwidth_chart(stats)

        save_chart(fig, output)
        print_success(f"Generated {output}")
```

---

## Documentation

### Documentation for `chart` Function

**Purpose and Behavior:**
The `chart` function generates visualizations from network capture data stored in a PCAP file. It supports various chart types, such as protocols, top talkers, and bandwidth analysis. The function can output charts to either a single file or an entire directory.

**Key Implementation Details:**
- **Type Hints:** Uses `Annotated` for type hints and metadata.
- **Typer CLI Integration:** Utilizes Typer for command-line argument parsing.
- **Conditional Logic:** Determines the chart type and generates appropriate visualizations based on user input.
- **Error Handling:** Checks if the PCAP file exists before processing.

**When/Why to Use:**
Use this function when you need to analyze network traffic data visually. It is particularly useful for security analysts or researchers who require quick insights into network behavior through different types of charts. The ability to specify output locations makes it flexible for both single-chart and bulk analysis needs.

**Patterns & Gotchas:**
- **Default Values:** `chart_type` defaults to "all", which generates multiple charts.
- **File Handling:** Ensure the PCAP file exists; otherwise, an error is raised.
- **Chart Types:** The function supports specific chart types like protocols, top talkers, and bandwidth. Other types may require additional implementation.

This function provides a robust way to visualize network traffic data using command-line arguments for flexibility and clarity in usage.

---

*Generated by CodeWorm on 2026-02-25 21:26*
