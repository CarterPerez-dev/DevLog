# CodeWormDaemon._find_documentation_target

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/daemon.py
**Language:** python
**Lines:** 392-442
**Complexity:** 11.0

---

## Source Code

```python
async def _find_documentation_target(self) -> DocumentationTarget | None:
        """
        Find a documentation target using weighted doc type selection
        Tries the selected type first, then falls back to others
        """
        type_weights = self.settings.documentation.type_weights
        redoc_days = self.settings.documentation.redocument_after_days
        enabled_repos = [r for r in self.settings.repos if r.enabled]

        selected_type = select_doc_type(type_weights)
        tried_types: set[DocType] = set()

        all_types = list(type_weights.keys())

        for type_str in [selected_type.value] + all_types:
            try:
                doc_type = DocType(type_str)
            except ValueError:
                continue

            if doc_type in tried_types:
                continue
            if doc_type in (DocType.WEEKLY_SUMMARY, DocType.MONTHLY_SUMMARY):
                continue
            tried_types.add(doc_type)

            for repo in enabled_repos:
                if repo.name in self.stats.repos_exhausted:
                    continue

                targets = self.target_router.find_targets(
                    doc_type = doc_type,
                    repo = repo,
                    limit = 30,
                )

                for target in targets:
                    if self.state.should_document(
                            target.snippet,
                            doc_type = doc_type,
                            redocument_after_days = redoc_days,
                    ):
                        self.logger.debug(
                            "target_found",
                            doc_type = doc_type.value,
                            target = target.display_name,
                            repo = repo.name,
                        )
                        return target

        return None
```

---

## Documentation

### Documentation for `_find_documentation_target`

**Purpose and Behavior:**
This asynchronous method searches for documentation targets by selecting a doc type based on weighted preferences, then tries the selected type first before falling back to others. It logs found targets and returns the first suitable one.

**Key Implementation Details:**
- **Async Function:** The function is marked as `async`, allowing it to perform asynchronous operations.
- **Type Weights & Selection:** Uses `type_weights` from settings to select a doc type, ensuring a weighted selection process.
- **Fallback Mechanism:** Tries the selected type first and then iterates over all types in order of preference.
- **Repo Filtering:** Iterates through enabled repositories, skipping those already exhausted by stats.
- **Target Selection & Logging:** Uses `target_router` to find targets for each doc type. Logs found targets if they meet criteria.

**When/Why to Use:**
Use this method when you need to dynamically select and search for documentation targets based on repository settings and preferences. Itâ€™s particularly useful in scenarios where different types of documentation (e.g., weekly, monthly summaries) have varying priorities.

**Patterns & Gotchas:**
- **Asynchronous Handling:** Ensure that all asynchronous operations are properly awaited.
- **Type Safety:** The `DocType` enum is used to ensure type safety and avoid runtime errors.
- **Redundant Checks:** The code checks for already tried types and certain summary types, which can be optimized if these conditions are rare.

---

*Generated by CodeWorm on 2026-02-18 11:06*
