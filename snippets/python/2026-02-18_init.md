# init

**Type:** Documentation
**Repository:** pyproject-setup
**File:** src/pyproject_setup/cli.py
**Language:** python
**Lines:** 62-265
**Complexity:** 21.0

---

## Source Code

```python
def init(
    name: str | None = typer.Option(
        None,
        "--name",
        "-n",
        help = "Project name"
    ),
    description: str | None = typer.Option(
        None,
        "--description",
        "-d",
        help = "Project description"
    ),
    preset: str | None = typer.Option(
        None,
        "--preset",
        "-p",
        help = "Project preset (fastapi-backend, library, cli-tool)",
    ),
    python: str = typer.Option(
        ">=3.12",
        "--python",
        help = "Python version requirement"
    ),
    package_path: str = typer.Option(
        "src",
        "--package-path",
        help = "Package source path"
    ),
    repository: str | None = typer.Option(
        None,
        "--repository",
        "-r",
        help = "Repository URL"
    ),
    homepage: str | None = typer.Option(
        None,
        "--homepage",
        help = "Homepage URL"
    ),
    workflow: bool = typer.Option(
        True,
        "--workflow/--no-workflow",
        help = "Add PyPI workflow"
    ),
    output: Path = typer.Option(
        Path(),
        "--output",
        "-o",
        help = "Output directory"
    ),
    force: bool = typer.Option(
        False,
        "--force",
        "-f",
        help = "Overwrite existing files"
    ),
    yapf: bool = typer.Option(
        False,
        "--yapf/--no-yapf",
        help = "Add .style.yapf config file"
    ),
) -> None:
    """
    [bold green]Initialize[/bold green] a new pyproject.toml with pre-configured tooling.

    Run interactively or pass flags for automation.
    """
    console.print()
    console.print(
        Panel(
            "[bold cyan]pyproject-setup[/bold cyan] - Project Scaffolder",
            border_style = "cyan",
        )
    )
    console.print()

    pyproject_path = output / "pyproject.toml"
    if (
        pyproject_path.exists()
        and not force
        and not Confirm.ask(
            f"[yellow]pyproject.toml already exists at {output}. Overwrite?[/yellow]"
        )
    ):
        console.print("[red]Aborted.[/red]")
        raise typer.Exit(1)

    if name is None:
        name = Prompt.ask(
            "[bold]Project name[/bold]",
            default = output.resolve().name
        )

    if description is None:
        description = Prompt.ask("[bold]Description[/bold]", default = "")

    if preset is None:
        preset_choices = list(PRESETS.keys())
        console.print("\n[bold]Available presets:[/bold]")
        for i, p in enumerate(preset_choices, 1):
            preset_obj = PRESETS[p]
            console.print(
                f"  [cyan]{i}[/cyan]. {p} - {preset_obj.description}"
            )

        while True:
            choice = Prompt.ask(
                "\n[bold]Select preset[/bold]",
                default = "1",
            )
            try:
                idx = int(choice) - 1
                if 0 <= idx < len(preset_choices):
                    preset = preset_choices[idx]
     
```

---

## Documentation

### Documentation for `init` Function in `pyproject-setup`

**Purpose and Behavior:**
The `init` function initializes a new `pyproject.toml` file with pre-configured settings, allowing users to set up a project interactively or via command-line options. It supports various configuration parameters such as project name, description, preset, Python version, package path, repository URL, homepage, and additional tooling like PyPI workflows and `.style.yapf` configurations.

**Key Implementation Details:**
- **Options Handling:** Uses `typer.Option` to define command-line arguments with default values and help messages.
- **Interactive Prompts:** If certain options are not provided, the function prompts for input interactively.
- **Validation:** Ensures that required fields like project name and preset are set before proceeding. It also checks if a `pyproject.toml` already exists in the output directory to avoid overwriting without user consent.
- **File Generation:** Generates `pyproject.toml`, PyPI workflow, and `.style.yapf` files based on user inputs.

**When/Why to Use:**
Use this function when setting up a new Python project with pre-defined configurations. It simplifies the initial setup process by allowing users to specify various project details through command-line options or interactive prompts.

**Patterns/Gotchas:**
- **Default Values:** Default values for options are set using `typer.Option`, which can be overridden via command-line arguments.
- **Interactive Prompts:** The function handles both automated and interactive use cases, making it versatile for different deployment scenarios.
- **File Existence Check:** Before writing to the output directory, the function checks if a file already exists and prompts the user to confirm overwriting. This prevents accidental data loss.

This code is particularly useful in project management tools where initial setup configurations need to be flexible yet robust.

---

*Generated by CodeWorm on 2026-02-18 07:22*
