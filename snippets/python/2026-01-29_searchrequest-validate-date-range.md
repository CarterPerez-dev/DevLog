# SearchRequest.validate_date_range

**Repository:** vuemantics
**File:** backend/schemas/search.py
**Language:** python
**Lines:** 95-107
**Complexity:** 5.0

---

## Source Code

```python
def validate_date_range(
        cls,
        v: datetime | None,
        info: ValidationInfo
    ) -> datetime | None:
        """
        Ensure date_to is after date_from if both provided
        """
        if v is not None and "date_from" in info.data:
            date_from = info.data["date_from"]
            if date_from is not None and v <= date_from:
                raise ValueError("date_to must be after date_from")
        return v
```

---

## Documentation

### Documentation for `validate_date_range`

**Purpose and Behavior**
The `validate_date_range` method ensures that the `date_to` field is logically consistent with the `date_from` field. Specifically, it checks if both fields are provided and raises a `ValueError` if `date_to` is not after `date_from`.

**Key Implementation Details**
- **Parameters**: 
  - `cls`: The class to which the method belongs.
  - `v: datetime | None`: The value of `date_to`.
  - `info: ValidationInfo`: Contains metadata, including `date_from`.
  
- **Logic**: 
  - If `date_to` is provided and `date_from` exists in `info.data`, it compares the two dates. If `date_to` is not after `date_from`, a `ValueError` is raised.
  - Otherwise, it returns the original `date_to` value.

**When/Why to Use This Code**
Use this method during data validation for search requests where you need to ensure that date ranges are logically consistent. It helps maintain data integrity by preventing invalid date ranges from being processed further in your application.

**Patterns and Gotchas**
- **Validation Decorator**: The `@field_validator("date_to")` decorator ensures this function is called automatically during field validation.
- **Class Method**: Being a class method, it can access the class itself (`cls`) which might be useful for accessing other class attributes or methods.
- **Potential Overhead**: Always consider performance implications when adding validation logic. This method adds a small overhead but is necessary for maintaining data consistency.

This function is crucial in scenarios where date ranges are critical to your application's functionality, such as filtering search results based on time periods.

---

*Generated by CodeWorm on 2026-01-29 11:25*
