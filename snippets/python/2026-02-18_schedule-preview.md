# schedule_preview

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/cli.py
**Language:** python
**Lines:** 230-261
**Complexity:** 4.0

---

## Source Code

```python
def schedule_preview(ctx: click.Context, days: int, timezone: str | None) -> None:
    """
    Preview upcoming scheduled commit times
    """
    from codeworm.scheduler import CodeWormScheduler

    settings = load_settings(config_dir = ctx.obj["config_dir"])
    configure_logging(debug = ctx.obj["debug"])

    if timezone:
        settings.schedule.timezone = timezone

    scheduler = CodeWormScheduler(settings.schedule)
    preview = scheduler.get_schedule_preview(days = days)

    console.print(f"[bold]Schedule Preview ({days} day(s))[/bold]\n")

    table = Table()
    table.add_column("Time", style = "cyan")
    table.add_column("Hour", justify = "right")
    table.add_column("Day", style = "dim")

    for entry in preview:
        day_type = "[yellow]Weekend[/yellow]" if entry["is_weekend"] else "Weekday"
        table.add_row(
            entry["time"],
            str(entry["hour"]),
            day_type,
        )

    console.print(table)
    console.print(f"\n[dim]Total commits scheduled: {len(preview)}[/dim]")
```

---

## Documentation

### Documentation for `schedule_preview` Function

**Purpose and Behavior:**
The `schedule_preview` function in the CodeWorm CLI is designed to generate a preview of upcoming scheduled commit times based on user-defined parameters. It configures a scheduler with settings from a specified configuration directory, optionally applies a timezone override, and prints a formatted table showing the schedule for a given number of days.

**Key Implementation Details:**
- **Dependencies:** The function imports `CodeWormScheduler` from `codeworm.scheduler` and uses `load_settings` to retrieve configuration data. It also configures logging based on debug mode.
- **User Input Handling:** Accepts command-line arguments for the number of days (`days`) and timezone override (`timezone`).
- **Output Generation:** Utilizes a table to display scheduled times, distinguishing between weekdays and weekends.

**When/Why to Use:**
This function is useful during development or planning phases when you need to visualize future commit schedules without actually executing them. It helps in understanding the impact of different scheduling configurations on your workflow.

**Patterns/Gotchas:**
- The use of `click.Context` for context management and logging configuration highlights best practices in command-line interface (CLI) applications.
- The function demonstrates how to handle optional parameters effectively, ensuring that the timezone override is applied only when provided by the user.

---

*Generated by CodeWorm on 2026-02-18 08:52*
