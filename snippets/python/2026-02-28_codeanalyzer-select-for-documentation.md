# CodeAnalyzer.select_for_documentation

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/analyzer.py
**Language:** python
**Lines:** 253-286
**Complexity:** 9.0

---

## Source Code

```python
def select_for_documentation(
        self,
        min_score: float = 30,
        count: int = 1,
    ) -> list[AnalysisCandidate]:
        """
        Select candidates for documentation using weighted random without replacement
        """
        selected_repo = self.repo_selector.select()
        if not selected_repo:
            return []

        candidates = self.find_candidates(repo = selected_repo, limit = 100)
        eligible = [c for c in candidates if c.score >= min_score]

        if not eligible:
            return []

        if count >= len(eligible):
            random.shuffle(eligible)
            return eligible

        selected: list[AnalysisCandidate] = []
        remaining = list(eligible)

        for _ in range(count):
            if not remaining:
                break
            weights = [c.score for c in remaining]
            chosen = random.choices(remaining, weights = weights, k = 1)[0]
            selected.append(chosen)
            remaining.remove(chosen)

        return selected
```

---

## Documentation

### Documentation for `select_for_documentation`

**Purpose and Behavior:**
The function `select_for_documentation` in the `CodeAnalyzer` class selects a specified number of candidates from a repository based on their scores, using weighted random selection without replacement. It ensures that selected candidates meet a minimum score threshold.

**Key Implementation Details:**
1. **Initialization:** The function initializes with default parameters for `min_score` and `count`.
2. **Repository Selection:** It first selects a repository using the `repo_selector` object.
3. **Candidate Filtering:** Candidates are filtered based on their scores, retaining only those above or equal to `min_score`.
4. **Random Selection:** If enough eligible candidates exist, they are shuffled and returned. Otherwise, weighted random selection is used to pick `count` candidates.

**When/Why to Use:**
Use this function when you need to select a specific number of high-scored documentation candidates from a repository for further analysis or processing. It ensures that the selected candidates meet quality criteria while providing a fair selection process.

**Patterns and Gotchas:**
- **Weighted Random Selection:** The use of `random.choices` with weights is efficient but can be slow if the list is very large.
- **Without Replacement:** Ensures no candidate is chosen more than once, maintaining integrity in subsequent selections.

---

*Generated by CodeWorm on 2026-02-28 12:46*
