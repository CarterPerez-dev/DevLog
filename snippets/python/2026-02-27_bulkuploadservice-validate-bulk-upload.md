# BulkUploadService._validate_bulk_upload

**Type:** Documentation
**Repository:** vuemantics
**File:** backend/services/bulk_upload_service.py
**Language:** python
**Lines:** 71-94
**Complexity:** 6.0

---

## Source Code

```python
def _validate_bulk_upload(files: list[UploadFile]) -> None:
        """
        Validate bulk upload request

        Args:
            files: List of uploaded files

        Raises:
            ValidationError: If validation fails
        """
        if len(files) == 0:
            raise ValidationError("No files provided")

        if len(files) > config.MAX_BULK_FILES:
            raise ValidationError(
                f"Too many files. Maximum {config.MAX_BULK_FILES} files per batch"
            )

        total_size = sum(file.size or 0 for file in files)
        if total_size > config.MAX_BULK_SIZE:
            max_gb = config.MAX_BULK_SIZE / (1024 * 1024 * 1024)
            raise ValidationError(
                f"Total file size exceeds {max_gb}GB limit"
            )
```

---

## Documentation

### Documentation for `_validate_bulk_upload`

**Purpose and Behavior:**
The function `BulkUploadService._validate_bulk_upload` validates a list of uploaded files before processing them in bulk. It checks if the number of files exceeds the allowed limit, ensures no file is missing, and verifies that the total size does not exceed the maximum allowed size.

**Key Implementation Details:**
- **Input Validation:** The function takes a list of `UploadFile` objects as input.
- **Error Handling:** It raises a `ValidationError` if any validation condition fails. Specific error messages are provided for different failure cases, including empty file lists, too many files, and excessive total size.
- **Configuration Dependency:** The maximum number of files (`MAX_BULK_FILES`) and the maximum bulk upload size in bytes (`MAX_BULK_SIZE`) are retrieved from a configuration object.

**When/Why to Use This Code:**
This function should be used whenever a bulk file upload operation needs to be validated before processing. It ensures that only valid batches of files proceed, maintaining data integrity and system performance by preventing overly large or numerous uploads.

**Patterns/Gotchas:**
- **Configuration Management:** The function relies on external configuration settings for limits, which must be correctly set in the application.
- **Error Messages:** Custom error messages are provided to give clear feedback about what went wrong. Ensure these align with user expectations and system requirements.
- **File Size Calculation:** The `file.size` attribute is used directly; ensure this attribute is available on the `UploadFile` objects passed to the function.

---

*Generated by CodeWorm on 2026-02-27 20:45*
