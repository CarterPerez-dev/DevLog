# load_config_from_yaml

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/core/config.py
**Language:** python
**Lines:** 269-291
**Complexity:** 6.0

---

## Source Code

```python
def load_config_from_yaml(config_dir: Path | None = None) -> dict:
    """
    Load configuration from YAML files in config directory
    """
    if config_dir is None:
        config_dir = DEFAULT_CONFIG_DIR

    config_dir = Path(os.path.expandvars(str(config_dir))).expanduser()

    config = load_yaml_file(config_dir / "config.yaml")

    repos_config = load_yaml_file(config_dir / "repos.yaml")
    if "repositories" in repos_config:
        repos = [
            r for r in repos_config["repositories"] if r.get("enabled", True)
        ]
        config["repos"] = repos

    prompts_config = load_yaml_file(config_dir / "prompts.yaml")
    if prompts_config:
        config["prompts"] = prompts_config

    return config
```

---

## Documentation

### Documentation for `load_config_from_yaml`

**Purpose and Behavior:**
The function `load_config_from_yaml` loads configuration settings from YAML files in a specified directory, merging repository and prompt configurations into the main config dictionary.

**Key Implementation Details:**
- **Default Directory:** If no `config_dir` is provided, it defaults to `DEFAULT_CONFIG_DIR`.
- **Path Handling:** The path is expanded using environment variables (`expandvars`) and user home directory shortcuts (`expanduser`).
- **YAML Loading:** It loads "config.yaml", "repos.yaml", and "prompts.yaml" files into a dictionary.
- **Repository Filtering:** Repositories in the `repos.yaml` file are filtered based on their `enabled` status, which defaults to `True`.
- **Configuration Merging:** The repository and prompt configurations are merged into the main config dictionary.

**When/Why to Use:**
Use this function when initializing an application that requires configuration settings from multiple YAML files. It simplifies the process of loading and merging different types of configurations, ensuring flexibility in how configurations are structured.

**Patterns/Gotchas:**
- **Default Parameters:** The `config_dir` parameter is optional but defaults to a specific directory, which might not be suitable for all use cases.
- **YAML Loading Function:** Assumes the existence of a `load_yaml_file` function; ensure it handles errors gracefully or provide fallbacks.
- **Filtering Logic:** The filtering logic in repository configuration could be expanded based on more complex conditions.

---

*Generated by CodeWorm on 2026-02-28 13:47*
