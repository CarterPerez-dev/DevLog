# ManualBankAdapter.validate_recipient

**Repository:** stripe-referral
**File:** src/stripe_referral/adapters/manual.py
**Language:** python
**Lines:** 40-90
**Complexity:** 10.0

---

## Source Code

```python
def validate_recipient(
        self,
        recipient_data: dict[str,
                             Any]
    ) -> RecipientValidation:
        """
        Validate bank account information is present
        """
        required_fields = [
            "bank_account_number",
            "routing_number",
            "account_holder_name",
        ]

        missing_fields = [
            field for field in required_fields
            if field not in recipient_data
        ]

        if missing_fields:
            return RecipientValidation(
                valid = False,
                error =
                f"Missing required fields: {', '.join(missing_fields)}",
            )

        account_number = recipient_data.get("bank_account_number", "")
        if not account_number or len(account_number) < 4:
            return RecipientValidation(
                valid = False,
                error = "Invalid bank account number",
            )

        routing_number = recipient_data.get("routing_number", "")
        if not routing_number or len(routing_number) != 9:
            return RecipientValidation(
                valid = False,
                error = "Invalid routing number (must be 9 digits)",
            )

        account_holder_name = recipient_data.get(
            "account_holder_name",
            ""
        )
        if not account_holder_name or len(account_holder_name) < 2:
            return RecipientValidation(
                valid = False,
                error = "Invalid account holder name",
            )

        return RecipientValidation(valid = True)
```

---

## Documentation

### Documentation for `validate_recipient`

**Purpose and Behavior:**
The `validate_recipient` method in the `ManualBankAdapter` class checks if a bank account's required fields are present and valid. It returns an instance of `RecipientValidation` indicating whether validation passed or failed, along with error messages for any missing or invalid fields.

**Key Implementation Details:**
- **Input:** A dictionary containing bank account information.
- **Output:** An instance of `RecipientValidation`, which is a custom class likely defined elsewhere in the codebase.
- **Validation Steps:**
  - Checks if all required fields (`bank_account_number`, `routing_number`, `account_holder_name`) are present.
  - Validates each field's content:
    - Bank account number must be non-empty and at least 4 characters long.
    - Routing number must be exactly 9 digits.
    - Account holder name must be non-empty and at least 2 characters long.

**When/Why to Use:**
Use this method when you need to ensure that bank account information is complete and correct before processing transactions. It helps prevent errors by catching missing or invalid data early in the process.

**Patterns and Gotchas:**
- The code uses list comprehension for concise field validation.
- Each validation step returns an `RecipientValidation` instance immediately, ensuring clear error messages and preventing further processing of invalid data.
- The method assumes that `RecipientValidation` has a constructor with `valid` and `error` parameters. Ensure this matches the actual implementation to avoid runtime errors.

---

*Generated by CodeWorm on 2026-01-26 15:59*
