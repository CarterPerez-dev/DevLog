# CodeAnalyzer.find_candidates

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/analyzer.py
**Language:** python
**Lines:** 228-251
**Complexity:** 9.0

---

## Source Code

```python
def find_candidates(
        self,
        repo: RepoEntry | None = None,
        limit: int = 50,
    ) -> list[AnalysisCandidate]:
        """
        Find documentation candidates from repositories
        """
        candidates: list[AnalysisCandidate] = []

        repos_to_scan = [repo] if repo else [r for r in self.repos if r.enabled]

        for repo_config in repos_to_scan:
            for scanned_file in self.scanner.scan_repo(repo_config.path,
                                                       repo_config.name):
                for candidate in self.analyze_file(scanned_file):
                    if candidate.is_worth_documenting:
                        candidates.append(candidate)

                    if len(candidates) >= limit * 3:
                        break

        candidates.sort(key = lambda c: c.score, reverse = True)
        return candidates[: limit]
```

---

## Documentation

### Documentation for `find_candidates`

**Purpose and Behavior:**
The `find_candidates` method in the `CodeAnalyzer` class identifies potential documentation candidates from repositories. It filters files, analyzes them, and returns a list of top candidates based on their scores.

**Key Implementation Details:**
- **Parameters:** 
  - `repo`: Optional repository entry to scan.
  - `limit`: Maximum number of candidates (default is 50).
- **Return Type:** A list of `AnalysisCandidate` objects.
- **Logic Flow:**
  1. Initializes an empty list for candidates.
  2. Determines repositories to scan based on the provided `repo` or all enabled repositories.
  3. Iterates over each repository, scans files, and analyzes them.
  4. Adds candidates that are worth documenting to the list.
  5. Stops adding candidates once the limit is three times reached.
  6. Sorts candidates by score in descending order before returning the top `limit` candidates.

**When/Why to Use:**
Use this method when you need to prioritize documentation efforts based on a scoring system. It helps focus on the most relevant files, ensuring that critical areas are documented first.

**Patterns and Gotchas:**
- The use of type hints (`RepoEntry`, `AnalysisCandidate`) ensures clear expectations for input and output.
- Early stopping via `break` when candidates exceed three times the limit can be a performance optimization but might miss some candidates. Adjust the multiplier as needed based on your requirements.
- Ensure that `self.repos`, `self.scanner`, and `self.analyze_file` are properly defined elsewhere in the class to avoid runtime errors.

---

*Generated by CodeWorm on 2026-02-28 12:57*
