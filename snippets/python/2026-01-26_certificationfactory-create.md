# CertificationFactory.create

**Repository:** my-portfolio
**File:** v1/backend/conftest.py
**Language:** python
**Lines:** 373-403
**Complexity:** 4.0

---

## Source Code

```python
async def create(
        cls,
        session: AsyncSession,
        *,
        language: Language = Language.ENGLISH,
        name: str | None = None,
        issuer: str | None = None,
        date_obtained: date | None = None,
        expiry_date: date | None = None,
        is_expired: bool = False,
        category: CertificationCategory = CertificationCategory.CLOUD,
        is_visible: bool = True,
    ) -> Certification:
        cls._counter += 1

        certification = Certification(
            language = language,
            name = name or f"Test Certification {cls._counter}",
            issuer = issuer or f"Test Issuer {cls._counter}",
            date_obtained = date_obtained or date(2024,
                                                  1,
                                                  1),
            expiry_date = expiry_date,
            is_expired = is_expired,
            category = category,
            is_visible = is_visible,
        )
        session.add(certification)
        await session.flush()
        await session.refresh(certification)
        return certification
```

---

## Documentation

### Documentation for `create` Method

**Purpose and Behavior**
The `create` method is a class-based asynchronous function that generates an instance of the `Certification` class using provided parameters. It sets default values if certain fields are not specified, such as the name and issuer, which are auto-generated with a counter to ensure uniqueness. The method also handles date defaults for `date_obtained`. After creating the certification object, it adds it to an `AsyncSession`, flushes changes, refreshes the object, and returns the newly created `Certification`.

**Key Implementation Details**
- **Class Method**: Uses `@classmethod` decorator, allowing it to be called on the class itself.
- **Type Hints**: Provides clear type annotations for parameters like `session`, `language`, `name`, etc., ensuring robustness.
- **Default Values and Auto-Generated Fields**: Sets default values for fields that are not provided, such as name and issuer. The counter ensures each certification has a unique identifier.
- **Session Management**: Utilizes an `AsyncSession` to manage database operations asynchronously.

**When/Why to Use This Code**
Use this method when you need to programmatically create instances of the `Certification` class in your application. It is particularly useful during testing or setup phases where predefined certifications are required, ensuring they have unique identifiers and default values as needed.

**Patterns and Gotchas**
- **Counter Management**: The `_counter` attribute is incremented each time a certification is created, which could lead to issues if not managed correctly.
- **Session Handling**: Ensure that the `AsyncSession` is properly configured and closed after use to avoid database connection leaks.

---

*Generated by CodeWorm on 2026-01-26 00:31*
