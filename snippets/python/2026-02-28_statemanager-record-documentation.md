# StateManager.record_documentation

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/core/state.py
**Language:** python
**Lines:** 182-230
**Complexity:** 1.0

---

## Source Code

```python
def record_documentation(
        self,
        snippet: CodeSnippet,
        snippet_path: str,
        git_commit: str | None = None,
        doc_type: DocType = DocType.FUNCTION_DOC,
    ) -> DocumentedSnippet:
        """
        Record that a snippet has been documented with a specific doc_type
        """
        doc_id = str(uuid.uuid4())
        code_hash = self.hash_code(snippet.source)
        now = datetime.now()

        with self._get_conn() as conn:
            conn.execute(
                """
                INSERT INTO documented_snippets
                (id, source_repo, source_file, function_name, class_name,
                 code_hash, documented_at, snippet_path, git_commit, doc_type)
                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                """,
                (
                    doc_id,
                    snippet.repo,
                    str(snippet.file_path),
                    snippet.function_name,
                    snippet.class_name,
                    code_hash,
                    now.isoformat(),
                    snippet_path,
                    git_commit,
                    doc_type.value,
                ),
            )
            conn.commit()

        return DocumentedSnippet(
            id = doc_id,
            source_repo = snippet.repo,
            source_file = str(snippet.file_path),
            function_name = snippet.function_name,
            class_name = snippet.class_name,
            code_hash = code_hash,
            documented_at = now,
            snippet_path = snippet_path,
            git_commit = git_commit,
            doc_type = doc_type,
        )
```

---

## Documentation

### Documentation for `StateManager.record_documentation`

**Purpose and Behavior:**
The `record_documentation` method records that a specific code snippet has been documented, storing metadata such as the source repository, file path, function name, class name, and documentation type. It uses a database connection to insert this information into the `documented_snippets` table.

**Key Implementation Details:**
- **Parameters:** The method accepts parameters like `snippet`, `snippet_path`, optional `git_commit`, and default `doc_type`.
- **Database Interaction:** It uses a context manager (`_get_conn()`) to ensure the database connection is properly managed.
- **Data Insertion:** Inserts data into the `documented_snippets` table, including a unique `id` generated by `uuid.uuid4()`.

**When/Why to Use:**
Use this method whenever you need to log that a code snippet has been documented. It helps in tracking documentation history and ensuring all changes are recorded for audit or compliance purposes.

**Patterns/Gotchas:**
- **Type Hints:** The use of type hints (`CodeSnippet`, `str`, `DocType`) ensures clear expectations about the input types.
- **Database Management:** Properly handling database connections with context managers prevents resource leaks and ensures transactions are committed successfully.

---

*Generated by CodeWorm on 2026-02-28 00:29*
