# InterestScorer.get_git_stats

**Type:** Documentation
**Repository:** CodeWorm
**File:** codeworm/analysis/scoring.py
**Language:** python
**Lines:** 242-295
**Complexity:** 9.0

---

## Source Code

```python
def get_git_stats(
        self,
        file_path: Path,
        _start_line: int = 0,
        _end_line: int = 0
    ) -> GitStats:
        """
        Get git statistics for a file
        """
        if not self.git_repo:
            return GitStats()

        try:
            commits_30d = 0
            commits_90d = 0
            last_modified = None
            authors = set()

            now = datetime.now()
            cutoff_30d = now - timedelta(days = 30)
            cutoff_90d = now - timedelta(days = 90)

            rel_path = str(file_path)
            with contextlib.suppress(ValueError):
                rel_path = str(file_path.relative_to(self.git_repo.working_dir))

            for commit in self.git_repo.iter_commits(paths = rel_path,
                                                     max_count = 100):
                commit_date = datetime.fromtimestamp(commit.committed_date)

                if last_modified is None:
                    last_modified = commit_date

                if commit_date >= cutoff_30d:
                    commits_30d += 1
                if commit_date >= cutoff_90d:
                    commits_90d += 1

                authors.add(commit.author.email)

            is_new = commits_90d <= 2 and last_modified and (
                now - last_modified
            ).days <= 14

            return GitStats(
                commit_count_30d = commits_30d,
                commit_count_90d = commits_90d,
                last_modified = last_modified,
                unique_authors = len(authors),
                is_new = is_new,
            )

        except Exception:
            return GitStats()
```

---

## Documentation

### Documentation for `get_git_stats` Method

**Purpose and Behavior:**
The `get_git_stats` method calculates various git statistics for a specified file path within the repository, including commit counts over 30 days and 90 days, last modification date, unique authors, and whether the file is considered new.

**Key Implementation Details:**
- Utilizes `gitpython` to interact with Git repositories.
- Filters commits using `iter_commits` with a maximum count of 100.
- Tracks commit dates to determine recent activity and unique authorship.
- Handles potential errors gracefully by returning an empty `GitStats` object.

**When/Why to Use This Code:**
Use this method when you need detailed git statistics for code analysis or project health assessment. It is particularly useful in scenarios where you want to understand the history and activity level of specific files within a repository.

**Patterns/Gotchas:**
- The use of `contextlib.suppress` prevents exceptions from `relative_to` if the file path is outside the repo.
- The method assumes that recent commits are more significant, as indicated by the 30-day and 90-day cutoffs.
- Error handling is minimal, returning an empty `GitStats` object on failure. Consider adding more specific error logging or handling for better diagnostics.

---

*Generated by CodeWorm on 2026-02-18 10:03*
