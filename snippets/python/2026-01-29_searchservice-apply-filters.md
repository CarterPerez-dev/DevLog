# SearchService._apply_filters

**Repository:** vuemantics
**File:** backend/services/search_service.py
**Language:** python
**Lines:** 185-223
**Complexity:** 11.0

---

## Source Code

```python
def _apply_filters(
        self,
        results: list[SearchResult],
        request: SearchRequest
    ) -> list[SearchResult]:
        """
        Apply additional filters to search results

        Args:
            results: Initial search results
            request: Search request with filters

        Returns:
            Filtered results
        """
        filtered = results

        if request.file_types:
            filtered = [
                r for r in filtered
                if r.upload.file_type in request.file_types
            ]

        if request.date_from:
            filtered = [
                r for r in filtered
                if r.upload.created_at >= request.date_from
            ]

        if request.date_to:
            filtered = [
                r for r in filtered
                if r.upload.created_at <= request.date_to
            ]

        for rank, result in enumerate(filtered, 1):
            result.rank = rank

        return filtered
```

---

## Documentation

### Documentation for `SearchService._apply_filters`

**Purpose and Behavior:**
The `_apply_filters` method in the `SearchService` class filters a list of search results based on criteria provided in a `SearchRequest`. It applies file type, date range, and ranking filters to refine the initial search results.

**Key Implementation Details:**
- The function takes two parameters: `results`, which is a list of `SearchResult` objects, and `request`, which contains filter conditions.
- Filters are applied conditionally based on whether specific fields in `request` are provided (e.g., file types, date ranges).
- A ranking is assigned to each result using the `enumerate` function.

**When/Why to Use:**
Use this method when you need to dynamically filter and rank search results based on user-defined criteria. It's particularly useful for enhancing search functionality in applications where users can specify filters like file type or date range.

**Patterns & Gotchas:**
- The use of list comprehensions for filtering is Pythonic and efficient.
- Be cautious with the `rank` assignment, as it overwrites any existing rank values without checking for duplicates.
- Ensure that `SearchResult` and `SearchRequest` classes are properly defined elsewhere in your codebase to avoid runtime errors.

---

*Generated by CodeWorm on 2026-01-29 11:56*
