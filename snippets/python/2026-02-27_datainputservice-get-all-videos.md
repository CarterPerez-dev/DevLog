# DataInputService.get_all_videos

**Type:** Documentation
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/analytics/facets/data_input/service.py
**Language:** python
**Lines:** 86-109
**Complexity:** 2.0

---

## Source Code

```python
async def get_all_videos(
        session: AsyncSession,
        page: int = 1,
        page_size: int = 50,
    ) -> TikTokVideoListResponse:
        """
        Get all videos with pagination
        """
        skip = (page - 1) * page_size
        videos = await TikTokVideoRepository.get_multi(
            session,
            skip = skip,
            limit = page_size
        )
        total = await TikTokVideoRepository.count(session)

        return TikTokVideoListResponse(
            items = [
                TikTokVideoResponse.model_validate(v) for v in videos
            ],
            total = total,
            page = page,
            page_size = page_size,
        )
```

---

## Documentation

### Documentation for `get_all_videos`

**Purpose and Behavior:**
The `get_all_videos` function retrieves a paginated list of TikTok videos from the database using an asynchronous session. It returns a response object containing the paginated video data, total count, current page, and page size.

**Key Implementation Details:**
- **Parameters:** The function accepts an `AsyncSession`, with optional pagination parameters `page` (default 1) and `page_size` (default 50).
- **Pagination Logic:** It calculates the skip value based on the provided page number and limit. This is used to fetch a specific slice of videos from the database.
- **Repository Interaction:** The function uses `TikTokVideoRepository.get_multi` to retrieve videos and `TikTokVideoRepository.count` to get the total video count.
- **Response Construction:** It constructs a `TikTokVideoListResponse` object, converting each video model using `model_validate` for serialization.

**When/Why to Use This Code:**
This function is ideal when you need to fetch paginated TikTok video data in an asynchronous context. It handles pagination and ensures that the response includes necessary metadata like total count and current page information.

**Patterns and Gotchas:**
- **Asynchronous Context:** Ensure this function is called within an async context manager or coroutine.
- **Repository Methods:** The repository methods `get_multi` and `count` are assumed to be correctly implemented for interacting with the database.
- **Model Validation:** Using `model_validate` ensures proper serialization of video objects, but ensure that the models are correctly defined.

This function is part of a larger system handling TikTok video analytics, providing a clean interface for fetching paginated data.

---

*Generated by CodeWorm on 2026-02-27 18:58*
