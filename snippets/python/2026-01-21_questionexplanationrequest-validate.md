# QuestionExplanationRequest.validate_question_id

**Repository:** CertGames-Core
**File:** backend/api/domains/testing/middleware/schemas.py
**Language:** python
**Lines:** 488-524
**Complexity:** 8.0

---

## Source Code

```python
def validate_question_id(cls, v: int | str) -> int | str:
        if isinstance(v, str):
            v_str: str = trim_and_normalize(v)
            if not v_str:
                raise ValidationError("Question ID is required")
            try:
                return int(v_str)
            except ValueError:
                if len(v_str) > Business.TEST_QUESTION_ID_MAX_LENGTH:
                    raise ValidationError(
                        "Question ID too long",
                        context = {
                            "length": len(v_str),
                            "max": Business.TEST_QUESTION_ID_MAX_LENGTH
                        }
                    ) from None
                return v_str
        elif isinstance(v, int):
            if v < 0:
                raise ValidationError(
                    "Question ID cannot be negative",
                    context = {"value": v}
                )
            if v > Business.TEST_QUESTION_ID_MAX_VALUE:
                raise ValidationError(
                    "Question ID too large",
                    context = {
                        "value": v,
                        "max": Business.TEST_QUESTION_ID_MAX_VALUE
                    }
                )
            return v
        else:
            raise ValidationError(
                "Question ID must be integer or string",
                context = {"type": type(v).__name__}
            )
```

---

## Documentation

### Documentation for `validate_question_id`

**Purpose and Behavior**
The function `validate_question_id` is a class method used to validate the `questionId` field in an object of type `QuestionExplanationRequest`. It checks if the input is either an integer or string, normalizes it, and ensures it meets specific criteria. If validation fails, it raises a `ValidationError`.

**Key Implementation Details**
- **Type Checking**: The function first checks if the input `v` is a string or integer.
- **String Validation**: For strings, it trims and normalizes them. It then checks for length constraints and converts to an integer if possible.
- **Integer Validation**: For integers, it ensures they are non-negative and within a specified range.
- **Error Handling**: Raises `ValidationError` with appropriate messages and context.

**When/Why to Use This Code**
Use this function when validating the `questionId` field in request schemas. It ensures that IDs are correctly formatted and meet business logic requirements, preventing invalid data from reaching downstream processes.

**Patterns/Gotchas**
- **Type Hints**: The use of type hints (`int | str`) makes it clear what types are expected.
- **Context Management**: The `context` parameter in `ValidationError` provides detailed information for debugging.
- **Error Propagation**: Using `from None` in the exception handling prevents the original traceback from being lost.

---

*Generated by CodeWorm on 2026-01-21 22:50*
