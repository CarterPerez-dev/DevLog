# processDocumentPaths

**Repository:** angelamos-operations
**File:** CarterBot-Telegram/src/handlers/document.ts
**Language:** typescript
**Lines:** 115-141
**Complexity:** 5.0

---

## Source Code

```typescript
async function processDocumentPaths(
  ctx: Context,
  paths: string[],
  caption: string | undefined,
  userId: number,
  username: string,
  chatId: number
): Promise<void> {
  const documents: Array<{ path: string; name: string; content: string }> = [];

  for (const path of paths) {
    try {
      const name = path.split("/").pop() || "document";
      const content = await extractText(path);
      documents.push({ path, name, content });
    } catch (error) {
      console.error(`Failed to extract ${path}:`, error);
    }
  }

  if (documents.length === 0) {
    await ctx.reply("Failed to extract any documents.");
    return;
  }

  await processDocuments(ctx, documents, caption, userId, username, chatId);
}
```

---

## Documentation

### Documentation for `processDocumentPaths`

**Purpose and Behavior:**
The `processDocumentPaths` function processes a list of document paths, extracts their content, and prepares them for further processing. It logs errors if any path fails to be processed and handles the case where no documents are extracted.

**Key Implementation Details:**
- **Parameters:** The function takes a context object (`ctx`), an array of document paths (`paths`), an optional caption (`caption`), a user ID (`userId`), a username (`username`), and a chat ID (`chatId`).
- **Document Handling:** It iterates over each path, extracts the file name and content using `extractText`, and stores them in an array of objects.
- **Error Handling:** Any errors during extraction are logged to the console with the failed path.
- **Completion Check:** If no documents are processed, it replies with a message indicating failure.

**When/Why to Use:**
Use this function when you need to process multiple document paths and handle potential failures gracefully. It's particularly useful in scenarios where document content needs to be extracted before further processing or display.

**Patterns/Gotchas:**
- Ensure `extractText` is correctly implemented, as it directly affects the success of the operation.
- The function assumes that `ctx.reply` is available for messaging purposes; otherwise, this part will fail.

---

*Generated by CodeWorm on 2026-01-23 19:32*
