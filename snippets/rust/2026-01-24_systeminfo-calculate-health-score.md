# SystemInfo.calculate_health_score

**Repository:** kill-pr0cess.inc
**File:** backend/src/models/performance.rs
**Language:** rust
**Lines:** 476-517
**Complexity:** 13.0

---

## Source Code

```rust
pub fn calculate_health_score(&self) -> f64 {
        let mut score: f64 = 100.0;

        // CPU usage impact
        if self.cpu_usage_percent > 90.0 {
            score -= 30.0;
        } else if self.cpu_usage_percent > 80.0 {
            score -= 20.0;
        } else if self.cpu_usage_percent > 70.0 {
            score -= 10.0;
        }

        // Memory usage impact
        if self.memory_usage_percent > 95.0 {
            score -= 25.0;
        } else if self.memory_usage_percent > 85.0 {
            score -= 15.0;
        } else if self.memory_usage_percent > 75.0 {
            score -= 8.0;
        }

        // Disk usage impact
        if self.disk_usage_percent > 95.0 {
            score -= 20.0;
        } else if self.disk_usage_percent > 90.0 {
            score -= 10.0;
        } else if self.disk_usage_percent > 80.0 {
            score -= 5.0;
        }

        // Load average impact
        let load_ratio = self.load_average_1m / self.cpu_cores as f64;
        if load_ratio > 2.0 {
            score -= 20.0;
        } else if load_ratio > 1.5 {
            score -= 10.0;
        } else if load_ratio > 1.0 {
            score -= 5.0;
        }

        score.max(0.0)
    }
```

---

## Documentation

### Documentation for `calculate_health_score`

**Purpose and Behavior:**
The function `calculate_health_score` evaluates the health score of a system based on CPU, memory, disk usage, and load average metrics. It returns a value between 0.0 and 100.0, where higher values indicate better health.

**Key Implementation Details:**
- The function iteratively adjusts the initial score (`score = 100.0`) based on thresholds for CPU (`cpu_usage_percent`), memory (`memory_usage_percent`), disk (`disk_usage_percent`), and load average (`load_average_1m`, `cpu_cores`). Each condition reduces the score by a specific amount.
- The final score is capped at 0.0 using `.max(0.0)` to ensure it does not go below zero.

**When/Why to Use This Code:**
Use this function in scenarios where you need to monitor and prioritize system health based on resource utilization metrics. It can be integrated into monitoring systems, alerting mechanisms, or performance optimization tools.

**Patterns/Gotchas:**
- The function uses a series of `if` statements with decreasing score reductions for increasing thresholds, which is a common pattern in scoring systems.
- Ensure that the input values (`cpu_usage_percent`, `memory_usage_percent`, `disk_usage_percent`, and `load_average_1m`) are correctly calculated and up-to-date to avoid inaccurate health assessments.

---

*Generated by CodeWorm on 2026-01-24 00:59*
