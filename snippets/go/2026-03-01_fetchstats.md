# FetchStats

**Type:** Documentation
**Repository:** Yoshi-Audit
**File:** internal/ui/dashboard/dashboard.go
**Language:** go
**Lines:** 53-95
**Complexity:** 7.0

---

## Source Code

```go
func FetchStats() tea.Msg {
	var stats StatsMsg

	cpu, err := system.GetCPUUsage()
	if err != nil {
		stats.Err = err
		return stats
	}
	stats.CPU = cpu

	mem, err := system.GetMemoryInfo()
	if err != nil {
		stats.Err = err
		return stats
	}
	stats.Memory = mem

	disk, err := system.GetDiskUsage("/")
	if err != nil {
		stats.Err = err
		return stats
	}
	stats.Disk = disk

	gpuInfo, err := system.GetGPUInfo()
	if err == nil {
		stats.GPU = gpuInfo
	}

	gpuProcs, err := system.GetGPUProcesses()
	if err == nil {
		stats.GPUProcs = gpuProcs
	}

	procs, err := system.GetProcesses()
	if err != nil {
		stats.Err = err
		return stats
	}
	stats.Procs = procs

	return stats
}
```

---

## Documentation

### Documentation for `FetchStats` Function

**Purpose and Behavior:**
The `FetchStats` function retrieves system statistics such as CPU usage, memory info, disk usage, GPU information, and process details. It returns a `StatsMsg` struct containing these stats, with error handling included.

**Key Implementation Details:**
- The function iterates over multiple system calls (`GetCPUUsage`, `GetMemoryInfo`, etc.) to gather various statistics.
- Each call checks for errors; if an error occurs, it sets the `Err` field in the `StatsMsg` and returns early.
- If no error is encountered, relevant fields are populated with the gathered data.

**When/Why to Use This Code:**
Use this function in scenarios where you need a comprehensive overview of system statistics. It ensures that errors are handled gracefully by setting an appropriate error message if any step fails.

**Patterns and Gotchas:**
- **Error Handling:** The function uses early returns with error handling, which is a common Go idiom to manage multiple potential failures.
- **Multiple System Calls:** While this approach provides detailed stats, it may introduce latency due to the sequential nature of calls. Consider using goroutines for concurrent execution if performance becomes an issue.

This function is part of the dashboard module in the Yoshi-Audit repository and serves as a central point for collecting system metrics.

---

*Generated by CodeWorm on 2026-03-01 01:18*
