# ListImages

**Type:** Documentation
**Repository:** Yoshi-Audit
**File:** internal/docker/client.go
**Language:** go
**Lines:** 72-106
**Complexity:** 6.0

---

## Source Code

```go
func (c *Client) ListImages() ([]ImageInfo, error) {
	ctx := context.Background()
	summaries, err := c.cli.ImageList(ctx, image.ListOptions{All: true})
	if err != nil {
		return nil, err
	}

	var images []ImageInfo
	for _, s := range summaries {
		repo := "<none>"
		tag := "<none>"
		if len(s.RepoTags) > 0 {
			parts := strings.SplitN(s.RepoTags[0], ":", 2)
			repo = parts[0]
			if len(parts) > 1 {
				tag = parts[1]
			}
		}

		dangling := repo == "<none>" && s.Containers == 0

		images = append(images, ImageInfo{
			ID:         s.ID,
			Repository: repo,
			Tag:        tag,
			Size:       s.Size,
			SharedSize: s.SharedSize,
			UniqueSize: s.Size - s.SharedSize,
			Containers: s.Containers,
			Created:    time.Unix(s.Created, 0),
			Dangling:   dangling,
		})
	}
	return images, nil
}
```

---

## Documentation

### Documentation for `ListImages` Function

**Purpose and Behavior:**
The `ListImages` function in the `Client` struct retrieves a list of Docker images from the server, filtering out dangling images that are not tagged and do not have any associated containers. It returns a slice of `ImageInfo` structs containing details such as image ID, repository name, tag, size, and creation time.

**Key Implementation Details:**
- The function uses context-aware error handling with `context.Background()`.
- It calls the Docker API's `ImageList` method to fetch summaries of all images.
- For each image summary, it extracts the repository name and tag from the first RepoTag if available.
- Dangling images are identified by checking if they have no tags and zero associated containers.
- The function appends a new `ImageInfo` struct to the result slice for each non-dangling image.

**When/Why to Use This Code:**
This code is useful when you need to list all Docker images on a system, including filtering out unused or dangling images. It can be used in scenarios where you want to manage or clean up Docker resources programmatically.

**Patterns and Gotchas:**
- The function handles errors by returning them directly.
- Using `append` within a loop is efficient for building the result slice.
- Be cautious with the assumption that only one RepoTag exists; this might not always be true.

---

*Generated by CodeWorm on 2026-03-01 02:35*
