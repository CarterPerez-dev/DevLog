# ListVolumes

**Type:** Documentation
**Repository:** Yoshi-Audit
**File:** internal/docker/client.go
**Language:** go
**Lines:** 136-165
**Complexity:** 5.0

---

## Source Code

```go
func (c *Client) ListVolumes() ([]VolumeInfo, error) {
	ctx := context.Background()
	resp, err := c.cli.VolumeList(ctx, volumeListOptions())
	if err != nil {
		return nil, err
	}

	var volumes []VolumeInfo
	for _, v := range resp.Volumes {
		var size int64
		var links int
		if v.UsageData != nil {
			size = v.UsageData.Size
			links = int(v.UsageData.RefCount)
		}

		var created time.Time
		if v.CreatedAt != "" {
			created, _ = time.Parse(time.RFC3339, v.CreatedAt)
		}

		volumes = append(volumes, VolumeInfo{
			Name:    v.Name,
			Size:    size,
			Links:   links,
			Created: created,
		})
	}
	return volumes, nil
}
```

---

## Documentation

### Documentation for `ListVolumes` Function

**Purpose and Behavior:**
The `ListVolumes` function retrieves a list of volumes from the Docker API using the client's `VolumeList` method. It processes each volume, extracting relevant information such as size, number of links, and creation time, and returns a slice of `VolumeInfo` structs.

**Key Implementation Details:**
- The function uses a context (`ctx`) to manage the request lifecycle.
- It handles potential errors from the API call using `volumeListOptions()` to configure the request.
- For each volume in the response, it checks if usage data is available and extracts size and link count accordingly.
- Creation time is parsed from a string to a `time.Time` object.

**When/Why to Use This Code:**
Use this function when you need to obtain an up-to-date list of volumes managed by Docker. It ensures that the volume information, including usage metrics and timestamps, is accurately represented in your application.

**Patterns and Gotchas:**
- The use of `context.Background()` for simplicity; consider using a more specific context with timeouts or cancellation.
- Error handling is straightforward but ensure all potential errors are properly managed, especially when parsing dates.
- The function assumes that the API response structure matches the expected format. Any changes in the API could break this code.

---

*Generated by CodeWorm on 2026-03-01 08:53*
