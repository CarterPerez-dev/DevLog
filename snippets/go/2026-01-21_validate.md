# validate

**Repository:** fullstack-template
**File:** stacks/go-react/go-backend/internal/config/config.go
**Language:** go
**Lines:** 248-290
**Complexity:** 13.0

---

## Source Code

```go
func validate(c *Config) error {
	if c.Database.URL == "" {
		return fmt.Errorf("DATABASE_URL is required")
	}

	if c.Redis.URL == "" {
		return fmt.Errorf("REDIS_URL is required")
	}

	if c.JWT.PrivateKeyPath == "" {
		return fmt.Errorf("JWT_PRIVATE_KEY_PATH is required")
	}

	if c.JWT.PublicKeyPath == "" {
		return fmt.Errorf("JWT_PUBLIC_KEY_PATH is required")
	}

	if c.CORS.AllowCredentials {
		for _, origin := range c.CORS.AllowedOrigins {
			if origin == "*" {
				return fmt.Errorf(
					"CORS wildcard '*' cannot be used with AllowCredentials",
				)
			}
		}
	}

	if c.App.Environment == "production" {
		if c.Otel.Enabled && c.Otel.Insecure {
			return fmt.Errorf("OTEL_INSECURE must be false in production")
		}
	}

	if c.Server.ReadTimeout <= 0 {
		return fmt.Errorf("server.read_timeout must be positive")
	}

	if c.Server.WriteTimeout <= 0 {
		return fmt.Errorf("server.write_timeout must be positive")
	}

	return nil
}
```

---

## Documentation

### Documentation for `validate` Function

**Purpose and Behavior:**
The `validate` function in the Go backend configuration package checks if required fields are set correctly before the application starts. It ensures that necessary environment variables like `DATABASE_URL`, `REDIS_URL`, `JWT_PRIVATE_KEY_PATH`, and `JWT_PUBLIC_KEY_PATH` are not empty, and handles specific configurations for production environments.

**Key Implementation Details:**
- The function takes a pointer to a `Config` struct as an argument.
- It uses `fmt.Errorf` to return detailed error messages if any required fields are missing or misconfigured.
- It checks the `AllowCredentials` field in CORS settings, ensuring that wildcards cannot be used with this setting enabled.
- For production environments (`c.App.Environment == "production"`), it enforces secure tracing by disallowing insecure OpenTelemetry configurations.
- It validates server timeouts to ensure they are positive values.

**When/Why to Use This Code:**
This function should be called during the initialization phase of your Go application. It ensures that all required configuration settings are correctly set, preventing runtime errors and misconfigurations. Using this validation helps maintain a robust and secure application setup.

**Patterns/Gotchas:**
- The use of `fmt.Errorf` for error messages is idiomatic in Go.
- The function assumes the presence of specific fields in the `Config` struct, so ensure these are correctly defined.
- Be cautious with production environment checks; misconfigurations here can lead to security vulnerabilities.

---

*Generated by CodeWorm on 2026-01-21 21:20*
