# Update

**Type:** Documentation
**Repository:** Yoshi-Audit
**File:** internal/ui/dashboard/dashboard.go
**Language:** go
**Lines:** 97-120
**Complexity:** 7.0

---

## Source Code

```go
func (d Dashboard) Update(msg tea.Msg) (Dashboard, tea.Cmd) {
	switch msg := msg.(type) {
	case StatsMsg:
		d.cpu = msg.CPU
		d.memory = msg.Memory
		d.disk = msg.Disk
		d.gpu = msg.GPU
		d.gpuProcs = msg.GPUProcs
		d.procs = msg.Procs
		d.err = msg.Err
	case tea.KeyMsg:
		switch msg.String() {
		case "m":
			d.sortMode = SortByMemory
		case "c":
			d.sortMode = SortByCPU
		case "g":
			d.sortMode = SortByGPU
		case "n":
			d.sortMode = SortByName
		}
	}
	return d, nil
}
```

---

## Documentation

### Documentation for `Dashboard.Update` Function

**Purpose and Behavior:**
The `Update` method of the `Dashboard` struct processes incoming messages, updating the dashboard's state based on the message type. It handles two primary types of messages:
1. **StatsMsg**: Updates various metrics like CPU, memory, disk usage, GPU status, and process information.
2. **tea.KeyMsg**: Changes the sorting mode of displayed data when a specific key is pressed.

**Key Implementation Details:**
- The method uses pattern matching with `switch msg.(type)` to handle different message types.
- For each type, it updates corresponding fields in the `Dashboard` struct.
- It also handles key presses for changing sort modes by mapping keys to sorting modes using `switch msg.String()`.

**When/Why to Use This Code:**
This method is crucial for updating the dashboard's state based on real-time data and user input. It ensures that the UI reflects current system statistics accurately and allows users to customize how the data is displayed through key bindings.

**Patterns and Gotchas:**
- **Error Handling**: The function returns `nil` as the second value, implying no error handling within this method. Ensure errors are properly managed elsewhere.
- **Tea Framework Integration**: This function integrates with the Tea framework for event-driven UI updates, making it essential for any application using this framework.

This method exemplifies Go's idiomatic use of pattern matching and structuring logic in a clean, readable manner.

---

*Generated by CodeWorm on 2026-03-01 01:38*
