# initConfig

**Type:** Documentation
**Repository:** Cybersecurity-Projects
**File:** PROJECTS/intermediate/secrets-scanner/internal/cli/root.go
**Language:** go
**Lines:** 90-129
**Complexity:** 17.0

---

## Source Code

```go
func initConfig() {
	if noColor {
		color.NoColor = true
	}

	loaded, err := config.Load(cfgFile)
	if err != nil {
		fmt.Fprintf(os.Stderr, "%s config error: %s\n",
			ui.Warning, err)
	}
	if loaded != nil {
		cfg = loaded
	} else {
		cfg = &config.Config{}
	}

	if format == "" && cfg.Output.Format != "" {
		format = cfg.Output.Format
	}
	if format == "" {
		format = "terminal"
	}

	if !verbose && cfg.Output.Verbose {
		verbose = true
	}
	if !noColor && cfg.Output.NoColor {
		noColor = true
		color.NoColor = true
	}
	if !enableHIBP && cfg.HIBP.Enabled {
		enableHIBP = true
	}
	if maxSize == 0 && cfg.Scan.MaxFileSize > 0 {
		maxSize = cfg.Scan.MaxFileSize
	}
	if len(excludes) == 0 && len(cfg.Scan.Excludes) > 0 {
		excludes = cfg.Scan.Excludes
	}
}
```

---

## Documentation

### Documentation for `initConfig` Function

**Purpose and Behavior:**
The `initConfig` function initializes configuration settings based on command-line flags, environment variables, and a config file. It sets default values if no explicit options are provided.

**Key Implementation Details:**
- **Configuration Loading:** The function loads the configuration from a specified file (`cfgFile`). If loading fails, it prints an error message.
- **Default Values:** It assigns default values to `format`, `verbose`, `noColor`, `enableHIBP`, and `maxSize` if they are not set by other means.
- **Excludes Handling:** It updates the `excludes` slice from the config file settings, ensuring it is populated even if no explicit excludes were provided.

**When/Why to Use This Code:**
This function should be used during the initialization phase of a CLI application where configuration needs to be loaded and defaults applied. It ensures that critical parameters like output format, verbosity, and file size limits are properly set before the main execution starts.

**Patterns and Gotchas:**
- **Error Handling:** The function handles errors gracefully by printing them to `os.Stderr`.
- **Default Values:** Default values are assigned in a cascading manner, ensuring that if an option is not explicitly set, it will fall back to sensible defaults.
- **Configuration Overriding:** Command-line flags can override configuration file settings, but the code ensures that these overrides do not leave any fields uninitialized.

---

*Generated by CodeWorm on 2026-02-20 08:00*
