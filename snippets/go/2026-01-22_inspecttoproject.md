# inspectToProject

**Repository:** angelamos-operations
**File:** Docker-Kentros/internal/docker/containers.go
**Language:** go
**Lines:** 194-266
**Complexity:** 14.0

---

## Source Code

```go
func inspectToProject(info container.InspectResponse) model.Container {
	name := strings.TrimPrefix(info.Name, "/")

	ports := make([]model.PortMapping, 0)
	if info.NetworkSettings != nil {
		for portProto, bindings := range info.NetworkSettings.Ports {
			parts := strings.Split(string(portProto), "/")
			containerPort := uint16(0)
			protocol := "tcp"
			if len(parts) >= 1 {
				_, _ = fmt.Sscanf(parts[0], "%d", &containerPort)
			}
			if len(parts) >= 2 {
				protocol = parts[1]
			}

			for _, binding := range bindings {
				hostPort := uint16(0)
				_, _ = fmt.Sscanf(binding.HostPort, "%d", &hostPort)
				ports = append(ports, model.PortMapping{
					HostIP:        binding.HostIP,
					HostPort:      hostPort,
					ContainerPort: containerPort,
					Protocol:      protocol,
				})
			}
		}
	}

	health := ""
	if info.State != nil && info.State.Health != nil {
		health = info.State.Health.Status
	}

	var createdAt, startedAt time.Time
	if info.Created != "" {
		createdAt, _ = time.Parse(time.RFC3339Nano, info.Created)
	}
	if info.State != nil && info.State.StartedAt != "" {
		startedAt, _ = time.Parse(time.RFC3339Nano, info.State.StartedAt)
	}

	state := ""
	status := ""
	if info.State != nil {
		state = info.State.Status
		status = info.State.Status
	}

	labels := make(map[string]string)
	if info.Config != nil {
		labels = info.Config.Labels
	}

	image := ""
	if info.Config != nil {
		image = info.Config.Image
	}

	return model.Container{
		ID:          info.ID,
		Name:        name,
		ServiceName: labels["com.docker.compose.service"],
		Image:       image,
		Status:      status,
		State:       state,
		Health:      health,
		Ports:       ports,
		Labels:      labels,
		CreatedAt:   createdAt,
		StartedAt:   startedAt,
	}
}
```

---

## Documentation

### Documentation for `inspectToProject` Function

**Purpose and Behavior:**
The `inspectToProject` function converts a Docker container inspection response (`container.InspectResponse`) into a structured `model.Container` object, extracting relevant details such as name, ports, health status, creation time, start time, image, labels, and state.

**Key Implementation Details:**
- **Name Extraction:** The function trims the prefix from the container's name.
- **Port Mapping:** It parses port bindings to create a list of `model.PortMapping` objects. This involves splitting port strings and parsing host and container ports.
- **Health Status:** Extracts health status if available.
- **Timestamp Parsing:** Converts creation and start timestamps from string to `time.Time`.
- **Image and Labels:** Retrieves the image name and labels if present.

**When/Why to Use:**
This function is useful when you need to transform raw Docker inspection data into a more structured format for easier processing or storage. It's particularly handy in scenarios where you're integrating with systems that require container metadata in a specific structure.

**Patterns and Gotchas:**
- **Error Handling:** While the code uses `_` to discard errors from `fmt.Sscanf`, this is not recommended as it can hide potential issues.
- **Type Conversions:** Ensure that string parsing matches expected formats; otherwise, it may lead to incorrect data.
- **Null Checks:** The function assumes certain fields are present. Adding null checks could improve robustness.

This function adheres to Go idioms by handling errors gracefully and using clear variable names for readability.

---

*Generated by CodeWorm on 2026-01-22 19:13*
