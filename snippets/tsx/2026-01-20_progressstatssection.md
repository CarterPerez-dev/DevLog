# ProgressStatsSection

**Repository:** CertGames-Core
**File:** frontend/user-app/src/domains/study-hub/ui/components/progressStatsSection.tsx
**Language:** tsx
**Lines:** 18-111
**Complexity:** 21.0

---

## Source Code

```tsx
function ProgressStatsSection({
  activeCertification,
  user,
}: ProgressStatsSectionProps): React.ReactElement {
  const certConfig = React.useMemo(() => {
    return activeCertification !== null && activeCertification !== undefined
      ? (getCertificationConfig(activeCertification) ?? null)
      : null;
  }, [activeCertification]);

  const testCategory = certConfig?.testCategory;

  const stats = useCertificationPerformance(user?._id, testCategory);

  const isLoading = stats === undefined;

  const testsCompleted = stats?.unique_tests ?? 0;
  const totalTests = stats?.total_tests ?? 10;
  const averageScore = stats?.average_score ?? 0;
  const bestScore = stats?.best_score ?? 0;
  const completionRate = stats?.completion_rate ?? 0;

  const hasActivity = (stats?.total_attempts ?? 0) > 0;

  return (
    <section className={styles.statsSection}>
      <div className={styles.headerRow}>
        <div className={styles.titleGroup}>
          <GiCaduceus className={styles.icon} />
          <h2 className={styles.title}>CERTIFICATION PROGRESS</h2>
        </div>
        <div className={styles.completionBadge}>
          <span className={styles.completionValue}>
            {completionRate.toFixed(0)}%
          </span>
          <span className={styles.completionLabel}>COMPLETE</span>
        </div>
      </div>

      {isLoading ? (
        <div className={styles.loadingState}>
          <div className={styles.loadingText}>Loading stats...</div>
        </div>
      ) : (
        <>
          <div className={styles.progressTrack}>
            <div
              className={styles.progressFill}
              style={{ width: `${completionRate.toString()}%` }}
            />
          </div>

          <div className={styles.statsRow}>
            <div className={styles.stat}>
              <div className={styles.statValue}>
                {testsCompleted}
                <span className={styles.statDivider}>/</span>
                {totalTests}
              </div>
              <div className={styles.statLabel}>Tests Completed</div>
            </div>

            <div className={styles.divider} />

            <div className={styles.stat}>
              <div className={styles.statValue}>
                {hasActivity ? `${averageScore.toFixed(1)}%` : '--'}
              </div>
              <div className={styles.statLabel}>Average Score</div>
            </div>

            <div className={styles.divider} />

            <div className={styles.stat}>
              <div className={styles.statValue}>
                {hasActivity ? `${bestScore.toFixed(1)}%` : '--'}
              </div>
              <div className={styles.statLabel}>Best Score</div>
            </div>

            <div className={styles.divider} />

            <div className={styles.stat}>
              <div className={styles.statValue}>
                {stats?.total_attempts ?? 0}
              </div>
              <div className={styles.statLabel}>Total Attempts</div>
            </div>
          </div>
        </>
      )}
    </section>
  );
}
```

---

## Documentation

### Documentation for `ProgressStatsSection` Component

**Purpose and Behavior:**
The `ProgressStatsSection` component displays the progress of a user in a specific certification, including completion rate, test statistics, and performance metrics. It uses memoization to efficiently recompute stats only when necessary.

**Key Implementation Details:**
- **Props:** Accepts `activeCertification` and `user`.
- **Memoized Config:** Uses `React.useMemo` to cache the certification configuration based on `activeCertification`.
- **Stats Calculation:** Retrieves performance statistics using `useCertificationPerformance`, handling loading states and undefined values gracefully.
- **UI Layout:** Displays a header with completion badge, progress track, and detailed stats rows.

**When/Why to Use:**
Use this component in pages or sections where you need to show the user's certification progress. It is ideal for dashboards or personalization areas that require dynamic performance tracking.

**Patterns and Gotchas:**
- **Memoization:** The `certConfig` is memoized, which helps avoid unnecessary re-renders.
- **Null Checks:** Proper null checks are used to handle cases where stats might be undefined, ensuring the UI remains consistent.
- **Loading State:** A clear loading state is provided for asynchronous data fetching.

This component ensures a clean and efficient way to display complex user statistics in a React application.

---

*Generated by CodeWorm on 2026-01-20 16:17*
