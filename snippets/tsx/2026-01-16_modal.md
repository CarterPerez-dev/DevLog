# Modal

**Repository:** Cybersecurity-Projects
**File:** PROJECTS/encrypted-p2p-chat/frontend/src/components/UI/Modal.tsx
**Language:** tsx
**Lines:** 18-117
**Complexity:** 16.0

---

## Source Code

```tsx
function Modal(props: ModalProps): JSX.Element {
  const size = (): Size => props.size ?? "md"
  const closeOnOverlayClick = (): boolean => props.closeOnOverlayClick ?? true
  const showCloseButton = (): boolean => props.showCloseButton ?? true

  const handleOverlayClick = (e: MouseEvent): void => {
    if (e.target === e.currentTarget && closeOnOverlayClick()) {
      props.onClose()
    }
  }

  const handleKeyDown = (e: KeyboardEvent): void => {
    if (e.key === "Escape") {
      props.onClose()
    }
  }

  createEffect(() => {
    if (props.isOpen) {
      document.addEventListener("keydown", handleKeyDown)
      document.body.style.overflow = "hidden"
    }

    onCleanup(() => {
      document.removeEventListener("keydown", handleKeyDown)
      document.body.style.overflow = ""
    })
  })

  const handleOverlayKeyDown = (e: KeyboardEvent): void => {
    if (e.key === "Enter" || e.key === " ") {
      e.preventDefault()
      if (closeOnOverlayClick()) {
        props.onClose()
      }
    }
  }

  return (
    <Show when={props.isOpen}>
      <div
        class="fixed inset-0 z-50 flex items-center justify-center p-4"
        role="button"
        tabIndex={0}
        onClick={handleOverlayClick}
        onKeyDown={handleOverlayKeyDown}
        aria-label="Close modal overlay"
      >
        <div class="absolute inset-0 bg-black/80 animate-fade-in" />

        <div
          class={`
            relative z-10 w-full
            bg-black border-4 border-orange
            shadow-[8px_8px_0_var(--color-orange)]
            animate-scale-in
            ${SIZE_CLASSES[size()]}
          `}
          role="dialog"
          aria-modal="true"
          aria-labelledby={props.title ? "modal-title" : undefined}
        >
          <Show when={(props.title !== undefined && props.title !== "") || showCloseButton()}>
            <div class="flex items-start justify-between p-4 border-b-2 border-orange">
              <div class="flex-1">
                <Show when={props.title}>
                  <h2
                    id="modal-title"
                    class="font-pixel text-sm text-orange uppercase"
                  >
                    {props.title}
                  </h2>
                </Show>
                <Show when={props.description}>
                  <p class="font-pixel text-[10px] text-gray mt-1">
                    {props.description}
                  </p>
                </Show>
              </div>

              <Show when={showCloseButton()}>
                <IconButton
                  icon={<CloseIcon />}
                  ariaLabel="Close modal"
                  onClick={props.onClose}
                  size="sm"
                  variant="ghost"
                />
              </Show>
            </div>
          </Show>

          <div class="p-4">
            {props.children}
          </div>
        </div>
      </div>
    </Show>
  )
}
```

---

## Documentation

### Documentation for `Modal` Component

**Purpose and Behavior:**
The `Modal` component is a reusable dialog box that can be shown or hidden based on props. It supports various interactions, including closing the modal via overlay click, keyboard navigation (Escape key), and an optional close button.

**Key Implementation Details:**
- **Props:** The component accepts `props.size`, `props.closeOnOverlayClick`, and `props.showCloseButton` to customize its appearance and behavior.
- **Event Handling:** It listens for `keydown` events on the document body to handle modal closure via the Escape key. Overlay click events are also managed, closing the modal if the overlay is clicked while itâ€™s open.
- **Effects:** The component uses `createEffect` from React hooks to add and remove event listeners when the modal opens or closes.

**When/Why to Use:**
Use this component for any scenario requiring a modal dialog in your application. It provides flexibility with customizable size, close behavior, and content through props, making it suitable for various use cases like notifications, confirmation dialogs, or form submissions.

**Patterns/Gotchas:**
- The `createEffect` hook ensures that event listeners are properly cleaned up when the modal is closed to prevent memory leaks.
- The use of conditional rendering (`Show`) helps manage complex UI logic without unnecessary DOM updates.
- Be cautious with prop types; incorrect values can lead to unexpected behavior, such as missing close buttons or incorrect overlay handling.

---

*Generated by CodeWorm on 2026-01-16 00:39*
