# service

**Type:** File Overview
**Repository:** my-portfolio
**File:** v1/backend/app/blog/service.py
**Language:** python
**Lines:** 1-109
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2025
service.py
"""

from uuid import UUID

from sqlalchemy.ext.asyncio import AsyncSession

import config
from config import (
    BlogCategory,
    Language,
)
from core.exceptions import BlogNotFound
from .repository import BlogRepository
from .schemas import (
    BlogBriefResponse,
    BlogListResponse,
    BlogResponse,
)


class BlogService:
    """
    Business logic for blog operations.
    """
    def __init__(self, session: AsyncSession) -> None:
        self.session = session

    async def get_by_id(self, blog_id: UUID) -> BlogResponse:
        """
        Get blog post by ID.
        """
        blog = await BlogRepository.get_by_id(self.session, blog_id)
        if not blog:
            raise BlogNotFound(str(blog_id))
        return BlogResponse.model_validate(blog)

    async def list_visible(
        self,
        language: Language,
        skip: int = config.PAGINATION_DEFAULT_SKIP,
        limit: int = config.PAGINATION_DEFAULT_LIMIT,
    ) -> BlogListResponse:
        """
        List visible blog posts for a language.
        """
        blogs = await BlogRepository.get_visible_by_language(
            self.session,
            language,
            skip,
            limit,
        )
        total = await BlogRepository.count_visible_by_language(
            self.session,
            language,
        )
        return BlogListResponse(
            items = [BlogResponse.model_validate(b) for b in blogs],
            total = total,
            skip = skip,
            limit = limit,
        )

    async def list_featured(
        self,
        language: Language,
        limit: int = config.PAGINATION_FEATURED_LIMIT,
    ) -> list[BlogResponse]:
        """
        List featured blog posts for a language.
        Used for overview page highlights.
        """
        blogs = await BlogRepository.get_featured_by_language(
            self.session,
            language,
            limit,
        )
        return [BlogResponse.model_validate(b) for b in blogs]

    async def list_by_category(
        self,
        category: BlogCategory,
        language: Language,
    ) -> list[BlogResponse]:
        """
        List blog posts by category and language.
        """
        blogs = await BlogRepository.get_by_category_and_language(
            self.session,
            category,
            language,
        )
        return [BlogResponse.model_validate(b) for b in blogs]

    async def get_nav_items(
        self,
        language: Language,
    ) -> list[BlogBriefResponse]:
        """
        Get brief blog data for sidebar navigation.
        """
        blogs = await BlogRepository.get_visible_by_language(
            self.session,
            language,
        )
        return [BlogBriefResponse.model_validate(b) for b in blogs]

```

---

## File Overview

# service.py

**Purpose and Responsibility:**
This Python file contains the business logic for managing blog operations within a web application. It interacts with a database through an asynchronous session to perform CRUD-like operations on `Blog` entities.

**Key Exports and Public Interface:**
- **BlogService**: A class responsible for handling various blog-related operations such as fetching individual blogs, listing visible and featured blogs, categorizing blogs, and generating navigation items.
  - `get_by_id`: Retrieves a specific blog by its ID.
  - `list_visible`: Lists all visible blogs in a given language with pagination support.
  - `list_featured`: Lists featured blogs for a given language.
  - `list_by_category`: Lists blogs by category and language.
  - `get_nav_items`: Generates brief blog data for sidebar navigation.

**How it Fits into the Project:**
This file serves as an intermediary between the database layer (handled by `BlogRepository`) and the application logic. It provides a clean, structured API that can be easily integrated with other parts of the application, such as views or APIs.

**Notable Design Decisions:**
- **Asynchronous Operations**: All methods are asynchronous to support non-blocking I/O operations.
- **Dependency Injection**: The `AsyncSession` is passed via constructor injection, promoting loose coupling and testability.
- **Type Hints and Validation**: Utilizes Pydantic models for data validation and transformation between database entities and API responses.
- **Pagination Support**: Methods like `list_visible` support pagination through skip and limit parameters, ensuring efficient querying of large datasets.
```

This documentation provides a high-level overview of the file's purpose, its key components, how it integrates with other parts of the project, and some design decisions that were made.

---

*Generated by CodeWorm on 2026-02-20 08:26*
