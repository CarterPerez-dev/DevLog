# service

**Type:** File Overview
**Repository:** my-portfolio
**File:** v1/backend/app/experience/service.py
**Language:** python
**Lines:** 1-91
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2025
service.py
"""

from uuid import UUID

from sqlalchemy.ext.asyncio import AsyncSession

import config
from config import Language
from core.exceptions import ExperienceNotFound
from .repository import ExperienceRepository
from .schemas import (
    ExperienceBriefResponse,
    ExperienceListResponse,
    ExperienceResponse,
)


class ExperienceService:
    """
    Business logic for experience operations.
    """
    def __init__(self, session: AsyncSession) -> None:
        self.session = session

    async def get_by_id(self, experience_id: UUID) -> ExperienceResponse:
        """
        Get experience by ID.
        """
        experience = await ExperienceRepository.get_by_id(
            self.session,
            experience_id,
        )
        if not experience:
            raise ExperienceNotFound(str(experience_id))
        return ExperienceResponse.model_validate(experience)

    async def list_visible(
        self,
        language: Language,
        skip: int = config.PAGINATION_DEFAULT_SKIP,
        limit: int = config.PAGINATION_DEFAULT_LIMIT,
    ) -> ExperienceListResponse:
        """
        List visible experiences for a language.
        """
        experiences = await ExperienceRepository.get_visible_by_language(
            self.session,
            language,
            skip,
            limit,
        )
        total = await ExperienceRepository.count_visible_by_language(
            self.session,
            language,
        )
        return ExperienceListResponse(
            items = [ExperienceResponse.model_validate(e) for e in experiences],
            total = total,
            skip = skip,
            limit = limit,
        )

    async def list_current(
        self,
        language: Language,
    ) -> list[ExperienceResponse]:
        """
        List current (ongoing) positions for a language.
        """
        experiences = await ExperienceRepository.get_current_by_language(
            self.session,
            language,
        )
        return [ExperienceResponse.model_validate(e) for e in experiences]

    async def get_timeline(
        self,
        language: Language,
    ) -> list[ExperienceBriefResponse]:
        """
        Get brief experience data for timeline display.
        """
        experiences = await ExperienceRepository.get_visible_by_language(
            self.session,
            language,
        )
        return [ExperienceBriefResponse.model_validate(e) for e in experiences]

```

---

## File Overview

**File Purpose and Responsibility:**
This Python source file, `service.py`, is responsible for handling business logic related to experience data within a portfolio application. It interacts with an asynchronous database session via a repository layer to perform operations such as fetching experiences by ID, listing visible experiences, and generating timeline data.

**Key Exports or Public Interface:**
- **ExperienceService**: The primary class exposing methods like `get_by_id`, `list_visible`, `list_current`, and `get_timeline`. These methods provide a high-level interface for managing experience records.
- **ExperienceResponse**, **ExperienceListResponse**, and **ExperienceBriefResponse**: Schemas used to serialize experience data, ensuring consistent and structured output.

**How It Fits in the Project:**
This service layer sits between the repository layer (which handles database interactions) and the application logic. It abstracts away the complexities of direct database operations, providing a clean interface for other parts of the application to interact with experience data.

**Notable Design Decisions:**
- **Dependency Injection**: The `ExperienceService` constructor accepts an `AsyncSession`, allowing flexibility in how sessions are managed.
- **Type Hints and Schemas**: Extensive use of type hints and Pydantic schemas ensures robust data validation and consistent data structures throughout the application.
- **Pagination and Filtering**: Methods like `list_visible` support pagination and filtering, making it easier to handle large datasets efficiently.
```

This documentation provides a high-level overview of the file's purpose, key components, integration within the project, and notable design choices.

---

*Generated by CodeWorm on 2026-02-20 09:09*
