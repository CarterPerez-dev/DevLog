# targets

**Type:** File Overview
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 1-705
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2026
analysis/targets.py
"""
from __future__ import annotations

import random
from dataclasses import dataclass, field
from pathlib import Path
from typing import TYPE_CHECKING, ClassVar

from git import InvalidGitRepositoryError, Repo

from codeworm.analysis.parser import CodeExtractor
from codeworm.analysis.scanner import RepoScanner
from codeworm.models import LANGUAGE_EXTENSIONS, CodeSnippet, DocType, Language

if TYPE_CHECKING:
    from codeworm.core.config import RepoEntry


@dataclass
class DocumentationTarget:
    """
    A generalized documentation target that supports any doc type
    """
    doc_type: DocType
    snippet: CodeSnippet
    source_context: str
    metadata: dict = field(default_factory = dict)

    @property
    def score(self) -> float:
        return self.snippet.interest_score

    @property
    def display_name(self) -> str:
        return self.snippet.display_name


class FileTargetFinder:
    """
    Finds files worth documenting at the file level
    """
    def __init__(self, scanner: RepoScanner) -> None:
        self.scanner = scanner

    def find(
        self,
        repo: RepoEntry,
        limit: int = 20,
    ) -> list[DocumentationTarget]:
        targets: list[DocumentationTarget] = []

        for scanned_file in self.scanner.scan_repo(repo.path, repo.name):
            try:
                source = scanned_file.path.read_text(encoding = "utf-8")
            except Exception:  # noqa: S112
                continue

            line_count = source.count("\n") + 1
            if line_count < 20:
                continue

            extractor = CodeExtractor(source, scanned_file.language)
            func_count = sum(1 for _ in extractor.extract_functions())

            score = min(
                100.0,
                (
                    min(line_count / 200,
                        1.0) * 30 + min(func_count / 8,
                                        1.0) * 30 +
                    min(scanned_file.size_bytes / 5000,
                        1.0) * 20 + min(source.count("import ") / 10,
                                        1.0) * 20
                )
            )

            if score < 20:
                continue

            snippet = CodeSnippet(
                repo = repo.name,
                file_path = scanned_file.path,
                function_name = None,
                class_name = None,
                language = scanned_file.language,
                source = source[: 4000],
                start_line = 1,
                end_line = line_count,
                interest_score = score,
                doc_type = DocType.FILE_DOC,
            )

            targets.append(
                DocumentationTarget(
                    doc_type = DocType.FILE_DOC,
                    snippet = snippet,
                    source_context = source[: 6000],
                    metadata = {
                        "line_count": line_count,
                        "function
```

---

## File Overview

### Purpose and Responsibility

This Python source file, `targets.py`, is part of the CodeWorm project, which aims to automate code documentation generation. The primary responsibility of this file is to identify and prioritize files and classes within a repository that are worth documenting based on their content and structure.

### Key Exports and Public Interface

- **`DocumentationTarget`**: A data class representing a target for generating documentation.
- **`FileTargetFinder`**: A class responsible for finding files in the repository that meet certain criteria to be documented.
- **`ClassTargetFinder`**: A class responsible for identifying classes within files that are suitable for documentation.

### How it Fits into the Project

This file is crucial as it integrates with other components of CodeWorm, such as `RepoScanner` and `CodeExtractor`, to analyze code and determine which parts should be documented. It works in tandem with the core configuration (`RepoEntry`) to ensure that only relevant sections are considered for documentation.

### Notable Design Decisions

- **Scoring Mechanism**: Both `FileTargetFinder` and `ClassTargetFinder` use a scoring system based on various factors like line count, function count, docstring presence, and decorator usage. This helps in prioritizing the most important parts of the code.
- **Type Hints and Data Classes**: The use of type hints and data classes (`DocumentationTarget`) ensures that the code is clear and maintainable, making it easier to understand and extend.
- **Error Handling**: The `try-except` blocks handle potential file reading errors gracefully, ensuring that the analysis process continues even if some files are problematic.
```

This documentation provides a high-level overview of the file's role within the project, its key components, and important design choices.

---

*Generated by CodeWorm on 2026-02-28 13:56*
