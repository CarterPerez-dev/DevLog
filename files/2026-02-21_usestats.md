# useStats

**Type:** File Overview
**Repository:** CodeWorm
**File:** dashboard/frontend/src/api/hooks/useStats.ts
**Language:** typescript
**Lines:** 1-61
**Complexity:** 0.0

---

## Source Code

```typescript
// Â©AngelaMos | 2026
// useStats.ts

import type { UseQueryResult } from '@tanstack/react-query'
import { useQuery } from '@tanstack/react-query'
import {
  DASHBOARD_ERROR_MESSAGES,
  DashboardResponseError,
  isValidStatsResponse,
  type LanguageBreakdown,
  type StatsResponse,
} from '@/api/types'
import { API_ENDPOINTS, QUERY_CONFIG, QUERY_KEYS } from '@/config'
import { apiClient } from '@/core/api'

export const statsQueries = {
  all: () => QUERY_KEYS.STATS,
  languages: () => QUERY_KEYS.LANGUAGES,
} as const

const fetchStats = async (): Promise<StatsResponse> => {
  const response = await apiClient.get<unknown>(API_ENDPOINTS.STATS)
  const data: unknown = response.data

  if (!isValidStatsResponse(data)) {
    throw new DashboardResponseError(
      DASHBOARD_ERROR_MESSAGES.INVALID_STATS_RESPONSE,
      API_ENDPOINTS.STATS
    )
  }

  return data
}

export const useStats = (): UseQueryResult<StatsResponse, Error> => {
  return useQuery({
    queryKey: statsQueries.all(),
    queryFn: fetchStats,
    staleTime: QUERY_CONFIG.STALE_TIME.STATS,
    refetchInterval: QUERY_CONFIG.STALE_TIME.STATS,
  })
}

const fetchLanguages = async (): Promise<LanguageBreakdown[]> => {
  const response = await apiClient.get<LanguageBreakdown[]>(
    API_ENDPOINTS.LANGUAGES
  )
  return response.data
}

export const useLanguages = (): UseQueryResult<
  LanguageBreakdown[],
  Error
> => {
  return useQuery({
    queryKey: statsQueries.languages(),
    queryFn: fetchLanguages,
    staleTime: QUERY_CONFIG.STALE_TIME.STATIC,
  })
}

```

---

## File Overview

# useStats.ts Documentation

## Purpose and Responsibility
This file provides hooks for fetching statistics and language breakdowns from the API, leveraging `@tanstack/react-query` for state management.

## Key Exports and Public Interface
- **useStats**: A hook that fetches aggregated statistics.
- **useLanguages**: A hook that fetches a list of languages with their respective usage breakdowns.

## How It Fits in the Project
This file is part of the API hooks module, which provides reusable functions for fetching data from the backend. `useStats` and `useLanguages` are used throughout the application to ensure consistent and efficient data retrieval, particularly within the dashboard components.

## Notable Design Decisions
- **Type Safety**: Utilizes TypeScript types (`StatsResponse`, `LanguageBreakdown`) to enforce type safety.
- **Error Handling**: Implements robust error handling using `DashboardResponseError` for invalid responses.
- **Query Configuration**: Configures queries with `staleTime` and `refetchInterval` from `QUERY_CONFIG` to manage data freshness and caching.
- **Separation of Concerns**: Keeps the logic for fetching different types of data (stats vs. languages) separate, enhancing maintainability.
```

This documentation provides a high-level overview of the file's purpose, key exports, integration within the project, and notable design decisions.

---

*Generated by CodeWorm on 2026-02-21 08:29*
