# mod

**Type:** File Overview
**Repository:** kill-pr0cess.inc
**File:** backend/src/routes/mod.rs
**Language:** rust
**Lines:** 1-363
**Complexity:** 0.0

---

## Source Code

```rust
/*
 * Routes module aggregator organizing all HTTP endpoints with consistent structure and middleware integration.
 * I'm implementing clean route organization that enables easy expansion while maintaining performance and security standards.
 */

pub mod github;
pub mod fractals;
pub mod performance;
pub mod health;
pub mod docs;

// Re-export all route handlers for convenient access from main.rs
pub use github::*;
pub use fractals::*;
pub use performance::*;
pub use health::*;
pub use docs::*;

use crate::utils::config::Config;

use axum::{
    Router,
    response::IntoResponse,
    routing::{get, post, Route},
    http::{Method, HeaderValue, HeaderName, header},
};
use tower_http::{
    cors::{CorsLayer, Any},
    compression::CompressionLayer,
    trace::TraceLayer,
    timeout::TimeoutLayer,
    limit::RequestBodyLimitLayer,
};
use std::time::Duration;
use tracing::info;

use crate::{
    AppState,
    utils::error::AppError,
};

/// Create the complete application router with all endpoints and middleware
/// I'm implementing a comprehensive routing structure with performance optimization and security
pub fn create_router() -> Router<AppState> {
    info!("Defining core application routes");

    Router::new()
        .route("/health", get(health::health_check))
        .route("/health/ready", get(health::readiness_check))
        .route("/health/live", get(health::liveness_check))
        
        .route("/docs", get(docs::get_api_docs_html))
        .route("/docs.json", get(docs::get_api_docs_json))

        .route("/api/github/repos", get(github::get_repositories))
        .route("/api/github/repo/:owner/:name", get(github::get_repository_details))
        .route("/api/github/repo/:owner/:name/stats", get(github::get_repository_stats))
        .route("/api/github/language-distribution", get(github::get_language_distribution))

        .route("/api/fractals/mandelbrot", post(fractals::generate_mandelbrot))
        .route("/api/fractals/julia", post(fractals::generate_julia))
        .route("/api/fractals/benchmark", post(fractals::benchmark_generation))

        .route("/api/performance/metrics", get(performance::get_current_metrics))
        .route("/api/performance/system", get(performance::get_system_info))
        .route("/api/performance/benchmark", post(performance::run_benchmark))
        .route("/api/performance/history", get(performance::get_metrics_history))
}


pub fn create_middleware_stack(config: &Config) -> impl tower::Layer<Route> + Clone {
    use tower::ServiceBuilder;

    ServiceBuilder::new()
        .layer(create_cors_layer(config))
        .layer(CompressionLayer::new())
        .layer(TimeoutLayer::new(Duration::from_secs(30)))
        .layer(RequestBodyLimitLayer::new(10 * 1024 * 1024))
        .layer(TraceLayer::new_for_http())
}

/// I'm implementing flexible CORS that supports development while maintaining security in production
fn create_cors_layer(config: &Config) -> CorsLayer {

    let mut cors = CorsLayer::
```

---

## File Overview

# Routes Module Documentation

## Purpose and Responsibility
This module serves as a central hub for organizing all HTTP endpoints within the application, ensuring a clean and maintainable structure. It integrates various route handlers with consistent middleware to enhance performance, security, and ease of expansion.

## Key Exports and Public Interface
- **create_router**: Constructs the complete router with all defined routes and middleware layers.
- **create_middleware_stack**: Configures a stack of middleware for the application, including CORS, compression, timeouts, request body limits, and tracing.
- **rate_limiting_middleware**: A custom rate limiting middleware function that can be expanded based on specific requirements.

## How It Fits in the Project
This module is a critical component of the backend architecture. It aggregates all HTTP endpoints from various sub-modules (e.g., `github`, `fractals`, `performance`) and integrates them with consistent middleware, ensuring a unified approach to handling requests across different services. The router definitions are modular, allowing for easy addition or modification of routes as needed.

## Notable Design Decisions
- **Modular Route Definitions**: Each route is defined in separate sub-modules, promoting clear separation of concerns.
- **Flexible CORS Configuration**: Supports development environments with relaxed CORS policies while maintaining strict security measures in production.
- **Custom Rate Limiting Middleware**: Provides a flexible foundation for rate limiting that can be expanded based on specific requirements and endpoint types.
- **Performance Optimization**: Includes middleware layers such as compression, timeouts, and request body limits to optimize performance and handle large payloads efficiently.
```

This documentation provides an overview of the file's purpose, key exports, integration within the project, and notable design decisions.

---

*Generated by CodeWorm on 2026-02-19 21:35*
