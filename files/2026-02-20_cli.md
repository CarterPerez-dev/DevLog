# cli

**Type:** File Overview
**Repository:** pyproject-setup
**File:** src/pyproject_setup/cli.py
**Language:** python
**Lines:** 1-270
**Complexity:** 0.0

---

## Source Code

```python
"""
AngelaMos | 2025
cli.py
"""

from pathlib import Path

import typer
from rich.console import Console
from rich.panel import Panel
from rich.prompt import Confirm, Prompt

from . import __version__
from .generator import (
    ProjectConfig,
    write_publish_workflow,
    write_pyproject,
    write_style_yapf,
)
from .presets import PRESETS


app = typer.Typer(
    name = "pyproject-setup",
    help =
    "Scaffold pyproject.toml with pre-configured linting and tooling.",
    rich_markup_mode = "rich",
    no_args_is_help = True,
)
console = Console()


def version_callback(value: bool) -> None:
    """
    Display version and exit.
    """
    if value:
        console.print(
            f"[bold cyan]pyproject-setup[/bold cyan] v{__version__}"
        )
        raise typer.Exit()


@app.callback()
def main(
    version: bool | None = typer.Option(
        None,
        "--version",
        "-v",
        callback = version_callback,
        is_eager = True,
        help = "Show version and exit.",
    ),
) -> None:
    """
    pyproject-setup - Scaffold pyproject.toml files.
    """
    pass


@app.command()
def init(
    name: str | None = typer.Option(
        None,
        "--name",
        "-n",
        help = "Project name"
    ),
    description: str | None = typer.Option(
        None,
        "--description",
        "-d",
        help = "Project description"
    ),
    preset: str | None = typer.Option(
        None,
        "--preset",
        "-p",
        help = "Project preset (fastapi-backend, library, cli-tool)",
    ),
    python: str = typer.Option(
        ">=3.12",
        "--python",
        help = "Python version requirement"
    ),
    package_path: str = typer.Option(
        "src",
        "--package-path",
        help = "Package source path"
    ),
    repository: str | None = typer.Option(
        None,
        "--repository",
        "-r",
        help = "Repository URL"
    ),
    homepage: str | None = typer.Option(
        None,
        "--homepage",
        help = "Homepage URL"
    ),
    workflow: bool = typer.Option(
        True,
        "--workflow/--no-workflow",
        help = "Add PyPI workflow"
    ),
    output: Path = typer.Option(
        Path(),
        "--output",
        "-o",
        help = "Output directory"
    ),
    force: bool = typer.Option(
        False,
        "--force",
        "-f",
        help = "Overwrite existing files"
    ),
    yapf: bool = typer.Option(
        False,
        "--yapf/--no-yapf",
        help = "Add .style.yapf config file"
    ),
) -> None:
    """
    [bold green]Initialize[/bold green] a new pyproject.toml with pre-configured tooling.

    Run interactively or pass flags for automation.
    """
    console.print()
    console.print(
        Panel(
            "[bold cyan]pyproject-setup[/bold cyan] - Project Scaffolder",
            border_style = "cyan",
        )
    )
    console.print()

    pyproject_path = output / "pyproject.toml"
    if (
        py
```

---

## File Overview

### cli.py

**Purpose and Responsibility:**
This Python source file is responsible for providing a command-line interface (CLI) to scaffold `pyproject.toml` files with pre-configured tooling, such as linters and other development tools. It leverages Typer for CLI creation and Rich for enhanced console output.

**Key Exports and Public Interface:**
- **Typer Application (`app`):** The main entry point of the CLI application.
- **Commands:**
  - `init`: A command to initialize a new project with specified configurations.
- **Options:** Various options are provided to customize the initialization process, such as project name, description, preset, Python version, and output directory.

**How It Fits in the Project:**
`cli.py` serves as the primary interface for users to interact with the `pyproject-setup` tool. It is tightly integrated with other modules like `generator`, which handles file generation based on user inputs. The CLI reads options from the command line or prompts the user interactively, then uses these inputs to create a structured `ProjectConfig` object and generate necessary files.

**Notable Design Decisions:**
- **Typer for CLI:** Utilizes Typer for its simplicity and ease of use in creating CLIs.
- **Rich for Console Output:** Employs Rich for styled console output, enhancing user experience with rich text rendering.
- **Interactive Prompts:** Provides interactive prompts to guide users through the configuration process, ensuring flexibility and usability.
- **Version Callback:** Implements a version callback function to display the application's version when requested.

---

*Generated by CodeWorm on 2026-02-20 21:11*
