# repository

**Type:** File Overview
**Repository:** my-portfolio
**File:** v1/backend/app/certification/repository.py
**Language:** python
**Lines:** 1-95
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2025
repository.py
"""

from collections.abc import Sequence

from sqlalchemy import select, func
from sqlalchemy.ext.asyncio import AsyncSession

import config
from core.base_repository import BaseRepository
from .Certification import Certification


class CertificationRepository(BaseRepository[Certification]):
    """
    Repository for Certification model database operations.
    """
    model = Certification

    @classmethod
    async def get_visible_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
        skip: int = config.PAGINATION_DEFAULT_SKIP,
        limit: int = config.PAGINATION_DEFAULT_LIMIT,
    ) -> Sequence[Certification]:
        """
        Get all visible certifications for a language.
        Ordered by display_order for consistent listing.
        """
        result = await session.execute(
            select(Certification).where(
                Certification.language == language
            ).where(Certification.is_visible == True).order_by(
                Certification.display_order
            ).offset(skip).limit(limit)
        )
        return result.scalars().all()

    @classmethod
    async def get_active_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
    ) -> Sequence[Certification]:
        """
        Get non-expired certifications for a language.
        """
        result = await session.execute(
            select(Certification).where(
                Certification.language == language
            ).where(Certification.is_visible == True).where(
                Certification.is_expired == False
            ).order_by(Certification.display_order)
        )
        return result.scalars().all()

    @classmethod
    async def get_by_category_and_language(
        cls,
        session: AsyncSession,
        category: config.CertificationCategory,
        language: config.Language,
    ) -> Sequence[Certification]:
        """
        Get certifications by category and language.
        """
        result = await session.execute(
            select(Certification).where(
                Certification.language == language
            ).where(Certification.category == category).where(
                Certification.is_visible == True
            ).order_by(Certification.display_order)
        )
        return result.scalars().all()

    @classmethod
    async def count_visible_by_language(
        cls,
        session: AsyncSession,
        language: config.Language,
    ) -> int:
        """
        Count visible certifications for pagination.
        """
        result = await session.execute(
            select(func.count()).select_from(Certification).where(
                Certification.language == language
            ).where(Certification.is_visible == True)
        )
        return result.scalar_one()

```

---

## File Overview

### Purpose and Responsibility

This file, `repository.py`, is part of the Certification module within the my-portfolio application. It provides an asynchronous repository for managing operations related to the `Certification` model, including fetching visible certifications by language, category, or language alone, as well as counting such certifications.

### Key Exports and Public Interface

The primary public interface includes:
- `get_visible_by_language`: Fetches visible certifications for a given language.
- `get_active_by_language`: Retrieves non-expired certifications for a given language.
- `get_by_category_and_language`: Finds certifications by category and language.
- `count_visible_by_language`: Counts visible certifications for pagination.

### How It Fits in the Project

This repository is a critical component of the data access layer, ensuring that operations on the `Certification` model are consistent and efficient. It leverages SQLAlchemy for database interactions and follows a base repository pattern to maintain uniformity across different models.

### Notable Design Decisions

- **Asynchronous Operations**: All methods are designed to be asynchronous, utilizing `AsyncSession` from SQLAlchemy.
- **Pagination Support**: Methods like `get_visible_by_language` support pagination through `skip` and `limit` parameters.
- **SQLAlchemy ORM**: Utilizes SQLAlchemy's ORM for querying the database, ensuring type safety and ease of use.
- **Type Hints and Annotations**: Comprehensive use of type hints and annotations to ensure clarity and maintainability.
```

This documentation provides a high-level overview of the file's purpose, its public interface, integration within the project, and key design decisions.

---

*Generated by CodeWorm on 2026-02-20 09:17*
