# 20260103_054418_portfolio

**Type:** File Overview
**Repository:** my-portfolio
**File:** v1/backend/alembic/versions/20260103_054418_portfolio.py
**Language:** python
**Lines:** 1-178
**Complexity:** 0.0

---

## Source Code

```python
"""portfolio

Revision ID: 95f305258173
Revises: dd8dcd51358d
Create Date: 2026-01-03 05:44:18.062778
"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

revision: str = '95f305258173'
down_revision: Union[str, None] = 'dd8dcd51358d'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    language_enum = postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False)
    language_enum.create(op.get_bind(), checkfirst=True)

    op.create_table('blogs',
    sa.Column('language', postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.String(length=1000), nullable=False),
    sa.Column('external_url', sa.String(length=2048), nullable=False),
    sa.Column('category', postgresql.ENUM('unknown', 'tutorial', 'deep_dive', 'career', 'project', 'opinion', name='blogcategory', create_type=True), nullable=True),
    sa.Column('tags', postgresql.ARRAY(sa.String(length=50)), nullable=True),
    sa.Column('thumbnail_url', sa.String(length=2048), nullable=True),
    sa.Column('published_date', sa.Date(), nullable=True),
    sa.Column('read_time_minutes', sa.Integer(), nullable=True),
    sa.Column('views_count', sa.Integer(), nullable=True),
    sa.Column('display_order', sa.Integer(), nullable=False),
    sa.Column('is_visible', sa.Boolean(), nullable=False),
    sa.Column('is_featured', sa.Boolean(), nullable=False),
    sa.Column('id', sa.Uuid(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id', name=op.f('pk_blogs'))
    )
    op.create_table('certifications',
    sa.Column('language', postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('issuer', sa.String(length=200), nullable=False),
    sa.Column('issuer_url', sa.String(length=2048), nullable=True),
    sa.Column('issuer_logo_url', sa.String(length=2048), nullable=True),
    sa.Column('credential_id', sa.String(length=100), nullable=True),
    sa.Column('verification_url', sa.String(length=2048), nullable=True),
    sa.Column('date_obtained', sa.Date(), nullable=False),
    sa.Column('expiry_date', sa.Date(), nullable=True),
    sa.Column('is_expired', sa.Boolean(), nullable=False),
    sa.Column('badge_image_url', sa.String(length=2048), nullable=True),
    sa.Column('category', postgresql.ENUM('unknown', 'security', 'cloud', 'programming', 'networking', 'database'
```

---

## File Overview

### File Purpose and Responsibility

This Python source file is part of a database migration script for the `portfolio` application using Alembic, an SQL schema migrations tool. The primary responsibility of this file is to define and execute database schema changes required for upgrading the database from one version to another.

### Key Exports or Public Interface

- **upgrade()**: This function executes the necessary SQL commands to alter the database schema by adding new tables (`blogs`, `certifications`, `experiences`) with specific columns and constraints. It leverages Alembic's context manager for executing these operations safely.
  
### How it Fits in the Project

This file is crucial for maintaining the integrity of the database schema as part of version control. It ensures that any new features or changes are properly reflected in the database, allowing for smooth upgrades without data loss or corruption.

### Notable Design Decisions

- **Use of Alembic**: The script uses Alembic to manage database migrations, ensuring that schema changes are reversible and can be tracked.
- **Enum Types**: Enum types (`language`, `blogcategory`, `certificationcategory`, `employmenttype`) are defined using PostgreSQL's ENUM type to enforce data integrity and consistency in the database.
- **Table Creation**: The script creates multiple tables (`blogs`, `certifications`, `experiences`) with a variety of columns, including text fields, date fields, and arrays, reflecting the diverse data structures required for managing portfolio items.

This file is essential for maintaining the project's database schema as it evolves over time.

---

*Generated by CodeWorm on 2026-02-20 08:30*
