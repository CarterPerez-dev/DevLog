# logging_handler

**Type:** File Overview
**Repository:** Telehook
**File:** src/telehook/adapters/logging_handler.py
**Language:** python
**Lines:** 1-38
**Complexity:** 0.0

---

## Source Code

```python
"""
Â©AngelaMos | 2026
logging_handler.py
"""

import asyncio
import logging

from telehook.formatters.error import error_formatter
from telehook.notifier import Notifier


class TelehookLoggingHandler(logging.Handler):
    def __init__(self, notifier: Notifier, level: int = logging.ERROR):
        super().__init__(level)
        self._notifier = notifier

    def emit(self, record: logging.LogRecord) -> None:
        try:
            if record.exc_info and record.exc_info[1]:
                text = error_formatter(
                    exception = record.exc_info[1],
                    component = record.name,
                )
            else:
                text = (
                    f"\u26a0\ufe0f <b>{record.levelname}: {record.name}</b>"
                    f"\n\n<code>{record.getMessage()}</code>"
                )

            try:
                loop = asyncio.get_running_loop()
                loop.create_task(self._notifier.send(text))
            except RuntimeError:
                self._notifier.send_sync(text)
        except Exception:
            self.handleError(record)

```

---

## File Overview

# logging_handler.py

**Purpose:** This file implements a custom logging handler for Telehook, which integrates with Telegram notifications to handle log records.

**Key Exports:**
- `TelehookLoggingHandler`: A subclass of Python's `logging.Handler` that sends log messages via Telegram using the `Notifier` service.

**Project Fit:**
This handler is part of the logging infrastructure in the Telehook project. It ensures that critical or error-level logs are promptly notified via Telegram, enhancing real-time monitoring and alerting capabilities.

**Design Decisions:**
- **Asynchronous Handling:** The `emit` method uses asyncio to send notifications asynchronously, preventing blocking of the main application flow.
- **Error Handling:** Robust error handling is implemented to manage cases where the event loop might not be running or when sending a notification fails.
- **Custom Formatters:** Utilizes custom formatters (`error_formatter`) for structured and styled log messages, improving readability in Telegram notifications.

**Dependencies:**
- `telehook.formatters.error`: For formatting error logs.
- `telehook.notifier.Notifier`: For sending notifications via Telegram.
```

This documentation provides a high-level overview of the file's purpose, key components, integration within the project, and notable design choices.

---

*Generated by CodeWorm on 2026-03-01 09:31*
