# baseline

**Type:** File Overview
**Repository:** Yoshi-Audit
**File:** internal/audit/baseline.go
**Language:** go
**Lines:** 1-67
**Complexity:** 0.0

---

## Source Code

```go
// Â©AngelaMos | 2026
// baseline.go

package audit

import (
	"encoding/json"
	"os"
	"path/filepath"

	"github.com/CarterPerez-dev/yoshi-audit/internal/system"
)

type Baseline struct {
	Processes map[string]bool `json:"processes"`
}

func NewBaseline() *Baseline {
	return &Baseline{
		Processes: make(map[string]bool),
	}
}

func (b *Baseline) Load(path string) error {
	data, err := os.ReadFile(path)
	if err != nil {
		if os.IsNotExist(err) {
			return nil
		}
		return err
	}

	return json.Unmarshal(data, b)
}

func (b *Baseline) Save(path string) error {
	dir := filepath.Dir(path)
	if err := os.MkdirAll(dir, 0755); err != nil {
		return err
	}

	data, err := json.MarshalIndent(b, "", "  ")
	if err != nil {
		return err
	}

	return os.WriteFile(path, data, 0644)
}

func (b *Baseline) IsKnown(name string) bool {
	return b.Processes[name]
}

func (b *Baseline) Add(name string) {
	b.Processes[name] = true
}

func (b *Baseline) Remove(name string) {
	delete(b.Processes, name)
}

func (b *Baseline) BuildFromCurrent(procs []system.ProcessInfo) {
	for _, p := range procs {
		b.Processes[p.Name] = true
	}
}

```

---

## File Overview

# baseline.go

## Purpose and Responsibility
This Go source file defines the `Baseline` struct, responsible for managing a list of known processes. It handles loading from and saving to a JSON file, as well as querying and modifying this list.

## Key Exports and Public Interface
- **NewBaseline**: Creates a new instance of `Baseline`.
- **Load**: Loads baseline data from a specified path.
- **Save**: Saves the current state of `Baseline` to a specified path.
- **IsKnown**: Checks if a process is known.
- **Add**: Marks a process as known.
- **Remove**: Removes a process from the known list.
- **BuildFromCurrent**: Updates the baseline based on the current system processes.

## Fit in the Project
This file plays a crucial role in maintaining a record of known processes, which can be used for auditing purposes. It integrates with `system.ProcessInfo` to dynamically update and manage the baseline data, ensuring consistency between the recorded state and the actual running processes.

## Notable Design Decisions
- **Error Handling**: Uses Go's idiomatic error handling, returning specific errors like `os.IsNotExist`.
- **JSON Serialization**: Utilizes JSON for persisting and deserializing process information.
- **File Operations**: Ensures directories are created with appropriate permissions before writing files.
- **Go Interfaces**: Leverages interfaces from the `system` package to work with process information.
```

This documentation provides a high-level overview of the file's purpose, its public interface, integration within the project, and key design decisions.

---

*Generated by CodeWorm on 2026-03-01 11:51*
