# error

**Type:** File Overview
**Repository:** Telehook
**File:** src/telehook/formatters/error.py
**Language:** python
**Lines:** 1-51
**Complexity:** 0.0

---

## Source Code

```python
"""
©AngelaMos | 2026
error.py
"""

import traceback as tb_module
from datetime import UTC, datetime

from telehook.formatters.base import truncate


def error_formatter(
    exception: BaseException,
    component: str,
    app: str | None = None,
) -> str:
    error_type = type(exception).__name__
    error_msg = str(exception)

    frames = tb_module.extract_tb(exception.__traceback__)
    condensed_lines = []
    for frame in frames:
        filename = frame.filename.rsplit("/", maxsplit = 1)[-1]
        condensed_lines.append(
            f"  {filename}:{frame.lineno} \u2192 {frame.name}()"
        )

    condensed_tb = "\n".join(
        condensed_lines
    ) if condensed_lines else "  (no traceback)"

    header = f"\U0001f534 <b>Error: {component}</b>"
    if app:
        header = f"\U0001f534 <b>{app} \u2014 Error: {component}</b>"

    timestamp = datetime.now(UTC).strftime("%Y-%m-%d %H:%M:%S UTC")

    parts = [
        header,
        "",
        f"<code>{error_type}: {error_msg}</code>",
        "",
        "<b>Traceback (condensed):</b>",
        f"<pre>{condensed_tb}</pre>",
        "",
        f"<b>Component:</b> {component}",
        f"<b>Time:</b> {timestamp}",
    ]

    return truncate("\n".join(parts))

```

---

## File Overview

# error.py Documentation

## Purpose and Responsibility
This file is responsible for formatting error messages with detailed traceback information, suitable for logging or displaying to users. It integrates with other components of the `telehook` application by providing a standardized way to handle and present errors.

## Key Exports and Public Interface
- **error_formatter(exception: BaseException, component: str, app: str | None = None) -> str**: The main function that formats an error message along with its traceback. It returns a formatted string suitable for logging or displaying.

## How it Fits into the Project
This file is part of the `telehook.formatters` module, which handles various types of messages and notifications. Specifically, `error_formatter` is used to generate structured error reports that can be sent via Telegram or logged locally. It fits well within the project’s architecture by providing a consistent format for error handling across different components.

## Notable Design Decisions
- **Use of `traceback.extract_tb()`**: This function extracts and formats the traceback, ensuring that only relevant information is included.
- **Custom Truncation with `truncate`**: The formatted string is passed through `truncate`, which limits the length to prevent overflow in logs or notifications.
- **Unicode Emojis for Visual Cues**: Emoji usage enhances readability and provides visual cues about the nature of the error.
- **Dynamic Header Construction**: The header includes dynamic information like the application name, component, and timestamp, making it easier to identify the source and context of errors.

---

*Generated by CodeWorm on 2026-03-01 10:09*
