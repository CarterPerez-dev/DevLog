# auth.store

**Type:** File Overview
**Repository:** Cybersecurity-Projects
**File:** TEMPLATES/fullstack-template/frontend/src/core/lib/auth.store.ts
**Language:** typescript
**Lines:** 1-106
**Complexity:** 0.0

---

## Source Code

```typescript
// ===================
// Â© AngelaMos | 2025
// auth.store.ts
// ===================

import { create } from 'zustand'
import { devtools, persist } from 'zustand/middleware'
import { type UserResponse, UserRole } from '@/api/types'
import { STORAGE_KEYS } from '@/config'

interface AuthState {
  user: UserResponse | null
  accessToken: string | null
  isAuthenticated: boolean
  isLoading: boolean
}

interface AuthActions {
  login: (user: UserResponse, accessToken: string) => void
  logout: () => void
  setLoading: (loading: boolean) => void
  setAccessToken: (token: string | null) => void
  updateUser: (updates: Partial<UserResponse>) => void
}

type AuthStore = AuthState & AuthActions

export const useAuthStore = create<AuthStore>()(
  devtools(
    persist(
      (set) => ({
        user: null,
        accessToken: null,
        isAuthenticated: false,
        isLoading: false,

        login: (user, accessToken) =>
          set(
            {
              user,
              accessToken,
              isAuthenticated: true,
              isLoading: false,
            },
            false,
            'auth/login'
          ),

        logout: () =>
          set(
            {
              user: null,
              accessToken: null,
              isAuthenticated: false,
              isLoading: false,
            },
            false,
            'auth/logout'
          ),

        setLoading: (loading) =>
          set({ isLoading: loading }, false, 'auth/setLoading'),

        setAccessToken: (token) =>
          set({ accessToken: token }, false, 'auth/setAccessToken'),

        updateUser: (updates) =>
          set(
            (state) => ({
              user: state.user !== null ? { ...state.user, ...updates } : null,
            }),
            false,
            'auth/updateUser'
          ),
      }),
      {
        name: STORAGE_KEYS.AUTH,
        partialize: (state) => ({
          user: state.user,
          isAuthenticated: state.isAuthenticated,
        }),
      }
    ),
    { name: 'AuthStore' }
  )
)

export const useUser = (): UserResponse | null => useAuthStore((s) => s.user)
export const useIsAuthenticated = (): boolean =>
  useAuthStore((s) => s.isAuthenticated)
export const useIsAuthLoading = (): boolean => useAuthStore((s) => s.isLoading)
export const useAccessToken = (): string | null =>
  useAuthStore((s) => s.accessToken)

export const useHasRole = (role: UserRole): boolean => {
  const user = useAuthStore((s) => s.user)
  return user !== null && user.role === role
}

export const useIsAdmin = (): boolean => {
  const user = useAuthStore((s) => s.user)
  return user !== null && user.role === UserRole.ADMIN
}

export { UserRole }

```

---

## File Overview

# auth.store.ts Documentation

## Purpose and Responsibility
This TypeScript file implements an authentication store using Zustand, a state management library for React applications. The store manages user authentication states such as login status, access token, and user information.

## Key Exports and Public Interface
- **useAuthStore**: The main Zustand store that encapsulates the state and actions related to authentication.
- **useUser**: A hook to retrieve the current authenticated user.
- **useIsAuthenticated**: A hook to check if a user is currently logged in.
- **useIsAuthLoading**: A hook to determine if an authentication operation is in progress.
- **useAccessToken**: A hook to access the current access token.
- **useHasRole**: A custom hook that checks if the authenticated user has a specific role.
- **useIsAdmin**: A custom hook that specifically checks for admin roles.

## How It Fits into the Project
This file serves as a central hub for authentication state management in the application. It is imported and used throughout the frontend to manage and access authentication-related data, ensuring consistency across components.

## Notable Design Decisions
- **State Management with Zustand**: Utilizes Zustand for its simplicity and ease of use in managing complex state.
- **Persisted State**: Uses `persist` middleware from Zustand to store authentication state locally, ensuring that the user's session persists even after a page refresh.
- **DevTools Integration**: Integrates `devtools` for easier debugging and monitoring of state changes during development.
- **Partial State Management**: Implements partial state management using `partialize` in `persist`, focusing on critical parts of the state to save storage space.

---

*Generated by CodeWorm on 2026-02-18 18:09*
