# models

**Type:** File Overview
**Repository:** CodeWorm
**File:** codeworm/models.py
**Language:** python
**Lines:** 1-156
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2026
models.py
"""
from enum import Enum
from pathlib import Path
from typing import Annotated
from datetime import datetime

from pydantic import BaseModel, Field, field_validator


class Language(str, Enum):
    """
    Supported programming languages for code analysis
    """
    PYTHON = "python"
    TYPESCRIPT = "typescript"
    TSX = "tsx"
    JAVASCRIPT = "javascript"
    GO = "go"
    RUST = "rust"


class DocType(str, Enum):
    """
    Types of documentation the daemon can generate
    """
    FUNCTION_DOC = "function_doc"
    CLASS_DOC = "class_doc"
    FILE_DOC = "file_doc"
    MODULE_DOC = "module_doc"
    SECURITY_REVIEW = "security_review"
    PERFORMANCE_ANALYSIS = "performance_analysis"
    TIL = "til"
    CODE_EVOLUTION = "code_evolution"
    PATTERN_ANALYSIS = "pattern_analysis"
    WEEKLY_SUMMARY = "weekly_summary"
    MONTHLY_SUMMARY = "monthly_summary"


LANGUAGE_EXTENSIONS: dict[str,
                          Language] = {
                              ".py": Language.PYTHON,
                              ".ts": Language.TYPESCRIPT,
                              ".tsx": Language.TSX,
                              ".js": Language.JAVASCRIPT,
                              ".jsx": Language.JAVASCRIPT,
                              ".go": Language.GO,
                              ".rs": Language.RUST,
                          }


class RepoConfig(BaseModel):
    """
    Configuration for a source repository to scan
    """
    name: str
    path: Path
    weight: Annotated[int, Field(ge = 1, le = 10)] = 5
    enabled: bool = True

    @field_validator("path")
    @classmethod
    def validate_path_exists(cls, v: Path) -> Path:
        if not v.exists():
            raise ValueError(f"Repository path does not exist: {v}")
        if not v.is_dir():
            raise ValueError(f"Repository path is not a directory: {v}")
        return v


class CodeSnippet(BaseModel):
    """
    A code snippet extracted from a source file for analysis
    """
    repo: str
    file_path: Path
    function_name: str | None = None
    class_name: str | None = None
    language: Language
    source: str
    start_line: int
    end_line: int
    complexity: float = 0.0
    nesting_depth: int = 0
    parameter_count: int = 0
    interest_score: float = 0.0
    doc_type: DocType = DocType.FUNCTION_DOC

    @property
    def display_name(self) -> str:
        if self.class_name and self.function_name:
            return f"{self.class_name}.{self.function_name}"
        return self.function_name or self.class_name or self.file_path.stem

    @property
    def line_count(self) -> int:
        return self.end_line - self.start_line + 1


class DocumentedSnippet(BaseModel):
    """
    Record of a snippet that has been documented and committed
    Stored in SQLite for deduplication
    """
    id: str
    source_repo: str
    source_file: str
    function_name: str | None = None
    class_name: str | None = None
    code_hash: str
    d
```

---

## File Overview

### Purpose and Responsibility

This file, `models.py`, defines core data models used throughout the CodeWorm project for representing various entities such as repository configurations, code snippets, documentation results, and scheduled commits. It provides a structured way to handle different types of analysis and documentation tasks.

### Key Exports and Public Interface

- **RepoConfig**: Represents configuration details for scanning source repositories.
- **CodeSnippet**: Models a code snippet extracted from a file for analysis, including metadata like language, complexity, and nesting depth.
- **DocumentedSnippet**: Records documented snippets stored in SQLite for deduplication purposes.
- **AnalysisResult**: Stores the result of analyzing and documenting a code snippet, including the generated documentation and commit message.
- **CommitType**: Enumerates types of commits that can be scheduled or executed by the daemon.
- **ScheduledCommit**: Models a scheduled commit with details about its type, execution status, and associated analysis results.

### How It Fits in the Project

This file is crucial for defining the data structures used across various components of the CodeWorm project. `RepoConfig` helps manage repository settings, while `CodeSnippet` and `DocumentedSnippet` facilitate code analysis and documentation storage. `AnalysisResult` and `ScheduledCommit` support automated commit generation based on analysis results.

### Notable Design Decisions

- **Pydantic Models**: Utilizes Pydantic for data validation and type hints to ensure robust and consistent data handling.
- **Enum Classes**: Defines enums like `Language`, `DocType`, and `CommitType` to maintain a clear, controlled set of values across the project.
- **Validation Logic**: Implements field validators in `RepoConfig` to enforce path existence and valid weight ranges.
- **Complex Properties**: Uses properties like `display_name` for generating human-readable names from complex data structures, enhancing usability.

---

*Generated by CodeWorm on 2026-02-21 08:28*
