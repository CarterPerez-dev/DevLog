# config

**Type:** File Overview
**Repository:** vuemantics
**File:** backend/config.py
**Language:** python
**Lines:** 1-436
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2026
config.py
"""

import warnings
from pathlib import Path
from typing import Final
from functools import lru_cache

from pydantic import Field, ValidationInfo, field_validator
from pydantic_settings import BaseSettings, SettingsConfigDict


_PROJECT_ROOT = Path(__file__).resolve().parent.parent
_ENV_FILE = _PROJECT_ROOT / ".env"

APP_VERSION: Final[str] = "1.0.1"

API_CONTACT: Final[dict[str,
                        str]
                   ] = {
                       "name": "AngelaMos",
                       "url":
                       "https://github.com/CarterPerez-dev/vuemantics",
                   }
API_LICENSE: Final[dict[str,
                        str]
                   ] = {
                       "name": "GNU Affero General Public License v3.0",
                       "url": "https://www.gnu.org/licenses/agpl-3.0.html",
                   }
API_DESCRIPTION: Final[str] = (
    "Semantic search API for images using local AI. "
    "Upload images, search by natural language, discover similar content. "
    "Built with FastAPI, PostgreSQL, pgvector, and Ollama."
)

OPENAPI_VERSION: Final[str] = "3.1.0"
API_ROOT_PATH: Final[str] = "/api"
API_DOCS_URL: Final[str] = "/docs"
API_REDOC_URL: Final[str] = "/redoc"
API_OPENAPI_URL: Final[str] = "/openapi.json"


# Important
# ======================================================
SEARCH_DEFAULT_SIMILARITY_THRESHOLD: Final[float] = 0.48  # Default for search queries
SIMILAR_UPLOADS_SIMILARITY_THRESHOLD: Final[float] = 0.48  # Threshold for "find similar"
# ======================================================


EMBEDDING_DIMENSIONS: Final[int] = 1024  # bge-m3 dimensions
IVFFLAT_INDEX_LISTS: Final[int] = 100  # IVFFlat clusters for pgvector

# AI Model config
OLLAMA_VISION_TEMPERATURE: Final[float] = 0.3
OLLAMA_VISION_NUM_PREDICT_IMAGE: Final[int] = 512  # Max tokens for image analysis
OLLAMA_VISION_NUM_PREDICT_VIDEO: Final[int] = 2048  # Max tokens for video analysis (videos need detailed descriptions)
OLLAMA_VISION_NUM_CTX: Final[int] = 8192  # Context window (qwen2.5vl supports up to 128K)

# Text processing limits
MAX_EMBEDDING_TEXT_LENGTH: Final[int] = 32000  # Max chars for embedding generation

# Concurrency limits
VISION_SEMAPHORE_LIMIT: Final[int] = 1  # Max concurrent vision operations
EMBEDDING_SEMAPHORE_LIMIT: Final[int] = 3  # Max concurrent embedding operations
BATCH_ANALYZE_MAX_CONCURRENT: Final[int] = 3  # Max parallel uploads in batch analysis
BATCH_EMBEDDING_MAX_CONCURRENT: Final[int] = 3  # Max parallel embedding generations

# Search configuration
SEARCH_RESULT_MULTIPLIER: Final[int] = 2  # Multiply limit for pre-filtering
BATCH_SEARCH_MAX_CONCURRENT: Final[int] = 3  # Max parallel searches in batch
BATCH_SEARCH_DEFAULT_LIMIT: Final[int] = 10  # Default results per query in batch
SIMILAR_UPLOADS_DEFAULT_LIMIT: Final[int] = 6  # Default similar uploads to return
SEARCH_SUGGESTIONS_DEFAULT_LIMIT: Final[int] = 5  # Default search suggestions to return

# 
```

---

## File Overview

### config.py

**Purpose and Responsibility:**
This Python file serves as a central configuration hub for the `vuemantics` backend application, defining constants, settings, and thresholds used across various components of the system.

**Key Exports or Public Interface:**
- Constants (e.g., API version, similarity thresholds, embedding dimensions, model configurations).
- Environment variable handling via `.env` file.
- Configuration settings for database interactions, concurrency limits, and processing parameters.

**How it Fits in the Project:**
The `config.py` file is crucial as it provides a single source of truth for configuration values. These constants are imported by multiple modules throughout the application, ensuring consistency and ease of maintenance. It also facilitates environment-specific configurations through `.env` files, making deployment more flexible.

**Notable Design Decisions:**
- **Environment Variables:** Utilizes `pydantic_settings` to load environment variables from a `.env` file, promoting separation of concerns.
- **Constants with Final Annotations:** Defines constants using the `Final` type hint for immutability and clarity, ensuring that these values are not accidentally modified elsewhere in the codebase.
- **Validation Information:** Uses Pydantic's validation features to ensure that environment variables are correctly formatted and validated before use.
```

This documentation covers the key aspects of the file, its role within the project, and highlights some design choices.

---

*Generated by CodeWorm on 2026-02-20 12:12*
