# useDailyLog

**Type:** File Overview
**Repository:** ios-test
**File:** red-recon/src/api/hooks/useDailyLog.ts
**Language:** typescript
**Lines:** 1-214
**Complexity:** 0.0

---

## Source Code

```typescript
/**
 * @AngelaMos | 2026
 * useDailyLog.ts
 */

import {
  DAILY_LOG_ERROR_MESSAGES,
  DAILY_LOG_SUCCESS_MESSAGES,
  DailyLogResponseError,
  type DailyLogCreate,
  type DailyLogResponse,
  type DailyLogUpdate,
  isValidDailyLogListResponse,
  isValidDailyLogResponse,
} from '@/api/types'
import { QUERY_STRATEGIES, apiClient } from '@/core/api'
import { API_ENDPOINTS, QUERY_KEYS } from '@/core/config'
import {
  type UseMutationResult,
  type UseQueryResult,
  useMutation,
  useQuery,
  useQueryClient,
} from '@tanstack/react-query'

export const dailyLogQueries = {
  all: () => QUERY_KEYS.DAILY_LOGS.ALL,
  list: () => QUERY_KEYS.DAILY_LOGS.LIST(),
  byDate: (date: string) => QUERY_KEYS.DAILY_LOGS.BY_DATE(date),
} as const

const fetchDailyLogs = async (): Promise<DailyLogResponse[]> => {
  const response = await apiClient.get<unknown>(API_ENDPOINTS.DAILY_LOGS.BASE)
  const data: unknown = response.data

  if (!isValidDailyLogListResponse(data)) {
    throw new DailyLogResponseError(
      DAILY_LOG_ERROR_MESSAGES.INVALID_RESPONSE,
      API_ENDPOINTS.DAILY_LOGS.BASE
    )
  }

  return data
}

export const useDailyLogs = (): UseQueryResult<DailyLogResponse[], Error> => {
  return useQuery({
    queryKey: dailyLogQueries.list(),
    queryFn: fetchDailyLogs,
    ...QUERY_STRATEGIES.cycle,
  })
}

const fetchDailyLogByDate = async (date: string): Promise<DailyLogResponse | null> => {
  const response = await apiClient.get<unknown>(
    API_ENDPOINTS.DAILY_LOGS.BY_DATE(date)
  )
  const data: unknown = response.data

  if (data === null) {
    return null
  }

  if (!isValidDailyLogResponse(data)) {
    throw new DailyLogResponseError(
      DAILY_LOG_ERROR_MESSAGES.INVALID_RESPONSE,
      API_ENDPOINTS.DAILY_LOGS.BY_DATE(date)
    )
  }

  return data
}

export const useDailyLogByDate = (
  date: string
): UseQueryResult<DailyLogResponse | null, Error> => {
  return useQuery({
    queryKey: dailyLogQueries.byDate(date),
    queryFn: () => fetchDailyLogByDate(date),
    enabled: Boolean(date),
    ...QUERY_STRATEGIES.cycle,
  })
}

const createDailyLog = async (
  data: DailyLogCreate
): Promise<DailyLogResponse> => {
  const response = await apiClient.post<unknown>(
    API_ENDPOINTS.DAILY_LOGS.BASE,
    data
  )
  const responseData: unknown = response.data

  if (!isValidDailyLogResponse(responseData)) {
    throw new DailyLogResponseError(
      DAILY_LOG_ERROR_MESSAGES.FAILED_TO_CREATE,
      API_ENDPOINTS.DAILY_LOGS.BASE
    )
  }

  return responseData
}

export interface CreateDailyLogResult {
  data: DailyLogResponse
  message: string
}

export const useCreateDailyLog = (): UseMutationResult<
  CreateDailyLogResult,
  Error,
  DailyLogCreate
> => {
  const queryClient = useQueryClient()

  return useMutation({
    mutationFn: async (data: DailyLogCreate): Promise<CreateDailyLogResult> => {
      const dailyLog = await createDailyLog(data)
      return { data: dailyLog, message: DAILY_LOG_SUCCESS_MESSAGES.CREATED }
    },
    onSuccess: (res
```

---

## File Overview

### useDailyLog.ts

**Purpose and Responsibility:**
This TypeScript source file provides hooks for managing daily logs in a React application using the `@tanstack/react-query` library. It includes functions to fetch all daily logs, retrieve logs by date, create new logs, update existing ones, and delete them.

**Key Exports and Public API:**
- **useDailyLogs:** A hook to fetch a list of all daily logs.
- **useDailyLogByDate:** A hook to fetch a single log by its date.
- **useCreateDailyLog:** A mutation hook for creating new daily logs.
- **useUpdateDailyLog:** A mutation hook for updating existing daily logs.
- **useDeleteDailyLog:** A mutation hook for deleting daily logs.

**How it Fits into the Project:**
This file is part of a larger API hooks module, providing essential CRUD operations for managing daily logs. It integrates with other components and services defined in the `@/core` directory, ensuring consistent data handling across the application.

**Notable Design Decisions:**
- **Validation:** Each fetch operation includes validation to ensure response integrity.
- **Error Handling:** Custom error classes (`DailyLogResponseError`) are used for structured error management.
- **Query Caching:** The hooks use caching strategies defined in `QUERY_STRATEGIES` to optimize data retrieval and minimize API calls.
```

This documentation provides a high-level overview of the file's role, its key exports, integration within the project, and significant design choices.

---

*Generated by CodeWorm on 2026-02-20 15:11*
