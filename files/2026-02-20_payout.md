# payout

**Type:** File Overview
**Repository:** stripe-referral
**File:** src/stripe_referral/schemas/payout.py
**Language:** python
**Lines:** 1-152
**Complexity:** 0.0

---

## Source Code

```python
"""
ⒸAngelaMos | 2025 | CertGames.com
Pydantic schemas for payout operations
"""

from typing import Any

from pydantic import (
    BaseModel,
    Field,
    field_validator,
)
from ..config.constants import (
    CURRENCY_CODE_LENGTH,
    MAX_CONVERSION_WINDOW_DAYS,
    MAX_MAX_REWARDS_PER_USER,
    MAX_PROGRAM_KEY_LENGTH,
    MAX_PROGRAM_NAME_LENGTH,
    MAX_USER_ID_LENGTH,
    MIN_CONVERSION_WINDOW_DAYS,
    MIN_MAX_REWARDS_PER_USER,
    MIN_PAYOUT_AMOUNT,
    MIN_REWARD_AMOUNT,
)
from ..config.enums import (
    AdapterType,
    CurrencyCode,
    RewardType,
)


class ProcessPayoutRequest(BaseModel):
    """
    Request schema for processing payout
    """
    user_id: str = Field(
        ...,
        min_length = 1,
        max_length = MAX_USER_ID_LENGTH
    )
    amount: float = Field(..., ge = MIN_PAYOUT_AMOUNT)
    recipient_data: dict[str, Any]

    @field_validator("user_id")
    @classmethod
    def validate_no_whitespace(cls, v: str) -> str:
        """
        Ensure no leading/trailing whitespace
        """
        return v.strip()


class ProcessPayoutResponse(BaseModel):
    """
    Response schema for payout processing
    """
    success: bool
    transaction_id: str | None = None
    error: str | None = None


class RecipientValidationRequest(BaseModel):
    """
    Request schema for recipient validation
    """
    recipient_data: dict[str, Any]


class RecipientValidationResponse(BaseModel):
    """
    Response schema for recipient validation
    """
    valid: bool
    error: str | None = None


class PayoutInfoResponse(BaseModel):
    """
    Response schema for payout information
    """
    id: int
    user_id: str
    amount: float
    currency: str
    status: str
    adapter_type: str
    processed_at: str | None = None
    external_transaction_id: str | None = None


class CreateProgramRequest(BaseModel):
    """
    Request schema for creating referral program
    """
    name: str = Field(
        ...,
        min_length = 1,
        max_length = MAX_PROGRAM_NAME_LENGTH
    )
    program_key: str = Field(
        ...,
        min_length = 1,
        max_length = MAX_PROGRAM_KEY_LENGTH
    )
    reward_amount: float = Field(..., ge = MIN_REWARD_AMOUNT)
    reward_currency: str = Field(
        default = CurrencyCode.USD.value,
        min_length = CURRENCY_CODE_LENGTH,
        max_length = CURRENCY_CODE_LENGTH
    )
    reward_type: str = Field(default = RewardType.ONE_TIME.value)
    adapter_type: str = Field(default = AdapterType.MANUAL.value)
    max_rewards_per_user: int | None = Field(
        None,
        ge = MIN_MAX_REWARDS_PER_USER,
        le = MAX_MAX_REWARDS_PER_USER
    )
    conversion_window_days: int | None = Field(
        None,
        ge = MIN_CONVERSION_WINDOW_DAYS,
        le = MAX_CONVERSION_WINDOW_DAYS
    )

    @field_validator("name", "program_key")
    @classmethod
    def validate_no_whitespace(cls, v: str) -> str:
        """
        Ensure no leading/trailing whitespace
        ""
```

---

## File Overview

### Purpose and Responsibility

This Python source file defines Pydantic schemas for handling payout operations within the `stripe-referral` application. It ensures data validation, consistency, and type safety for requests and responses related to payouts, program creation, and recipient validation.

### Key Exports and Public Interface

- **ProcessPayoutRequest**: Schema for processing a payout request.
- **ProcessPayoutResponse**: Schema for the response after processing a payout.
- **RecipientValidationRequest**: Schema for validating a recipient's data.
- **RecipientValidationResponse**: Schema for the result of recipient validation.
- **PayoutInfoResponse**: Schema for information about a completed payout transaction.
- **CreateProgramRequest**: Schema for creating a referral program.
- **ProgramInfoResponse**: Schema for program details.

### How It Fits into the Project

This file is part of the `stripe-referral` project, specifically within the `schemas/payout.py` module. These schemas are used throughout the application to validate and structure data for payout operations, recipient validation, and program creation. They ensure that all interactions with the payout system adhere to a consistent and well-defined format.

### Notable Design Decisions

- **Pydantic Validation**: Utilizes Pydantic's `Field` and `field_validator` decorators for robust data validation.
- **Type Hints and Enums**: Leverages type hints, enums from the project’s configuration module, and custom validators to enforce strict data constraints.
- **Consistent Error Handling**: Ensures that all responses include error messages or status indicators, facilitating easier debugging and error handling.

---

*Generated by CodeWorm on 2026-02-20 10:05*
