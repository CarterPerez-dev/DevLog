# config

**Type:** File Overview
**Repository:** CodeWorm
**File:** codeworm/core/config.py
**Language:** python
**Lines:** 1-334
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2026
config.py
"""
from __future__ import annotations

import os
from pathlib import Path
from typing import Annotated, Any

import yaml
from pydantic import BaseModel, Field, SecretStr, field_validator
from pydantic_settings import BaseSettings, SettingsConfigDict


DEFAULT_CONFIG_DIR = Path(__file__).parent.parent.parent / "config"


class DevLogSettings(BaseModel):
    """
    Settings for the DevLog output repository
    """
    repo_path: Path
    remote: str = ""
    branch: str = "main"

    @field_validator("repo_path", mode = "before")
    @classmethod
    def expand_path(cls, v: Any) -> Path:
        """
        Expand ~ and environment variables in path
        """
        if isinstance(v, str):
            return Path(os.path.expandvars(v)).expanduser()
        return v


class OllamaSettings(BaseModel):
    """
    Settings for Ollama LLM connection
    """
    host: str = "localhost"
    port: int = 11434
    model: str = "qwen2.5:7b"
    temperature: float = 0.3
    num_ctx: int = 16384
    num_predict: int = 4096
    keep_alive: int = -1

    @property
    def base_url(self) -> str:
        """
        Construct the base URL for Ollama API
        """
        return f"http://{self.host}:{self.port}"


class ScheduleSettings(BaseModel):
    """
    Settings for human-like commit scheduling
    """
    enabled: bool = True
    min_commits_per_day: Annotated[int, Field(ge = 1, le = 500)] = 12
    max_commits_per_day: Annotated[int, Field(ge = 1, le = 500)] = 18
    timezone: str = "America/Los_Angeles"
    prefer_hours: list[int] = Field(
        default_factory = lambda: [9, 10, 11, 14, 15, 16, 20, 21, 22]
    )
    avoid_hours: list[int] = Field(default_factory = lambda: [3, 4, 5, 6, 7])
    weekend_reduction: float = 0.7
    min_gap_minutes: int = 30


class AnalyzerSettings(BaseModel):
    """
    Settings for code analysis and snippet selection
    """
    min_complexity: int = 3
    max_lines: int = 150
    min_lines: int = 15
    include_patterns: list[str] = Field(
        default_factory = lambda:
        ["**/*.py", "**/*.ts", "**/*.tsx", "**/*.js", "**/*.go", "**/*.rs"]
    )
    exclude_patterns: list[str] = Field(
        default_factory = lambda: [
            "**/test_*.py",
            "**/*_test.py",
            "**/*_test.go",
            "**/*.spec.ts",
            "**/*.test.ts",
            "**/node_modules/**",
            "**/venv/**",
            "**/.venv/**",
            "**/__pycache__/**",
            "**/dist/**",
            "**/build/**",
            "**/.git/**",
            "**/vendor/**",
            "**/target/**",]
    )


class DocumentationSettings(BaseModel):
    """
    Settings for documentation type distribution and deduplication
    """
    redocument_after_days: int = 90
    type_weights: dict[str,
                       int] = Field(
                           default_factory = lambda: {
                               "function_doc": 35,
                               "cla
```

---

## File Overview

### Purpose and Responsibility

This `config.py` file is responsible for defining and managing application settings, including configurations for logging, Ollama LLM connection, commit scheduling, code analysis, documentation generation, Redis connection, and web dashboard. It ensures that the application can be flexibly configured via YAML files with environment variable overrides.

### Key Exports and Public Interface

- **Settings Models**: `DevLogSettings`, `OllamaSettings`, `ScheduleSettings`, `AnalyzerSettings`, `DocumentationSettings`, `RedisSettings`, `DashboardSettings`, `RepoEntry`, `PromptSettings`
- **CodeWormSettings Class**: The main settings class that loads configurations from YAML files and environment variables.

### Project Integration

This file is a central hub for configuration in the CodeWorm project. It provides a structured way to manage various application components, ensuring consistency and ease of customization. Settings are loaded at runtime, allowing dynamic adjustments based on deployment environments or specific needs.

### Design Decisions

- **Pydantic Models**: Utilizes Pydantic models for robust data validation and type hints.
- **Environment Variable Overriding**: Supports environment variable overrides to facilitate flexible configuration across different deployment scenarios.
- **Path Expansion**: Automatically expands paths using `os.path.expandvars` and `expanduser`, ensuring that path configurations are correctly interpreted.
- **YAML Configuration**: Loads settings from YAML files, providing a human-readable format for easy modification.

This design ensures that the application can be easily configured without altering code, promoting maintainability and flexibility.

---

*Generated by CodeWorm on 2026-02-21 07:20*
