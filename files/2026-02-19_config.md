# config

**Type:** File Overview
**Repository:** angelamos-operations
**File:** CarterBot-Telegram/src/config.ts
**Language:** typescript
**Lines:** 1-102
**Complexity:** 0.0

---

## Source Code

```typescript
/**
 * CarterOS Telegram Bot - Configuration
 *
 * Environment variables, paths, and settings.
 * Simplified for personal use (no complex security layers).
 */

import { homedir } from "os";
import { resolve, dirname } from "path";
import type { McpServerConfig } from "./types";

const HOME = homedir();

const EXTRA_PATHS = [
  `${HOME}/.local/bin`,
  `${HOME}/.bun/bin`,
  "/usr/local/bin",
];

const currentPath = process.env.PATH || "";
const pathParts = currentPath.split(":");
for (const extraPath of EXTRA_PATHS) {
  if (!pathParts.includes(extraPath)) {
    pathParts.unshift(extraPath);
  }
}
process.env.PATH = pathParts.join(":");

export const TELEGRAM_TOKEN = process.env.TELEGRAM_BOT_TOKEN || "";
export const ALLOWED_USERS: number[] = (
  process.env.TELEGRAM_ALLOWED_USERS || ""
)
  .split(",")
  .filter((x) => x.trim())
  .map((x) => parseInt(x.trim(), 10))
  .filter((x) => !isNaN(x));

export const WORKING_DIR = process.env.CLAUDE_WORKING_DIR || `${HOME}/yoshi/dev/operations/angelamos-operations/CarterBot-Telegram`;

export const WHISPER_CLI_PATH = process.env.WHISPER_CLI_PATH || `${HOME}/tools/whisper.cpp/build/bin/whisper-cli`;
export const WHISPER_MODEL_PATH = process.env.WHISPER_MODEL_PATH || `${HOME}/tools/whisper.cpp/models/ggml-medium.bin`;

let MCP_SERVERS: Record<string, McpServerConfig> = {};

try {
  const mcpConfigPath = resolve(dirname(import.meta.dir), "mcp-config.ts");
  const mcpModule = await import(mcpConfigPath).catch(() => null);
  if (mcpModule?.MCP_SERVERS) {
    MCP_SERVERS = mcpModule.MCP_SERVERS;
    console.log(
      `Loaded ${Object.keys(MCP_SERVERS).length} MCP servers from mcp-config.ts`
    );
  }
} catch {
  console.log("No mcp-config.ts found - running without custom MCPs");
}

export { MCP_SERVERS };

export const SYSTEM_PROMPT = `You are Carter's personal assistant accessible via Telegram.
You have full access to CarterOS (notes, planner, job tracker, challenge tracker, identity, full database and github access as well).
Use the MCP tools to read and write data. Be concise and helpful.`;

const thinkingKeywordsStr =
  process.env.THINKING_KEYWORDS || "think,reason,analyze";
const thinkingDeepKeywordsStr =
  process.env.THINKING_DEEP_KEYWORDS || "ultrathink,think hard,deep think";

export const THINKING_KEYWORDS = thinkingKeywordsStr
  .split(",")
  .map((k) => k.trim().toLowerCase());
export const THINKING_DEEP_KEYWORDS = thinkingDeepKeywordsStr
  .split(",")
  .map((k) => k.trim().toLowerCase());

export const TELEGRAM_MESSAGE_LIMIT = 4096;
export const TELEGRAM_SAFE_LIMIT = 4000;
export const STREAMING_THROTTLE_MS = 500;
export const MEDIA_GROUP_TIMEOUT = 1000;

export const SESSION_FILE = "/tmp/carter-telegram-session.json";
export const RESTART_FILE = "/tmp/carter-telegram-restart.json";
export const TEMP_DIR = "/tmp/carter-telegram-bot";

await Bun.write(`${TEMP_DIR}/.keep`, "");

if (!TELEGRAM_TOKEN) {
  console.error("ERROR: TELEGRAM_BOT_TOKEN environment variable is required");
  process.exit(1);
```

---

## File Overview

### Documenting `config.ts`

**Purpose and Responsibility:**
This TypeScript configuration file sets up essential environment variables, paths, and settings for the CarterOS Telegram Bot. It ensures that necessary directories and binaries are available in the PATH, defines allowed users, and initializes various configurations required by the bot.

**Key Exports or Public Interface:**
- `TELEGRAM_TOKEN`: The bot's API token.
- `ALLOWED_USERS`: An array of user IDs permitted to interact with the bot.
- `WORKING_DIR`: The directory where the bot operates.
- `WHISPER_CLI_PATH` and `WHISPER_MODEL_PATH`: Paths to Whisper CLI and model files for audio processing.
- `MCP_SERVERS`: Configuration for MCP servers, loaded from a separate module if available.
- `SYSTEM_PROMPT`: A system prompt defining the assistant's role.
- Various constants like `TELEGRAM_MESSAGE_LIMIT`, `STREAMING_THROTTLE_MS`, etc., to control bot behavior.

**How It Fits in the Project:**
This file is crucial for initializing the botâ€™s environment. It ensures that all necessary paths and configurations are set up before any other components of the application start executing. The configuration values are used throughout the project, making this a central point for managing settings.

**Notable Design Decisions:**
- **Environment Variables:** Utilizes environment variables to allow flexibility in deployment.
- **PATH Extension:** Dynamically extends the PATH with additional directories to ensure necessary tools are available.
- **Error Handling:** Exits the process if critical configuration values are missing, ensuring the bot cannot start without proper setup.

---

*Generated by CodeWorm on 2026-02-19 20:24*
