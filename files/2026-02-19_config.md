# config

**Type:** File Overview
**Repository:** kill-pr0cess.inc
**File:** backend/src/utils/config.rs
**Language:** rust
**Lines:** 1-506
**Complexity:** 0.0

---

## Source Code

```rust
/*
 * Â©AngelaMos | 2025
 */

use serde::{Deserialize, Serialize};
use std::env;
use std::net::SocketAddr;
use tracing::{info, warn};

use crate::utils::error::{AppError, Result};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Config {
    // Server configuration
    pub host: String,
    pub port: u16,
    pub environment: Environment,

    // Database configuration
    pub database_url: String,
    pub database_max_connections: u32,
    pub database_min_connections: u32,
    pub database_connection_timeout: u64,

    // Redis configuration
    pub redis_url: String,
    pub redis_max_connections: u32,
    pub redis_connection_timeout: u64,

    // GitHub API configuration
    pub github_token: String,
    pub github_username: String,
    pub github_api_base_url: String,
    pub github_rate_limit_requests: u32,
    pub github_cache_ttl: u64,

    // Frontend configuration
    pub frontend_url: String,
    pub cors_allowed_origins: Vec<String>,

    // Performance monitoring
    pub metrics_enabled: bool,
    pub prometheus_port: u16,
    pub system_metrics_interval: u64,

    // Fractal computation limits
    pub fractal_max_width: u32,
    pub fractal_max_height: u32,
    pub fractal_max_iterations: u32,
    pub fractal_max_zoom: f64,
    pub fractal_computation_timeout: u64,

    // Logging configuration
    pub log_level: String,
    pub log_format: LogFormat,

    // Security configuration
    pub rate_limit_enabled: bool,
    pub rate_limit_requests_per_minute: u32,
    pub fractal_rate_limit_per_minute: u32,

    // Caching configuration
    pub cache_enabled: bool,
    pub cache_default_ttl: u64,
    pub github_cache_enabled: bool,
}

#[derive(Debug, Clone, Serialize, Deserialize, PartialEq)]
pub enum Environment {
    Development,
    Staging,
    Production,
}

#[derive(Debug, Clone, Serialize, Deserialize, PartialEq)]
pub enum LogFormat {
    Plain,
    Json,
}

impl Config {
    /// Load configuration from environment variables with intelligent defaults
    /// I'm implementing comprehensive environment variable parsing with validation
    pub fn from_env() -> Result<Self> {
        info!("Loading configuration from environment variables");

        // Load environment type first to set appropriate defaults
        let environment = parse_environment()?;

        let config = Config {
            // Server configuration
            host: env::var("HOST").unwrap_or_else(|_| "0.0.0.0".to_string()),
            port: parse_env_var("PORT", 3001)?,
            environment: environment.clone(),

            // Database configuration with environment-specific defaults
            database_url: get_required_env("DATABASE_URL")?,
            database_max_connections: parse_env_var("DATABASE_MAX_CONNECTIONS",
                if environment == Environment::Production { 100 } else { 20 })?,
            database_min_connections: parse_env_var("DATABASE_MIN_CONNECTIONS", 5)?,
            database_connection_timeout: parse_env_var("DATAB
```

---

## File Overview

# Documentation for `src/utils/config.rs`

## Purpose and Responsibility

This file is responsible for defining and loading configuration settings used throughout the application. It includes server, database, Redis, GitHub API, frontend, performance monitoring, fractal computation limits, logging, and security configurations.

## Key Exports and Public Interface

- **Config**: A struct that holds all configuration parameters.
- `from_env()`: A method to load configuration from environment variables with intelligent defaults.

## How it Fits in the Project

This file serves as a central hub for managing application settings. It ensures consistent and configurable behavior across different environments (development, staging, production) by parsing environment variables and applying appropriate defaults. The loaded configurations are used throughout the project, influencing server setup, database interactions, API calls, logging, and more.

## Notable Design Decisions

- **Environment Variables**: Configuration is primarily loaded from environment variables to allow flexible deployment across different environments.
- **Default Values**: Default values for various settings are provided based on the environment type (e.g., production vs. development).
- **Error Handling**: The `from_env()` method returns a `Result` type, ensuring that any parsing errors or missing required environment variables are handled gracefully and logged.

This design ensures robust configuration management while maintaining flexibility and ease of deployment.

---

*Generated by CodeWorm on 2026-02-19 22:19*
