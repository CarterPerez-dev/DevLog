# config

**Type:** File Overview
**Repository:** CertGames-Core
**File:** backend/config.py
**Language:** python
**Lines:** 1-283
**Complexity:** 0.0

---

## Source Code

```python
"""
CertGames Global Configuration
config.py | 2026 | Â© AngelaMos LLC
"""

import os
from datetime import timedelta
from dotenv import load_dotenv


def detect_environment():
    if os.getenv('ENVIRONMENT'):
        return os.getenv('ENVIRONMENT')

    if os.getenv('CI'):
        return 'testing'

    return 'development'


ENVIRONMENT = detect_environment()
env_file = f'.env.{ENVIRONMENT}'
load_dotenv(env_file)
print(f"Loaded {env_file}")


class Config:
    """
    CertGames configuration class
    """
    ENVIRONMENT = ENVIRONMENT
    DEBUG = ENVIRONMENT == 'development'

    CRACKED_ADMIN_PASSWORD = os.getenv("CRACKED_ADMIN_PASSWORD")

    ADMIN_EMAILS = [
        email.strip()
        for email in os.getenv("ADMIN_EMAILS", "").split(",")
        if email.strip()
    ]

    FRONTEND_URL = os.getenv("FRONTEND_URL")
    EXTERNAL_URL = os.getenv("EXTERNAL_URL")

    MONGO_URI = os.getenv("MONGO_URI")
    REFERRAL_DB_URL = os.getenv("REFERRAL_DB_URL")

    @property
    def is_production(self):
        return self.ENVIRONMENT == "production"

    @property
    def SESSION_COOKIE_SECURE(self):
        return self.is_production

    @property
    def SESSION_COOKIE_DOMAIN(self):
        if self.is_production:
            return ".certgames.com"
        return None

    SECRET_KEY = os.getenv("SECRET_KEY")

    JWT_SECRET_KEY = os.getenv("JWT_SECRET_KEY", SECRET_KEY)
    JWT_ACCESS_TOKEN_EXPIRES = int(os.getenv("JWT_ACCESS_TOKEN_EXPIRES", "86400"))
    JWT_REFRESH_TOKEN_EXPIRES = int(
        os.getenv("JWT_REFRESH_TOKEN_EXPIRES",
                  "2592000")
    )

    REDIS_URL = os.getenv("REDIS_URL")
    REDIS_PASSWORD = os.getenv("REDIS_PASSWORD")
    REDIS_HOST = os.getenv("REDIS_HOST", "redis")
    REDIS_PORT = int(os.getenv("REDIS_PORT", "6379"))

    CELERY_BROKER_URL = os.getenv("CELERY_BROKER_URL")
    CELERY_RESULT_BACKEND = os.getenv("CELERY_RESULT_BACKEND")

    RESEND_API_KEY = os.getenv("RESEND_API_KEY")
    OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
    GEMINI_API_KEY = os.getenv("GEMINI_API_KEY")

    ATLAS_PUBLIC_KEY = os.getenv("ATLAS_PUBLIC_KEY")
    ATLAS_PRIVATE_KEY = os.getenv("ATLAS_PRIVATE_KEY") 
    ATLAS_GROUP_ID = os.getenv("ATLAS_GROUP_ID")
    ATLAS_PROCESS_ID = os.getenv("ATLAS_PROCESS_ID")
    ATLAS_CLUSTER_NAME = os.getenv("ATLAS_CLUSTER_NAME", "development")
    
    ATLAS_BASE_URL = "https://cloud.mongodb.com/api/atlas/v2"
    ATLAS_REQUEST_TIMEOUT = int(os.getenv("ATLAS_REQUEST_TIMEOUT", "30"))
    ATLAS_CACHE_TTL_SECONDS = int(os.getenv("ATLAS_CACHE_TTL_SECONDS", "900"))

    GOOGLE_CLIENT_ID = os.getenv("GOOGLE_CLIENT_ID")
    GOOGLE_CLIENT_SECRET = os.getenv("GOOGLE_CLIENT_SECRET")
    APPLE_CLIENT_ID = os.getenv("APPLE_CLIENT_ID")
    APPLE_CLIENT_SECRET = os.getenv("APPLE_CLIENT_SECRET")
    GH_CLIENT_ID = os.getenv("GH_CLIENT_ID")
    GH_CLIENT_SECRET = os.getenv("GH_CLIENT_SECRET")
    GH_ADMIN_CLIENT_ID = os.getenv("GH_ADMIN_CLIENT_ID")
    GH_ADMIN_CLIENT_SECRET = os.getenv("GH_ADMIN_CLIENT_SECRET")

 
```

---

## File Overview

# CertGames Global Configuration

## Purpose and Responsibility
This file, `config.py`, serves as the central configuration hub for the CertGames application. It defines environment-specific settings, including database connections, API keys, OAuth configurations, and other critical parameters required by various components of the backend.

## Key Exports and Public Interface
- **Config Class**: The primary class providing access to global configuration settings.
  - `ENVIRONMENT`: The current environment (development, testing, or production).
  - `DEBUG`, `CRACKED_ADMIN_PASSWORD`, `ADMIN_EMAILS`, `FRONTEND_URL`, `EXTERNAL_URL`, etc.: Various configuration properties.
  - Properties like `is_production`, `SESSION_COOKIE_SECURE`, and `SESSION_COOKIE_DOMAIN` for runtime environment checks.

## How It Fits in the Project
This file is imported by other modules to ensure consistent access to configuration settings. It helps maintain separation of concerns, allowing different parts of the application to focus on their specific tasks without needing to know about external configurations directly.

## Notable Design Decisions
- **Environment Detection**: Automatically detects the environment based on CI or explicit environment variables.
- **Dynamic Loading**: Loads environment-specific `.env` files using `dotenv`, ensuring that settings are tailored to the current deployment stage.
- **OAuth Configurations**: Provides properties for OAuth providers (Google, Apple, GitHub) with predefined configurations for Authlib, simplifying authentication setup.
- **Secure Handling**: Uses environment variables for sensitive data like API keys and passwords, enhancing security.

---

*Generated by CodeWorm on 2026-02-19 09:40*
