# dashboard.store

**Type:** File Overview
**Repository:** CodeWorm
**File:** dashboard/frontend/src/core/lib/dashboard.store.ts
**Language:** typescript
**Lines:** 1-92
**Complexity:** 0.0

---

## Source Code

```typescript
// Â©AngelaMos | 2026
// dashboard.store.ts

import { create } from 'zustand'
import { devtools } from 'zustand/middleware'
import type { LogEntry, DaemonEvent } from '@/api/types'
import { WS_CONFIG } from '@/config'

interface DashboardState {
  connected: boolean
  logs: LogEntry[]
  currentActivity: string
  currentTarget: string | null
  currentRepo: string | null
  currentDocType: string | null
  nextCycleTime: string | null
  lastEvent: DaemonEvent | null

  setConnected: (connected: boolean) => void
  addLog: (log: LogEntry) => void
  addLogs: (logs: LogEntry[]) => void
  clearLogs: () => void
  setActivity: (activity: string, target?: string, repo?: string, docType?: string) => void
  setNextCycleTime: (time: string | null) => void
  setLastEvent: (event: DaemonEvent) => void
}

export const useDashboardStore = create<DashboardState>()(
  devtools(
    (set) => ({
      connected: false,
      logs: [],
      currentActivity: 'idle',
      currentTarget: null,
      currentRepo: null,
      currentDocType: null,
      nextCycleTime: null,
      lastEvent: null,

      setConnected: (connected) =>
        set({ connected }, false, 'dashboard/setConnected'),

      addLog: (log) =>
        set(
          (state) => ({
            logs:
              state.logs.length >= WS_CONFIG.MAX_LOG_ENTRIES
                ? [...state.logs.slice(-WS_CONFIG.MAX_LOG_ENTRIES + 1), log]
                : [...state.logs, log],
          }),
          false,
          'dashboard/addLog'
        ),

      addLogs: (newLogs) =>
        set(
          (state) => {
            const combined = [...state.logs, ...newLogs]
            return {
              logs: combined.length > WS_CONFIG.MAX_LOG_ENTRIES
                ? combined.slice(-WS_CONFIG.MAX_LOG_ENTRIES)
                : combined,
            }
          },
          false,
          'dashboard/addLogs'
        ),

      clearLogs: () => set({ logs: [] }, false, 'dashboard/clearLogs'),

      setActivity: (activity, target, repo, docType) =>
        set(
          {
            currentActivity: activity,
            currentTarget: target ?? null,
            currentRepo: repo ?? null,
            currentDocType: docType ?? null,
          },
          false,
          'dashboard/setActivity'
        ),

      setNextCycleTime: (time) =>
        set({ nextCycleTime: time }, false, 'dashboard/setNextCycleTime'),

      setLastEvent: (event) =>
        set({ lastEvent: event }, false, 'dashboard/setLastEvent'),
    }),
    { name: 'DashboardStore' }
  )
)

```

---

## File Overview

# dashboard.store.ts Documentation

## Purpose and Responsibility
This file implements a Zustand store for managing state related to the dashboard component of the CodeWorm application. It handles state such as connection status, logs, current activity, and more.

## Key Exports or Public Interface
- **useDashboardStore**: The main export, providing access to the dashboard state and actions.
  - `connected`: Tracks whether the dashboard is connected.
  - `logs`: Stores log entries from the daemon.
  - `currentActivity`, `currentTarget`, `currentRepo`, `currentDocType`, `nextCycleTime`, `lastEvent`: Track various states of the current activity.
  - Actions like `setConnected`, `addLog`, `clearLogs`, etc., to modify state.

## How It Fits in the Project
This store is crucial for maintaining consistent and reactive state across the dashboard component. It integrates with WebSocket configurations (`WS_CONFIG`) to handle log entries efficiently, ensuring that only a limited number of logs are stored at any time. The store also supports logging activities and events, which helps in tracking user interactions and system states.

## Notable Design Decisions
- **Zustand**: Utilizes Zustand for state management due to its simplicity and reactivity.
- **DevTools Middleware**: Incorporates `devtools` middleware for easier debugging and inspection of the store's state changes.
- **WebSocket Configuration**: Integrates with `WS_CONFIG` to manage log entry limits, ensuring efficient memory usage.
- **Action Functions**: Each action function is designed to be self-contained and clear in its purpose, making it easy to understand and maintain.

---

*Generated by CodeWorm on 2026-02-21 09:16*
