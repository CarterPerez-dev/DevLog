# useAdmin

**Type:** File Overview
**Repository:** Cybersecurity-Projects
**File:** TEMPLATES/fullstack-template/frontend/src/api/hooks/useAdmin.ts
**Language:** typescript
**Lines:** 1-220
**Complexity:** 0.0

---

## Source Code

```typescript
// ===================
// Â© AngelaMos | 2025
// useAdmin.ts
// ===================

import {
  type UseMutationResult,
  type UseQueryResult,
  useMutation,
  useQuery,
  useQueryClient,
} from '@tanstack/react-query'
import { toast } from 'sonner'
import {
  type AdminUserCreateRequest,
  type AdminUserUpdateRequest,
  isValidUserListResponse,
  isValidUserResponse,
  USER_ERROR_MESSAGES,
  USER_SUCCESS_MESSAGES,
  type UserListResponse,
  type UserResponse,
  UserResponseError,
} from '@/api/types'
import { API_ENDPOINTS, PAGINATION, QUERY_KEYS } from '@/config'
import { apiClient, QUERY_STRATEGIES } from '@/core/api'

export const adminQueries = {
  all: () => QUERY_KEYS.ADMIN.ALL,
  users: {
    all: () => QUERY_KEYS.ADMIN.USERS.ALL(),
    list: (page: number, size: number) => QUERY_KEYS.ADMIN.USERS.LIST(page, size),
    byId: (id: string) => QUERY_KEYS.ADMIN.USERS.BY_ID(id),
  },
} as const

interface UseAdminUsersParams {
  page?: number
  size?: number
}

const fetchAdminUsers = async (
  page: number,
  size: number
): Promise<UserListResponse> => {
  const response = await apiClient.get<unknown>(API_ENDPOINTS.ADMIN.USERS.LIST, {
    params: { page, size },
  })
  const data: unknown = response.data

  if (!isValidUserListResponse(data)) {
    throw new UserResponseError(
      USER_ERROR_MESSAGES.INVALID_USER_LIST_RESPONSE,
      API_ENDPOINTS.ADMIN.USERS.LIST
    )
  }

  return data
}

export const useAdminUsers = (
  params: UseAdminUsersParams = {}
): UseQueryResult<UserListResponse, Error> => {
  const page = params.page ?? PAGINATION.DEFAULT_PAGE
  const size = params.size ?? PAGINATION.DEFAULT_SIZE

  return useQuery({
    queryKey: adminQueries.users.list(page, size),
    queryFn: () => fetchAdminUsers(page, size),
    ...QUERY_STRATEGIES.standard,
  })
}

const fetchAdminUserById = async (id: string): Promise<UserResponse> => {
  const response = await apiClient.get<unknown>(
    API_ENDPOINTS.ADMIN.USERS.BY_ID(id)
  )
  const data: unknown = response.data

  if (!isValidUserResponse(data)) {
    throw new UserResponseError(
      USER_ERROR_MESSAGES.INVALID_USER_RESPONSE,
      API_ENDPOINTS.ADMIN.USERS.BY_ID(id)
    )
  }

  return data
}

export const useAdminUser = (id: string): UseQueryResult<UserResponse, Error> => {
  return useQuery({
    queryKey: adminQueries.users.byId(id),
    queryFn: () => fetchAdminUserById(id),
    enabled: id.length > 0,
    ...QUERY_STRATEGIES.standard,
  })
}

const performAdminCreateUser = async (
  data: AdminUserCreateRequest
): Promise<UserResponse> => {
  const response = await apiClient.post<unknown>(
    API_ENDPOINTS.ADMIN.USERS.CREATE,
    data
  )
  const responseData: unknown = response.data

  if (!isValidUserResponse(responseData)) {
    throw new UserResponseError(
      USER_ERROR_MESSAGES.INVALID_USER_RESPONSE,
      API_ENDPOINTS.ADMIN.USERS.CREATE
    )
  }

  return responseData
}

export const useAdminCreateUser = (): UseMutationResult<
  UserResponse,
  Error,
  AdminUserC
```

---

## File Overview

# useAdmin.ts Documentation

## Purpose and Responsibility
This file provides administrative hooks for managing user data within a full-stack application. It handles CRUD operations on users, including fetching all users, fetching individual users by ID, creating new users, updating existing users, and deleting users.

## Key Exports and Public Interface
- **useAdminUsers**: Fetches a list of users with pagination support.
- **useAdminUser**: Fetches details of an individual user by ID.
- **useAdminCreateUser**: Creates a new user and invalidates the user list cache upon success.
- **useAdminUpdateUser**: Updates an existing user and updates the user in the cache, then invalidates the user list cache.
- **performAdminDeleteUser**: Deletes a user from the database.

## How It Fits into the Project
This file is part of the application's API hooks layer. It leverages `@tanstack/react-query` for state management and `sonner` for notifications. The hooks are designed to be reusable across different components, ensuring consistent behavior when performing admin actions on users.

## Notable Design Decisions
- **Query Keys**: Utilizes constants from the project configuration (`QUERY_KEYS`) to ensure consistency in query keys.
- **Error Handling**: Uses custom error classes and messages for robust error handling and user feedback.
- **Cache Management**: Implements cache invalidation strategies after creating or updating users, ensuring that the UI reflects changes immediately.
```

This documentation provides an overview of the file's purpose, key exports, integration within the project, and significant design choices.

---

*Generated by CodeWorm on 2026-02-18 09:32*
