# index

**Type:** File Overview
**Repository:** oneIsNun_
**File:** react-scss/src/pages/settings/index.tsx
**Language:** tsx
**Lines:** 1-145
**Complexity:** 0.0

---

## Source Code

```tsx
// ===================
// AngelaMos | 2026
// settings/index.tsx
// ===================

import { useState } from 'react'
import { LuDatabase, LuActivity, LuSave } from 'react-icons/lu'
import { useProfilingStatus, useSetProfiling, useMetrics } from '@/api'
import styles from './settings.module.scss'

const PROFILING_LEVELS = [
  { value: 0, label: 'Off', description: 'No profiling' },
  { value: 1, label: 'Slow Only', description: 'Profile queries slower than threshold' },
  { value: 2, label: 'All', description: 'Profile all operations' },
]

export function Component(): React.ReactElement {
  const { data: profiling, isLoading: profilingLoading } = useProfilingStatus()
  const { data: metrics } = useMetrics()
  const setProfiling = useSetProfiling()

  const [level, setLevel] = useState<number | null>(null)
  const [slowMs, setSlowMs] = useState<string>('')

  const currentLevel = level ?? profiling?.level ?? 0
  const currentSlowMs = slowMs || String(profiling?.slow_ms ?? 100)

  const handleSave = () => {
    setProfiling.mutate({
      level: currentLevel,
      slow_ms: parseInt(currentSlowMs, 10) || 100,
    })
  }

  const hasChanges =
    (level !== null && level !== profiling?.level) ||
    (slowMs !== '' && parseInt(slowMs, 10) !== profiling?.slow_ms)

  return (
    <div className={styles.page}>
      <div className={styles.container}>
        <div className={styles.header}>
          <h1 className={styles.title}>Settings</h1>
          <p className={styles.subtitle}>Configure MongoDB dashboard settings</p>
        </div>

        {metrics && (
          <section className={styles.section}>
            <h2 className={styles.sectionTitle}>
              <LuDatabase className={styles.sectionIcon} />
              Database Info
            </h2>
            <div className={styles.infoCard}>
              <div className={styles.infoRow}>
                <span className={styles.infoLabel}>Host</span>
                <span className={styles.infoValue}>{metrics.server.host}</span>
              </div>
              <div className={styles.infoRow}>
                <span className={styles.infoLabel}>Version</span>
                <span className={styles.infoValue}>MongoDB {metrics.server.version}</span>
              </div>
              <div className={styles.infoRow}>
                <span className={styles.infoLabel}>Database</span>
                <span className={styles.infoValue}>{metrics.database.name}</span>
              </div>
              <div className={styles.infoRow}>
                <span className={styles.infoLabel}>Collections</span>
                <span className={styles.infoValue}>{metrics.database.collections}</span>
              </div>
              <div className={styles.infoRow}>
                <span className={styles.infoLabel}>Documents</span>
                <span className={styles.infoValue}>{metrics.database.documents.toLocaleString()}</span>
              </div>
            </div>
          </section>
        
```

---

## File Overview

# settings/index.tsx

## Purpose and Responsibility
This file is responsible for configuring MongoDB dashboard settings, including database information and query profiling. It integrates with API hooks to fetch and update profiling status and metrics.

## Key Exports and Public Interface
- **Component**: The main React component that renders the settings page.
  - Handles state management for profiling level and slow query threshold.
  - Provides a form to save updated settings.

## How it Fits into the Project
This file is part of the `settings` section within the application. It leverages hooks from `@/api` to fetch and update MongoDB metrics and profiling status, ensuring real-time data representation and user interaction. The component structure allows for dynamic updates based on user input and API responses.

## Notable Design Decisions
- **State Management**: Uses `useState` for managing local state (profiling level and slow query threshold).
- **Icon Usage**: Utilizes React Icons to provide visual feedback in the UI.
- **Conditional Rendering**: Implements loading states and disabled inputs based on API response statuses.
- **Form Handling**: Simplifies form submission logic through a single `handleSave` function that updates profiling settings via an API mutation.

This component is crucial for maintaining and optimizing MongoDB performance by allowing users to configure query profiling levels and thresholds, directly impacting the dashboard's functionality and data accuracy.

---

*Generated by CodeWorm on 2026-02-20 00:34*
