# 20260103_101351_add_job_applications_table

**Type:** File Overview
**Repository:** angelamos-operations
**File:** CarterOS-Server/alembic/versions/20260103_101351_add_job_applications_table.py
**Language:** python
**Lines:** 1-247
**Complexity:** 0.0

---

## Source Code

```python
"""add job_applications table

Revision ID: 1348b14f44a4
Revises: 20251231_planner
Create Date: 2026-01-03 10:13:51.566545
"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

revision: str = '1348b14f44a4'
down_revision: Union[str, None] = '20251231_planner'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('job_applications',
    sa.Column('user_id', sa.Uuid(), nullable=False),
    sa.Column('identity_name', sa.String(length=200), nullable=False),
    sa.Column('position_title', sa.String(length=200), nullable=False),
    sa.Column('job_url', sa.String(length=2048), nullable=True),
    sa.Column('salary_min', sa.Integer(), nullable=True),
    sa.Column('salary_max', sa.Integer(), nullable=True),
    sa.Column('offer_amount', sa.Integer(), nullable=True),
    sa.Column('location', sa.String(length=200), nullable=True),
    sa.Column('remote_type', sa.Enum('unknown', 'onsite', 'hybrid', 'remote', name='remotetype'), nullable=False),
    sa.Column('source', sa.String(length=100), nullable=True),
    sa.Column('contact_name', sa.String(length=150), nullable=True),
    sa.Column('contact_email', sa.String(length=320), nullable=True),
    sa.Column('application_status', sa.Enum('unknown', 'saved', 'applied', 'withdrawn', name='applicationstatus'), nullable=False),
    sa.Column('interview_rounds', sa.Integer(), nullable=False),
    sa.Column('outcome', sa.Enum('unknown', 'pending', 'rejected', 'offer', 'ghosted', 'accepted', 'declined', name='outcome'), nullable=False),
    sa.Column('job_type', sa.Enum('unknown', 'full_time', 'part_time', 'contract', 'internship', 'freelance', name='jobtype'), nullable=False),
    sa.Column('experience_level', sa.Enum('unknown', 'entry', 'mid', 'senior', 'lead', 'principal', 'executive', name='experiencelevel'), nullable=False),
    sa.Column('priority', sa.Enum('unknown', 'low', 'medium', 'high', 'dream', name='priority'), nullable=False),
    sa.Column('date_saved', sa.DateTime(timezone=True), nullable=True),
    sa.Column('date_applied', sa.DateTime(timezone=True), nullable=True),
    sa.Column('date_first_response', sa.DateTime(timezone=True), nullable=True),
    sa.Column('date_outcome', sa.DateTime(timezone=True), nullable=True),
    sa.Column('followup_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('id', sa.Uuid(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name=op.f('fk_job_applications_user_id_users'), ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id', name=op.f('pk_job_applications'))
    )
  
```

---

## File Overview

### Purpose and Responsibility

This Python script is part of an Alembic migration, responsible for adding a `job_applications` table to the database schema. The migration ensures that all necessary columns are created with appropriate data types and constraints.

### Key Exports or Public Interface

- **Function: `upgrade()`**
  - This function executes SQL commands to create the `job_applications` table with various fields such as user ID, position title, job URL, salary range, application status, and more. It also creates several indexes for efficient querying.

### How it Fits in the Project

This migration script is part of a larger database schema management system using Alembic. It is executed when upgrading the database to a new version, ensuring that all necessary tables and columns are present. This script fits into the project by maintaining data integrity and allowing for flexible job application tracking.

### Notable Design Decisions

- **Data Types**: The script uses SQLAlchemy's `sa` module to define appropriate data types (e.g., UUID, String, Enum) for each column.
- **Indexes**: Multiple indexes are created on various columns (`date_applied`, `outcome`, etc.) to optimize query performance.
- **Foreign Key Constraints**: A foreign key constraint is added to ensure referential integrity between the `job_applications` and `users` tables.
- **Enum Types**: Enum types are used for fields like `remote_type`, `application_status`, `outcome`, `job_type`, and `experience_level` to enforce valid values.

---

*Generated by CodeWorm on 2026-02-19 19:51*
