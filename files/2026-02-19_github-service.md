# github_service

**Type:** File Overview
**Repository:** kill-pr0cess.inc
**File:** backend/src/services/github_service.rs
**Language:** rust
**Lines:** 1-557
**Complexity:** 0.0

---

## Source Code

```rust
/*
 * GitHub API integration service providing intelligent caching, rate limiting, and data transformation for repository showcase.
 * I'm implementing comprehensive GitHub API communication with automatic retry logic, performance optimization, and database caching.
 */

use reqwest::{Client, header::{HeaderMap, HeaderValue, USER_AGENT, AUTHORIZATION}};
use serde::{Deserialize, Serialize};
use std::time::{Duration, SystemTime, UNIX_EPOCH};
use tokio::time::sleep;
use tracing::{info, warn, error, debug};
use uuid::Uuid;

use crate::{
    models::github::{Repository, RepositoryStats, GitHubUser, RepositoryDetailed},
    services::cache_service::CacheService,
    utils::error::{AppError, Result},
    database::DatabasePool,
};

#[derive(Debug, Clone)]
pub struct GitHubService {
    client: Client,
    token: String,
    cache_service: CacheService,
    base_url: String,
    rate_limit_remaining: std::sync::Arc<std::sync::Mutex<u32>>,
    rate_limit_reset: std::sync::Arc<std::sync::Mutex<u64>>,
}

#[derive(Debug, Deserialize)]
struct GitHubApiRepository {
    id: u64,
    name: String,
    full_name: String,
    owner: GitHubOwner,
    description: Option<String>,
    html_url: String,
    clone_url: String,
    ssh_url: String,
    language: Option<String>,
    size: u32,
    stargazers_count: u32,
    watchers_count: u32,
    forks_count: u32,
        open_issues_count: u32,
        created_at: String,
        updated_at: String,
        pushed_at: Option<String>,
        private: bool,
            fork: bool,
                archived: bool,
                topics: Vec<String>,
                license: Option<GitHubLicense>,
}

#[derive(Debug, Deserialize)]
struct GitHubOwner {
    login: String,
    id: u64,
    avatar_url: String,
}

#[derive(Debug, Deserialize)]
struct GitHubLicense {
    name: String,
    spdx_id: Option<String>,
}

#[derive(Debug, Deserialize)]
pub struct GitHubRateLimit {
    pub limit: u32,
    pub remaining: u32,
    pub reset: u64,
    pub used: u32,
}

#[derive(Debug, Deserialize)]
struct GitHubRateLimitResponse {
    rate: GitHubRateLimit,
}


#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RateLimitInfo {
    pub limit: i32,
    pub remaining: i32,
    pub reset_at: chrono::DateTime<chrono::Utc>,
    pub used: i32,
    pub percentage_used: f64,
}

impl GitHubService {
    pub fn new(token: String, cache_service: CacheService) -> Self {
        // I'm setting up the HTTP client with optimal configuration for GitHub API
        let mut headers = HeaderMap::new();
        headers.insert(USER_AGENT, HeaderValue::from_static("dark-performance-showcase/0.1.0"));
        headers.insert(
            AUTHORIZATION,
            HeaderValue::from_str(&format!("Bearer {}", token))
            .expect("Invalid GitHub token format")
        );
        headers.insert("Accept", HeaderValue::from_static("application/vnd.github+json"));
        headers.insert("X-GitHub-Api-Version", HeaderValue::from_static("2022-11-28"));

  
```

---

## File Overview

# GitHubService.rs Documentation

**Purpose:**
This Rust source file implements an intelligent GitHub API integration service, handling communication with the GitHub API for repository showcase purposes. It includes features such as caching, rate limiting, and data transformation.

**Key Exports/Interface:**
- `GitHubService`: A struct responsible for managing HTTP requests to the GitHub API.
- `RateLimitInfo`: Represents rate limit information returned from the GitHub API.
- `get_user_repositories`: An asynchronous method that fetches repositories for a given user with intelligent caching and pagination handling.

**Project Integration:**
This service is part of the backend module, providing essential functionality for fetching and displaying repository data. It integrates with other services like `CacheService` and `DatabasePool`, ensuring efficient and reliable API interactions.

**Design Decisions:**
- **Rate Limiting:** Implements automatic rate limiting to avoid API abuse.
- **Caching:** Utilizes caching to reduce redundant API calls, improving performance.
- **Error Handling:** Comprehensive error handling with intelligent retry logic ensures robustness.
- **Dependency Management:** Dependencies like `reqwest`, `serde`, and `tokio` are used for HTTP requests, deserialization, and asynchronous operations respectively.
```

This documentation provides an overview of the file's purpose, key components, integration within the project, and notable design choices.

---

*Generated by CodeWorm on 2026-02-19 21:13*
