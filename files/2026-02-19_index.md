# index

**Type:** File Overview
**Repository:** oneIsNun_
**File:** react-scss/src/pages/dashboard/index.tsx
**Language:** tsx
**Lines:** 1-232
**Complexity:** 0.0

---

## Source Code

```tsx
// ===================
// AngelaMos | 2026
// dashboard/index.tsx
// ===================

import { useWebSocket, useMetrics } from '@/api'
import styles from './dashboard.module.scss'

function formatBytes(bytes: number): string {
  if (bytes < 1024) return `${bytes} B`
  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`
  if (bytes < 1024 * 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(1)} MB`
  return `${(bytes / (1024 * 1024 * 1024)).toFixed(2)} GB`
}

function formatUptime(seconds: number): string {
  const days = Math.floor(seconds / 86400)
  const hours = Math.floor((seconds % 86400) / 3600)
  const mins = Math.floor((seconds % 3600) / 60)
  if (days > 0) return `${days}d ${hours}h`
  if (hours > 0) return `${hours}h ${mins}m`
  return `${mins}m`
}

function MetricCard({
  label,
  value,
  subValue,
  highlight = false,
}: {
  label: string
  value: string | number
  subValue?: string
  highlight?: boolean
}): React.ReactElement {
  return (
    <div className={styles.metricCard}>
      <span className={styles.metricLabel}>{label}</span>
      <span className={`${styles.metricValue} ${highlight ? styles.highlight : ''}`}>{value}</span>
      {subValue && <span className={`${styles.metricSub} ${highlight ? styles.highlight : ''}`}>{subValue}</span>}
    </div>
  )
}

export function Component(): React.ReactElement {
  const { metrics: wsMetrics, isConnected } = useWebSocket()
  const { data: polledMetrics, isLoading } = useMetrics()

  const metrics = wsMetrics ?? polledMetrics

  if (isLoading && !metrics) {
    return (
      <div className={styles.page}>
        <div className={styles.loading}>Loading metrics...</div>
      </div>
    )
  }

  if (!metrics) {
    return (
      <div className={styles.page}>
        <div className={styles.error}>Failed to load metrics</div>
      </div>
    )
  }

  return (
    <div className={styles.page}>
      <div className={styles.header}>
        <div className={styles.serverInfo}>
          <span className={styles.host}>{metrics.server.host}</span>
          <span className={styles.version}>MongoDB {metrics.server.version}</span>
        </div>
        <div className={styles.connectionBadge}>
          <span className={`${styles.dot} ${isConnected ? styles.live : ''}`} />
          {isConnected ? 'Live Updates' : 'Polling'}
        </div>
      </div>

      <section className={styles.section}>
        <h2 className={styles.sectionTitle}>Server</h2>
        <div className={styles.grid}>
          <MetricCard
            label="Uptime"
            value={formatUptime(metrics.server.uptime_seconds)}
          />
          <MetricCard
            label="Active Ops"
            value={metrics.active_ops}
            highlight
          />
          <MetricCard
            label="Paid Subscribers"
            value={metrics.paid_subscribers}
            highlight
          />
        </div>
      </section>

      {metrics.current_ops.length > 0 && (
        <section className=
```

---

## File Overview

# dashboard/index.tsx Documentation

## Purpose and Responsibility
This file is responsible for rendering the main dashboard page, which displays various metrics and operational data from a MongoDB server. It integrates WebSocket and polling APIs to fetch real-time and periodic updates.

## Key Exports or Public Interface
- **Component**: The primary React component that renders the dashboard. It uses `useWebSocket` and `useMetrics` hooks to fetch and display server metrics.
  - Props: None (it is a self-contained functional component).
  - Returns: A structured layout with sections for server information, active operations, current operations table, and database details.

## How it Fits in the Project
This file serves as the central dashboard page within the application. It leverages APIs from `@/api` to fetch data dynamically, ensuring that users can monitor the health and performance of the MongoDB server in real-time. The component structure is modular, allowing for easy updates or additions to the metrics displayed.

## Notable Design Decisions
- **Data Fetching**: Utilizes both WebSocket and polling APIs (`useWebSocket` and `useMetrics`) to ensure robust data fetching strategies.
- **Conditional Rendering**: Implements conditional rendering based on loading states and available data to provide a user-friendly experience.
- **Metric Display**: Uses custom `MetricCard` components for consistent styling and formatting of metric values, enhancing readability and visual appeal.

Dependencies:
- `@/api`: Provides WebSocket and polling APIs for fetching server metrics.
- Custom hooks: `useWebSocket`, `useMetrics`.
- SCSS styles (`dashboard.module.scss`) for component styling.

This file is crucial for providing real-time insights into the MongoDB server's performance, making it an integral part of the applicationâ€™s monitoring capabilities.

---

*Generated by CodeWorm on 2026-02-19 23:54*
