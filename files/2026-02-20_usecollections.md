# useCollections

**Type:** File Overview
**Repository:** oneIsNun_
**File:** react-scss/src/api/hooks/useCollections.ts
**Language:** typescript
**Lines:** 1-85
**Complexity:** 0.0

---

## Source Code

```typescript
// ===================
// AngelaMos | 2026
// useCollections.ts
// ===================

import { useQuery } from '@tanstack/react-query'
import { apiClient } from '@/core/api'
import { API_ENDPOINTS, QUERY_CONFIG, QUERY_KEYS } from '@/config'
import {
  parseApiResponse,
  CollectionsListResponseSchema,
  CollectionStatsSchema,
  SchemaAnalysisSchema,
  type CollectionsListResponse,
  type CollectionStats,
  type SchemaAnalysis,
  type IndexInfo,
} from '../types'
import { z } from 'zod'

export function useCollections() {
  return useQuery({
    queryKey: QUERY_KEYS.COLLECTIONS.LIST(),
    queryFn: async (): Promise<CollectionsListResponse> => {
      const { data } = await apiClient.get(API_ENDPOINTS.COLLECTIONS.LIST)
      return parseApiResponse(CollectionsListResponseSchema, data)
    },
    staleTime: QUERY_CONFIG.STALE_TIME.COLLECTIONS,
  })
}

export function useCollectionStats(name: string) {
  return useQuery({
    queryKey: QUERY_KEYS.COLLECTIONS.BY_NAME(name),
    queryFn: async (): Promise<CollectionStats> => {
      const { data } = await apiClient.get(API_ENDPOINTS.COLLECTIONS.BY_NAME(name))
      return parseApiResponse(CollectionStatsSchema, data)
    },
    enabled: !!name,
    staleTime: QUERY_CONFIG.STALE_TIME.COLLECTIONS,
  })
}

export function useCollectionSchema(name: string, sampleSize?: number) {
  return useQuery({
    queryKey: QUERY_KEYS.COLLECTIONS.SCHEMA(name),
    queryFn: async (): Promise<SchemaAnalysis> => {
      const params = sampleSize ? `?sample_size=${sampleSize}` : ''
      const { data } = await apiClient.get(
        `${API_ENDPOINTS.COLLECTIONS.SCHEMA(name)}${params}`
      )
      return parseApiResponse(SchemaAnalysisSchema, data)
    },
    enabled: !!name,
    staleTime: QUERY_CONFIG.STALE_TIME.COLLECTIONS,
  })
}

export function useCollectionIndexes(name: string) {
  return useQuery({
    queryKey: QUERY_KEYS.COLLECTIONS.INDEXES(name),
    queryFn: async (): Promise<IndexInfo[]> => {
      const { data } = await apiClient.get(API_ENDPOINTS.COLLECTIONS.INDEXES(name))
      return parseApiResponse(z.array(z.any()), data)
    },
    enabled: !!name,
    staleTime: QUERY_CONFIG.STALE_TIME.COLLECTIONS,
  })
}

export function useCollectionDocuments(name: string, limit?: number) {
  return useQuery({
    queryKey: [...QUERY_KEYS.COLLECTIONS.BY_NAME(name), 'documents'],
    queryFn: async () => {
      const params = limit ? `?limit=${limit}` : ''
      const { data } = await apiClient.get(
        `${API_ENDPOINTS.COLLECTIONS.DOCUMENTS(name)}${params}`
      )
      return parseApiResponse(z.any(), data)
    },
    enabled: !!name,
    staleTime: QUERY_CONFIG.STALE_TIME.COLLECTIONS,
  })
}

```

---

## File Overview

# useCollections.ts Documentation

**Purpose and Responsibility:**
This TypeScript source file provides hooks for fetching various collections-related data from an API, including lists of collections, collection statistics, schema analysis, indexes, and documents. It integrates with `@tanstack/react-query` to manage query states and caching.

**Key Exports/Interface:**
- **useCollections:** Fetches a list of all collections.
- **useCollectionStats(name):** Retrieves stats for a specific collection by name.
- **useCollectionSchema(name, sampleSize?):** Analyzes the schema of a specific collection with optional sampling.
- **useCollectionIndexes(name):** Lists indexes for a specific collection.
- **useCollectionDocuments(name, limit?):** Fetches documents from a specific collection optionally limited by count.

**Project Integration:**
These hooks are part of the API client module in the `react-scss` project. They are used throughout the application to dynamically fetch and display collections-related data, ensuring consistent and efficient data fetching via React Query.

**Notable Design Decisions:**
- Utilizes `@tanstack/react-query` for state management and caching.
- Defines query keys using constants from `QUERY_KEYS`, enhancing maintainability and reducing redundancy.
- Uses Zod for robust schema validation of API responses.
- Implements conditional enabling of queries based on input parameters, optimizing performance.

---

*Generated by CodeWorm on 2026-02-20 00:35*
