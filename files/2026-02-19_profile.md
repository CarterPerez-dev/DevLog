# profile

**Type:** File Overview
**Repository:** fullstack-template
**File:** frontends/react-native-ios/app/(app)/profile.tsx
**Language:** tsx
**Lines:** 1-225
**Complexity:** 0.0

---

## Source Code

```tsx
/**
 * @AngelaMos | 2026
 * profile.tsx
 */

import { useChangePassword, useCurrentUser } from '@/api/hooks'
import { useUpdateProfile } from '@/api/hooks/useUsers'
import { Button, DottedBackground, Input, PasswordInput } from '@/shared/components'
import { haptics } from '@/shared/utils'
import { router } from 'expo-router'
import { ArrowLeft } from 'lucide-react-native'
import type React from 'react'
import { useEffect, useState } from 'react'
import { Alert, KeyboardAvoidingView, Platform, ScrollView } from 'react-native'
import { SafeAreaView } from 'react-native-safe-area-context'
import { Stack, Text, YStack } from 'tamagui'
import { colors } from '@/theme/tokens'

export default function ProfileScreen(): React.ReactElement {
  const { data: user } = useCurrentUser()
  const updateProfile = useUpdateProfile()
  const changePassword = useChangePassword()

  const [fullName, setFullName] = useState('')
  const [currentPassword, setCurrentPassword] = useState('')
  const [newPassword, setNewPassword] = useState('')
  const [confirmPassword, setConfirmPassword] = useState('')

  useEffect(() => {
    if (user) {
      setFullName(user.full_name ?? '')
    }
  }, [user])

  const handleSaveProfile = (): void => {
    if (!fullName.trim()) {
      haptics.error()
      Alert.alert('Error', 'Please enter your name')
      return
    }

    updateProfile.mutate(
      { full_name: fullName.trim() },
      {
        onSuccess: () => {
          haptics.success()
          Alert.alert('Success', 'Profile updated')
        },
        onError: (err) => {
          haptics.error()
          Alert.alert('Error', err.message)
        },
      }
    )
  }

  const handleChangePassword = (): void => {
    if (!currentPassword || !newPassword || !confirmPassword) {
      haptics.error()
      Alert.alert('Error', 'Please fill in all password fields')
      return
    }

    if (newPassword !== confirmPassword) {
      haptics.error()
      Alert.alert('Error', 'New passwords do not match')
      return
    }

    if (newPassword.length < 8) {
      haptics.error()
      Alert.alert('Error', 'Password must be at least 8 characters')
      return
    }

    changePassword.mutate(
      { current_password: currentPassword, new_password: newPassword },
      {
        onSuccess: () => {
          haptics.success()
          Alert.alert('Success', 'Password changed')
          setCurrentPassword('')
          setNewPassword('')
          setConfirmPassword('')
        },
        onError: (err) => {
          haptics.error()
          Alert.alert('Error', err.message)
        },
      }
    )
  }

  return (
    <DottedBackground>
      <SafeAreaView style={{ flex: 1 }} edges={['top']}>
        <KeyboardAvoidingView
          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
          style={{ flex: 1 }}
        >
          <ScrollView
            contentContainerStyle={{ padding: 24 }}
            keyboardShouldPersistTaps="handled"
          >
           
```

---

## File Overview

### ProfileScreen Component

**Purpose and Responsibility:**
The `profile.tsx` file contains a React component responsible for managing user profile settings, including updating personal information and changing passwords.

**Key Exports or Public Interface:**
- **ProfileScreen**: The main functional component that handles the UI and business logic for editing user profiles.

**How It Fits in the Project:**
This component is part of the `profile` route within the app's navigation stack. Users can navigate to this screen from other profile-related screens, such as settings or account management. It leverages hooks from the `/api/hooks` directory to interact with backend APIs for fetching and updating user data.

**Notable Design Decisions:**
- **State Management**: Utilizes React state (`useState`) to manage form inputs like full name, current password, new password, and confirm password.
- **Error Handling**: Implements error handling using `Alert` to inform users of validation errors or API failures. Haptics feedback is used for user interaction confirmation.
- **Form Validation**: Ensures that all necessary fields are filled out before submitting changes, including checking the length of the new password.
- **UI Components**: Uses Tamagui components like `Stack`, `Text`, and `Input` to create a clean and responsive UI. The form layout is structured using Flexbox principles for optimal mobile display.

This component integrates seamlessly with other parts of the application through its use of shared hooks, ensuring consistency in data handling across different screens.

---

*Generated by CodeWorm on 2026-02-19 16:47*
