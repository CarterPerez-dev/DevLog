# config

**Type:** File Overview
**Repository:** CodeWorm
**File:** codeworm/core/config.py
**Language:** python
**Lines:** 1-358
**Complexity:** 0.0

---

## Source Code

```python
"""
â’¸AngelaMos | 2026
config.py
"""
from __future__ import annotations

import os
from pathlib import Path
from typing import Annotated, Any

import yaml
from pydantic import BaseModel, Field, SecretStr, field_validator
from pydantic_settings import BaseSettings, SettingsConfigDict


DEFAULT_CONFIG_DIR = Path(__file__).parent.parent.parent / "config"


class DevLogSettings(BaseModel):
    """
    Settings for the DevLog output repository
    """
    repo_path: Path
    remote: str = ""
    branch: str = "main"

    @field_validator("repo_path", mode = "before")
    @classmethod
    def expand_path(cls, v: Any) -> Path:
        """
        Expand ~ and environment variables in path
        """
        if isinstance(v, str):
            return Path(os.path.expandvars(v)).expanduser()
        return v


class OllamaSettings(BaseModel):
    """
    Settings for Ollama LLM connection
    """
    host: str = "localhost"
    port: int = 11434
    model: str = "qwen2.5:7b"
    temperature: float = 0.3
    num_ctx: int = 16384
    num_predict: int = 4096
    keep_alive: int = -1

    @property
    def base_url(self) -> str:
        """
        Construct the base URL for Ollama API
        """
        return f"http://{self.host}:{self.port}"


class ScheduleSettings(BaseModel):
    """
    Settings for human-like commit scheduling
    """
    enabled: bool = True
    min_commits_per_day: Annotated[int, Field(ge = 1, le = 500)] = 12
    max_commits_per_day: Annotated[int, Field(ge = 1, le = 500)] = 18
    timezone: str = "America/Los_Angeles"
    prefer_hours: list[int] = Field(
        default_factory = lambda: [9, 10, 11, 14, 15, 16, 20, 21, 22]
    )
    avoid_hours: list[int] = Field(default_factory = lambda: [3, 4, 5, 6, 7])
    weekend_reduction: float = 0.7
    min_gap_minutes: int = 30


class AnalyzerSettings(BaseModel):
    """
    Settings for code analysis and snippet selection
    """
    min_complexity: int = 3
    max_lines: int = 150
    min_lines: int = 15
    include_patterns: list[str] = Field(
        default_factory = lambda:
        ["**/*.py", "**/*.ts", "**/*.tsx", "**/*.js", "**/*.go", "**/*.rs"]
    )
    exclude_patterns: list[str] = Field(
        default_factory = lambda: [
            "**/test_*.py",
            "**/*_test.py",
            "**/*_test.go",
            "**/*.spec.ts",
            "**/*.test.ts",
            "**/node_modules/**",
            "**/venv/**",
            "**/.venv/**",
            "**/__pycache__/**",
            "**/dist/**",
            "**/build/**",
            "**/.git/**",
            "**/vendor/**",
            "**/target/**",]
    )


class DocumentationSettings(BaseModel):
    """
    Settings for documentation type distribution and deduplication
    """
    redocument_after_days: int = 90
    type_weights: dict[str,
                       int] = Field(
                           default_factory = lambda: {
                               "function_doc": 35,
                               "cla
```

---

## File Overview

### config.py

**Purpose and Responsibility:**
This Python file defines a comprehensive configuration system for various components of the CodeWorm application, including logging settings (`DevLogSettings`), Ollama LLM connection settings (`OllamaSettings`), scheduling settings (`ScheduleSettings`), code analysis settings (`AnalyzerSettings`), documentation settings (`DocumentationSettings`), Redis and dashboard settings (`DashboardSettings`), and Telegram notification settings (`TelegramSettings`). The file also includes a `RepoEntry` model for configuring source repositories to be scanned.

**Key Exports or Public Interface:**
- **Models:** `DevLogSettings`, `OllamaSettings`, `ScheduleSettings`, `AnalyzerSettings`, `DocumentationSettings`, `RedisSettings`, `DashboardSettings`, `TelegramSettings`, and `RepoEntry`.
- **Imports:** Utilizes Pydantic for model validation, `yaml` for configuration file parsing, and `pathlib` for path manipulation.

**How it Fits in the Project:**
This file serves as a central hub for application settings. It is imported by other modules to access these configurations, ensuring consistency across different parts of the CodeWorm system. The use of Pydantic models with validation ensures that configuration data adheres to specified schemas, enhancing robustness and maintainability.

**Notable Design Decisions:**
- **Pydantic Models:** Each setting is encapsulated in a Pydantic model, providing type hints and validation.
- **Environment Variables:** Path expansion using `os.path.expandvars` and `Path.expanduser()` ensures that paths are correctly interpreted.
- **Type Hints and Annotations:** Extensive use of annotations (`Annotated`, `Field`) for better readability and maintainability.
- **Validation Rules:** Validation logic is embedded within models, ensuring that settings meet predefined criteria (e.g., minimum/maximum values).

---

*Generated by CodeWorm on 2026-02-28 15:19*
