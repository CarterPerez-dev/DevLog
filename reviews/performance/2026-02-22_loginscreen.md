# LoginScreen

**Type:** Performance Analysis
**Repository:** social-media-notes
**File:** frontend/app/login.tsx
**Language:** tsx
**Lines:** 14-105
**Complexity:** 14.0

---

## Source Code

```tsx
function LoginScreen() {
  const [isRegister, setIsRegister] = useState(false)
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [fullName, setFullName] = useState('')

  const login = useLogin()
  const register = useRegister()

  const handleSubmit = async () => {
    if (!email || !password) return

    try {
      if (isRegister) {
        await register.mutateAsync({
          email,
          password,
          full_name: fullName || undefined,
        })
        await login.mutateAsync({ username: email, password })
      } else {
        await login.mutateAsync({ username: email, password })
      }
      router.replace('/(tabs)')
    } catch {}
  }

  const isLoading = login.isPending || register.isPending

  return (
    <KeyboardAvoidingView
      style={styles.container}
      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
    >
      <View style={styles.form}>
        <Text style={styles.title}>
          {isRegister ? 'Create Account' : 'Sign In'}
        </Text>

        {isRegister && (
          <TextInput
            style={styles.input}
            placeholder="Name"
            placeholderTextColor="#444"
            value={fullName}
            onChangeText={setFullName}
            autoCapitalize="words"
          />
        )}

        <TextInput
          style={styles.input}
          placeholder="Email"
          placeholderTextColor="#444"
          value={email}
          onChangeText={setEmail}
          keyboardType="email-address"
          autoCapitalize="none"
          autoCorrect={false}
        />

        <TextInput
          style={styles.input}
          placeholder="Password"
          placeholderTextColor="#444"
          value={password}
          onChangeText={setPassword}
          secureTextEntry
        />

        <TouchableOpacity
          style={[styles.button, isLoading && styles.buttonDisabled]}
          onPress={handleSubmit}
          disabled={isLoading}
        >
          <Text style={styles.buttonText}>
            {isLoading ? '...' : isRegister ? 'Register' : 'Login'}
          </Text>
        </TouchableOpacity>

        <TouchableOpacity
          style={styles.switchButton}
          onPress={() => setIsRegister(!isRegister)}
        >
          <Text style={styles.switchText}>
            {isRegister ? 'Have an account? Sign in' : 'Need an account? Register'}
          </Text>
        </TouchableOpacity>
      </View>
    </KeyboardAvoidingView>
  )
}
```

---

## Performance Analysis

### Performance Analysis of `LoginScreen`

#### Time Complexity
The time complexity is primarily determined by the asynchronous operations within `handleSubmit`. The `register` and `login` mutations are both async, making this function O(1) for each call but potentially O(n) if multiple calls are made in sequence.

#### Space Complexity
Space complexity is O(1) as there are no significant data structures that grow with input size. However, the state management (using React hooks) introduces a small overhead due to the additional memory required for the `useState` variables and function references.

#### Bottlenecks or Inefficiencies
- **Redundant Mutations**: The code performs two separate mutations (`register` and `login`) in sequence, which could be optimized by combining them into one if possible.
- **Error Handling**: The catch block is empty, which might lead to silent failures. Consider logging errors for better debugging.

#### Optimization Opportunities
1. **Combine Mutations**: If the backend allows it, combine the registration and login steps into a single mutation to reduce the number of API calls.
2. **Improve Error Handling**: Add meaningful error handling to log or display user-friendly messages.
3. **Optimize State Management**: Ensure that state updates are necessary by removing unnecessary `setX` calls.

#### Resource Usage Concerns
- **Unclosed Connections**: Ensure that any network requests (mutations) are properly handled and do not result in unclosed connections.
- **Memory Leaks**: React hooks like `useState` should be used correctly to avoid memory leaks. Ensure all state variables are managed efficiently.

By addressing these points, you can enhance the performance and reliability of your login screen component.

---

*Generated by CodeWorm on 2026-02-22 00:17*
