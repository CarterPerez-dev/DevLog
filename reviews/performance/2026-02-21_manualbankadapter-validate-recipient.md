# ManualBankAdapter.validate_recipient

**Type:** Performance Analysis
**Repository:** stripe-referral
**File:** src/stripe_referral/adapters/manual.py
**Language:** python
**Lines:** 40-90
**Complexity:** 10.0

---

## Source Code

```python
def validate_recipient(
        self,
        recipient_data: dict[str,
                             Any]
    ) -> RecipientValidation:
        """
        Validate bank account information is present
        """
        required_fields = [
            "bank_account_number",
            "routing_number",
            "account_holder_name",
        ]

        missing_fields = [
            field for field in required_fields
            if field not in recipient_data
        ]

        if missing_fields:
            return RecipientValidation(
                valid = False,
                error =
                f"Missing required fields: {', '.join(missing_fields)}",
            )

        account_number = recipient_data.get("bank_account_number", "")
        if not account_number or len(account_number) < 4:
            return RecipientValidation(
                valid = False,
                error = "Invalid bank account number",
            )

        routing_number = recipient_data.get("routing_number", "")
        if not routing_number or len(routing_number) != 9:
            return RecipientValidation(
                valid = False,
                error = "Invalid routing number (must be 9 digits)",
            )

        account_holder_name = recipient_data.get(
            "account_holder_name",
            ""
        )
        if not account_holder_name or len(account_holder_name) < 2:
            return RecipientValidation(
                valid = False,
                error = "Invalid account holder name",
            )

        return RecipientValidation(valid = True)
```

---

## Performance Analysis

### Performance Analysis

**Time Complexity:** The function has a time complexity of \(O(4)\), which simplifies to \(O(1)\). This is because the operations are constant and do not depend on the size of `recipient_data`.

**Space Complexity:** The space complexity is also \(O(1)\) since no additional data structures that grow with input size are used.

**Bottlenecks or Inefficiencies:**
- **Redundant Operations:** Checking for missing fields, bank account number length, routing number digits, and account holder name length are all performed sequentially. While not inherently inefficient, this can be optimized by using a single pass if the checks are combined logically.
- **String Concatenations:** The error messages use string concatenation in multiple return statements, which can be costly for large strings.

**Optimization Opportunities:**
- Combine conditions to reduce redundant operations and improve readability. For example:
  ```python
  required_fields = [
      "bank_account_number",
      "routing_number",
      "account_holder_name",
  ]

  missing_fields = [field for field in required_fields if field not in recipient_data]
  
  if missing_fields or \
     (not recipient_data.get("bank_account_number") or len(recipient_data["bank_account_number"]) < 4) or \
     (not recipient_data.get("routing_number") or len(recipient_data["routing_number"]) != 9) or \
     (not recipient_data.get("account_holder_name") or len(recipient_data["account_holder_name"]) < 2):
      return RecipientValidation(
          valid = False,
          error = f"Missing required fields: {', '.join(missing_fields)}" if missing_fields else (
              "Invalid bank account number",
              "Invalid routing number (must be 9 digits)",
              "Invalid account holder name"
          )[len(missing_fields)]
      )
  
  return RecipientValidation(valid=True)
  ```

- Use f-strings for error messages to avoid multiple string concatenations.

**Resource Usage Concerns:**
- The function does not involve resource leaks or blocking calls, so no specific concerns in this area.

---

*Generated by CodeWorm on 2026-02-21 21:35*
