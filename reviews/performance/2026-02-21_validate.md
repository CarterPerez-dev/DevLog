# validate

**Type:** Performance Analysis
**Repository:** fullstack-template
**File:** stacks/go-react/go-backend/internal/config/config.go
**Language:** go
**Lines:** 248-290
**Complexity:** 13.0

---

## Source Code

```go
func validate(c *Config) error {
	if c.Database.URL == "" {
		return fmt.Errorf("DATABASE_URL is required")
	}

	if c.Redis.URL == "" {
		return fmt.Errorf("REDIS_URL is required")
	}

	if c.JWT.PrivateKeyPath == "" {
		return fmt.Errorf("JWT_PRIVATE_KEY_PATH is required")
	}

	if c.JWT.PublicKeyPath == "" {
		return fmt.Errorf("JWT_PUBLIC_KEY_PATH is required")
	}

	if c.CORS.AllowCredentials {
		for _, origin := range c.CORS.AllowedOrigins {
			if origin == "*" {
				return fmt.Errorf(
					"CORS wildcard '*' cannot be used with AllowCredentials",
				)
			}
		}
	}

	if c.App.Environment == "production" {
		if c.Otel.Enabled && c.Otel.Insecure {
			return fmt.Errorf("OTEL_INSECURE must be false in production")
		}
	}

	if c.Server.ReadTimeout <= 0 {
		return fmt.Errorf("server.read_timeout must be positive")
	}

	if c.Server.WriteTimeout <= 0 {
		return fmt.Errorf("server.write_timeout must be positive")
	}

	return nil
}
```

---

## Performance Analysis

### Performance Analysis

#### Time Complexity
The function `validate` has a time complexity of O(n), where n is the number of checks performed (in this case, 10). Each check involves string comparisons and condition evaluations.

#### Space Complexity
The space complexity is O(1) since no additional data structures are used that grow with input size. The function uses a fixed amount of memory for local variables.

#### Bottlenecks or Inefficiencies
- **Redundant Checks**: The function performs multiple checks on the same configuration fields (e.g., `c.CORS.AllowCredentials` and `c.CORS.AllowedOrigins`). This can be optimized by combining conditions.
- **Error Handling**: Each condition returns an error, which might lead to unnecessary function calls if only one check fails.

#### Optimization Opportunities
1. **Combine Conditions**: Combine the CORS checks into a single conditional block:
   ```go
   if c.CORS.AllowCredentials && "*" == strings.Join(c.CORS.AllowedOrigins, "") {
       return fmt.Errorf("CORS wildcard '*' cannot be used with AllowCredentials")
   }
   ```

2. **Return Early**: Return early from the function once an error is found to avoid unnecessary checks:
   ```go
   if c.Database.URL == "" {
       return fmt.Errorf("DATABASE_URL is required")
   }

   // Other checks...

   return nil
   ```

3. **Use Constants for Error Messages**: Define constants for common error messages to reduce repetition.

#### Resource Usage Concerns
- Ensure that all configuration values are properly validated and sanitized.
- Consider using a more efficient string comparison method if performance is critical.

By applying these optimizations, the function can be made more efficient and maintainable.

---

*Generated by CodeWorm on 2026-02-21 02:40*
