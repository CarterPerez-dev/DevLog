# SearchRequest.validate_date_range

**Type:** Performance Analysis
**Repository:** vuemantics
**File:** backend/schemas/search.py
**Language:** python
**Lines:** 95-107
**Complexity:** 5.0

---

## Source Code

```python
def validate_date_range(
        cls,
        v: datetime | None,
        info: ValidationInfo
    ) -> datetime | None:
        """
        Ensure date_to is after date_from if both provided
        """
        if v is not None and "date_from" in info.data:
            date_from = info.data["date_from"]
            if date_from is not None and v <= date_from:
                raise ValueError("date_to must be after date_from")
        return v
```

---

## Performance Analysis

### Performance Analysis

**Time Complexity:** The function has a time complexity of O(1), as it performs a fixed number of operations regardless of the input size.

**Space Complexity:** The space complexity is also O(1) since no additional data structures are used that scale with input size. However, dictionary lookups (`info.data["date_from"]`) and attribute checks can introduce small overhead.

**Bottlenecks or Inefficiencies:**
- **Redundant Check:** The function checks if `v` is not `None` before accessing `info.data["date_from"]`. This check is redundant because the subsequent condition already ensures that `v` is `None` or valid.
- **Dictionary Access:** Accessing a dictionary can be slightly costly. However, in this case, it's minimal.

**Optimization Opportunities:**
- Remove the redundant check for `v` being `None`.
- Consider using type hints and annotations to improve readability and maintainability.

```python
def validate_date_range(
        cls,
        v: datetime | None,
        info: ValidationInfo
    ) -> datetime | None:
    """
    Ensure date_to is after date_from if both provided
    """
    if "date_from" in info.data and (v is not None) and (date_from := info.data["date_from"]) is not None and v <= date_from:
        raise ValueError("date_to must be after date_from")
    return v
```

**Resource Usage Concerns:**
- No resource leaks or blocking calls are present.
- Ensure that `ValidationInfo` and `datetime` types are correctly managed elsewhere in the codebase.

This refactoring maintains simplicity while slightly improving readability.

---

*Generated by CodeWorm on 2026-02-21 22:38*
