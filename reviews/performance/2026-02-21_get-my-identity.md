# get_my_identity

**Type:** Performance Analysis
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/core/integrations/mcp/server.py
**Language:** python
**Lines:** 425-504
**Complexity:** 10.0

---

## Source Code

```python
async def get_my_identity() -> dict:
    """
    Get Carter's full identity profile including:
    - Basic info (name, age, background, role, goals)
    - Skills with proficiency levels
    - Interests and passion levels
    - Strengths and weaknesses
    - Brand voice and content preferences
    - Platform goals

    Use this to understand context about Carter when helping.
    """
    async with sessionmanager.session() as session:
        identity = await IdentityRepository.get_identity(session)

        return {
            "name": identity.name,
            "age": identity.age,
            "background": identity.background,
            "current_role": identity.current_role,
            "primary_goal": identity.primary_goal,
            "target_audience": identity.target_audience,
            "skills": [
                {
                    "skill": s.skill,
                    "proficiency": s.proficiency.value,
                    "years_experience": s.years_experience,
                    "context": s.context,
                }
                for s in identity.skills
            ],
            "interests": [
                {
                    "topic": i.topic,
                    "passion_level": i.passion_level.value,
                    "why": i.why,
                }
                for i in identity.interests
            ],
            "strengths": [
                {
                    "strength": s.strength,
                    "source": s.source.value,
                    "evidence": s.evidence,
                }
                for s in identity.strengths
            ],
            "weaknesses": [
                {
                    "weakness": w.weakness,
                    "impact": w.impact,
                    "workaround": w.workaround,
                }
                for w in identity.weaknesses
            ],
            "brand_voice": {
                "tone": identity.brand_voice.tone if identity.brand_voice else None,
                "sentence_structure": (
                    identity.brand_voice.sentence_structure
                    if identity.brand_voice
                    else None
                ),
                "uses_analogies": (
                    identity.brand_voice.uses_analogies
                    if identity.brand_voice
                    else None
                ),
            }
            if identity.brand_voice
            else None,
            "platform_goals": [
                {
                    "platform": g.platform.value,
                    "current_followers": g.current_followers,
                    "goal_followers": g.goal_followers,
                    "strategy": g.strategy,
                }
                for g in identity.platform_goals
            ],
        }
```

---

## Performance Analysis

### Performance Analysis

**Time Complexity:** The function has a time complexity of \(O(n)\), where \(n\) is the number of skills, interests, strengths, weaknesses, platform goals in `identity`. This is due to the list comprehensions iterating over each attribute.

**Space Complexity:** The space complexity is also \(O(n)\) as it depends on the size of the returned dictionary, which scales with the number of attributes and their nested structures.

**Bottlenecks or Inefficiencies:**
- **Redundant Checks:** The `if identity.brand_voice` check in the `brand_voice` section is redundant since the same condition is checked multiple times.
- **Unnecessary Iterations:** Each list comprehension iterates over potentially large collections, which can be costly if these attributes are frequently updated.

**Optimization Opportunities:**
1. **Combine Conditions:** Combine the nested `if` checks into a single conditional block to reduce redundancy.
2. **Lazy Evaluation:** Use lazy evaluation or generator expressions where possible to avoid unnecessary memory allocation for large lists.
3. **Caching:** Cache the result of `IdentityRepository.get_identity(session)` if it is frequently accessed and does not change often.

**Resource Usage Concerns:**
- Ensure that `sessionmanager.session()` properly handles context management to avoid resource leaks.
- Consider using a connection pool for database connections to improve performance and reduce overhead.

By addressing these points, you can optimize the function's efficiency and ensure better resource utilization.

---

*Generated by CodeWorm on 2026-02-21 17:39*
