# ProgressStatsSection

**Type:** Performance Analysis
**Repository:** CertGames-Core
**File:** frontend/user-app/src/domains/study-hub/ui/components/progressStatsSection.tsx
**Language:** tsx
**Lines:** 17-99
**Complexity:** 22.0

---

## Source Code

```tsx
function ProgressStatsSection({
  activeCertification,
  user,
}: ProgressStatsSectionProps): React.ReactElement {
  const certConfig = React.useMemo(() => {
    return activeCertification !== null && activeCertification !== undefined
      ? (getCertificationConfig(activeCertification) ?? null)
      : null;
  }, [activeCertification]);

  const testCategory = certConfig?.testCategory;

  const stats = useCertificationPerformance(user?._id, testCategory);

  const isLoading = stats === undefined;

  const testsCompleted = stats?.unique_tests ?? 0;
  const totalTests = stats?.total_tests ?? 10;
  const averageScore = stats?.average_score ?? 0;
  const bestScore = stats?.best_score ?? 0;
  const completionRate = stats?.completion_rate ?? 0;

  const hasActivity = (stats?.total_attempts ?? 0) > 0;

  if (isLoading) {
    return (
      <section className={styles.statsStrip}>
        <div className={styles.loadingText}>Loading stats...</div>
      </section>
    );
  }

  return (
    <section className={styles.statsStrip}>
      <div className={styles.statsRow}>
        <div className={styles.stat}>
          <span className={styles.statValue}>
            {testsCompleted}
            <span className={styles.statDivider}>/</span>
            {totalTests}
          </span>
          <span className={styles.statLabel}>Completed</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.statValue}>
            {hasActivity ? `${averageScore.toFixed(1)}%` : '--'}
          </span>
          <span className={styles.statLabel}>Avg Score</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.statValue}>
            {hasActivity ? `${bestScore.toFixed(1)}%` : '--'}
          </span>
          <span className={styles.statLabel}>Best</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.statValue}>
            {stats?.total_attempts ?? 0}
          </span>
          <span className={styles.statLabel}>Attempts</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.completionValue}>
            {completionRate.toFixed(0)}%
          </span>
          <span className={styles.statLabel}>Progress</span>
        </div>
      </div>
    </section>
  );
}
```

---

## Performance Analysis

### Performance Analysis

#### Time Complexity
The time complexity of this function is O(1), as it performs a fixed number of operations regardless of the input size.

#### Space Complexity
Space complexity is also O(1) since no additional space that scales with input size is used. The `React.useMemo` and `useCertificationPerformance` hooks are called once per render, but they do not introduce significant memory overhead.

#### Bottlenecks or Inefficiencies
- **Redundant Operations**: The `stats` object properties are accessed multiple times (e.g., `testsCompleted`, `totalTests`, etc.). This can be optimized by storing these values in local variables.
- **Conditional Rendering**: The `isLoading` check is redundant since the component structure already handles loading states.

#### Optimization Opportunities
1. **Memoize Local Variables**:
   ```tsx
   const { unique_tests, total_tests, average_score, best_score, completion_rate, total_attempts } = stats ?? {};
   ```

2. **Simplify Conditional Rendering**:
   Remove redundant `isLoading` check by directly rendering the loading state in the component structure.

#### Resource Usage Concerns
- Ensure that `getCertificationConfig` and `useCertificationPerformance` are optimized for performance.
- Consider caching `stats` if it is fetched repeatedly with the same parameters to avoid unnecessary API calls.

By implementing these optimizations, you can improve both readability and efficiency of the component.

---

*Generated by CodeWorm on 2026-02-21 00:15*
