# SettingsRow

**Type:** Security Review
**Repository:** ios-test
**File:** red-recon/app/(app)/(tabs)/settings.tsx
**Language:** tsx
**Lines:** 18-74
**Complexity:** 12.0

---

## Source Code

```tsx
function SettingsRow({
  icon,
  label,
  subtitle,
  onPress,
  rightElement,
  isDestructive,
}: {
  icon: React.ReactNode
  label: string
  subtitle?: string
  onPress?: () => void
  rightElement?: React.ReactNode
  isDestructive?: boolean
}): React.ReactElement {
  return (
    <Stack
      flexDirection="row"
      alignItems="center"
      justifyContent="space-between"
      paddingVertical="$4"
      paddingHorizontal="$4"
      pressStyle={onPress ? { backgroundColor: '$bgSurface75' } : undefined}
      onPress={onPress}
    >
      <XStack alignItems="center" gap="$3" flex={1}>
        <Stack
          width={36}
          height={36}
          borderRadius="$2"
          backgroundColor={isDestructive ? 'rgba(220, 38, 38, 0.12)' : '$bgSurface200'}
          alignItems="center"
          justifyContent="center"
        >
          {icon}
        </Stack>
        <YStack flex={1}>
          <Text
            fontSize={15}
            fontWeight="500"
            color={isDestructive ? '$errorDefault' : '$textDefault'}
            fontFamily="$body"
          >
            {label}
          </Text>
          {subtitle && (
            <Text fontSize={12} color="$textMuted" fontFamily="$body" marginTop="$1">
              {subtitle}
            </Text>
          )}
        </YStack>
      </XStack>
      {rightElement ??
        (onPress && <ChevronRight size={18} color={colors.textMuted.val} />)}
    </Stack>
  )
}
```

---

## Security Review

### Security Review for `SettingsRow` Component

#### Vulnerabilities and Severity:

1. **Info: Input Validation Gaps**
   - **Line 7**: The `onPress` prop is not validated, which could allow malicious users to inject event handlers.
   - **Severity: Info**

2. **Info: Hardcoded Colors**
   - **Lines 9-10 and 38**: Hardcoded color values are used without dynamic checks or validation.
   - **Severity: Info**

#### Attack Vectors:

- **XSS via `onPress` Prop**:
  An attacker could inject malicious JavaScript into the `onPress` prop, leading to potential XSS attacks.

#### Recommended Fixes:

1. **Input Validation for `onPress` Prop**:
   ```tsx
   onPress={typeof onPress === 'function' ? onPress : undefined}
   ```

2. **Dynamic Color Values**:
   Use dynamic color values based on state or props instead of hardcoded colors.
   ```tsx
   const destructiveColor = isDestructive ? '$errorDefault' : '$textMuted';
   <Text fontSize={15} fontWeight="500" color={destructiveColor} fontFamily="$body">
     {label}
   </Text>
   ```

#### Overall Security Posture:

The current implementation lacks robust input validation and uses hardcoded values. By implementing the suggested fixes, you can mitigate potential XSS risks and improve the overall security posture of your component.

**Severity Ratings:**
- **Critical**: None
- **High**: None
- **Medium**: 1 (XSS via `onPress` prop)
- **Low**: 1 (Hardcoded colors)
- **Info**: 2

By addressing these issues, you can enhance the security of your application.

---

*Generated by CodeWorm on 2026-02-21 14:45*
