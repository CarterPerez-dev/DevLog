# payout

**Type:** Code Evolution
**Repository:** stripe-referral
**File:** src/stripe_referral/schemas/payout.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: bfb52633
Message: feat: Done
Author: CarterPerez-dev
File: src/stripe_referral/schemas/payout.py
Change type: new file

Diff:
@@ -0,0 +1,151 @@
+"""
+â’¸AngelaMos | 2025 | CertGames.com
+Pydantic schemas for payout operations
+"""
+
+from typing import Any
+
+from pydantic import (
+    BaseModel,
+    Field,
+    field_validator,
+)
+from ..config.constants import (
+    CURRENCY_CODE_LENGTH,
+    MAX_CONVERSION_WINDOW_DAYS,
+    MAX_MAX_REWARDS_PER_USER,
+    MAX_PROGRAM_KEY_LENGTH,
+    MAX_PROGRAM_NAME_LENGTH,
+    MAX_USER_ID_LENGTH,
+    MIN_CONVERSION_WINDOW_DAYS,
+    MIN_MAX_REWARDS_PER_USER,
+    MIN_PAYOUT_AMOUNT,
+    MIN_REWARD_AMOUNT,
+)
+from ..config.enums import (
+    AdapterType,
+    CurrencyCode,
+    RewardType,
+)
+
+
+class ProcessPayoutRequest(BaseModel):
+    """
+    Request schema for processing payout
+    """
+    user_id: str = Field(
+        ...,
+        min_length = 1,
+        max_length = MAX_USER_ID_LENGTH
+    )
+    amount: float = Field(..., ge = MIN_PAYOUT_AMOUNT)
+    recipient_data: dict[str, Any]
+
+    @field_validator("user_id")
+    @classmethod
+    def validate_no_whitespace(cls, v: str) -> str:
+        """
+        Ensure no leading/trailing whitespace
+        """
+        return v.strip()
+
+
+class ProcessPayoutResponse(BaseModel):
+    """
+    Response schema for payout processing
+    """
+    success: bool
+    transaction_id: str | None = None
+    error: str | None = None
+
+
+class RecipientValidationRequest(BaseModel):
+    """
+    Request schema for recipient validation
+    """
+    recipient_data: dict[str, Any]
+
+
+class RecipientValidationResponse(BaseModel):
+    """
+    Response schema for recipient validation
+    """
+    valid: bool
+    error: str | None = None
+
+
+class PayoutInfoResponse(BaseModel):
+    """
+    Response schema for payout information
+    """
+    id: int
+    user_id: str
+    amount: float
+    currency: str
+    status: str
+    adapter_type: str
+    processed_at: str | None = None
+    external_transaction_id: str | None = None
+
+
+class CreateProgramRequest(BaseModel):
+    """
+    Request schema for creating referral program
+    """
+    name: str = Field(
+        ...,
+        min_length = 1,
+        max_length = MAX_PROGRAM_NAME_LENGTH
+    )
+    program_key: str = Field(
+        ...,
+        min_length = 1,
+        max_length = MAX_PROGRAM_KEY_LENGTH
+    )
+    reward_amount: float = Field(..., ge = MIN_REWARD_AMOUNT)
+    reward_currency: str = Field(
+        default = CurrencyCode.USD.value,
+        min_length = CURRENCY_CODE_LENGTH,
+        max_length = CURRENCY_CODE_LENGTH
+    )
+    reward_type: str = Field(default = RewardType.ONE_TIME.value)
+    adapter_type: str = Field(default = AdapterType.MANUAL.value)
+    max_rewards_per_user: int | None = Field(
+        None,
+        ge = MIN_MAX_REWARDS_PER_USER,
+        le = MAX_MAX_REWARDS_PER_USER
+    )
+    conversion_window_days: int | None = Field(
+        None
```

---

## Code Evolution

### Change Analysis for Commit `bfb52633`

**What was Changed:**
The commit introduces a new file `payout.py` containing Pydantic schemas for various payout-related operations, including request and response models. The file defines classes like `ProcessPayoutRequest`, `ProcessPayoutResponse`, `RecipientValidationRequest`, `RecipientValidationResponse`, `PayoutInfoResponse`, `CreateProgramRequest`, and `ProgramInfoResponse`.

**Why it was Likely Changed:**
This change likely aims to standardize the data structures for handling payout operations, ensuring consistency and validation across the application. The introduction of Pydantic models with field validators ensures that input data is validated against predefined rules, improving robustness.

**Impact on Behavior:**
These schemas will now be used in APIs or services related to payouts and program management. They enforce strict data validation, which can prevent errors caused by invalid inputs. For example, `ProcessPayoutRequest` enforces minimum length constraints for the `user_id`, ensuring it does not contain leading/trailing whitespace.

**Risks or Concerns:**
- **Validation Complexity:** While validation is crucial, overly complex validators might introduce performance overhead.
- **Deprecation of Old Code:** If this file replaces old, ad-hoc data handling logic, ensure all existing code that interacts with payout operations updates to use these new schemas.
- **Consistency Across Services:** Ensure that all services and APIs using these schemas are updated accordingly to maintain consistency.

---

*Generated by CodeWorm on 2026-02-23 09:15*
