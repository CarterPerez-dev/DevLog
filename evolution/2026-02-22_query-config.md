# query.config

**Type:** Code Evolution
**Repository:** fullstack-template
**File:** frontends/react-native-ios/src/core/api/query.config.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: bfe947fa
Message: ios fixes - F*** MMKV btw ðŸ™„
Author: CarterPerez-dev
File: frontends/react-native-ios/src/core/api/query.config.ts
Change type: modified

Diff:
@@ -6,7 +6,7 @@
 import { createAsyncStoragePersister } from '@tanstack/query-async-storage-persister'
 import { MutationCache, QueryCache, QueryClient } from '@tanstack/react-query'
 import { QUERY_CONFIG } from '@/core/config'
-import { queryClientMMKVStorage } from '@/core/storage'
+import { queryClientStorage } from '@/core/storage'
 import { ApiError, ApiErrorCode } from './errors'
 
 const NO_RETRY_ERROR_CODES: readonly ApiErrorCode[] = [
@@ -111,6 +111,6 @@ export const queryClient = new QueryClient({
 })
 
 export const queryClientPersister = createAsyncStoragePersister({
-  storage: queryClientMMKVStorage,
+  storage: queryClientStorage,
   key: 'query-cache',
 })

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
In the file `frontends/react-native-ios/src/core/api/query.config.ts`, lines 6 and 111 were modified:
- The import statement for `queryClientMMKVStorage` was changed to `queryClientStorage`.
- The usage of `queryClientMMKVStorage` in `createAsyncStoragePersister` was replaced with `queryClientStorage`.

**Why it was Likely Changed:**
This change likely indicates a refactoring or update where the storage mechanism used by the query client has been updated from MMKV (a key-value store) to another storage solution. The commit message "ios fixes - F*** MMKV btw ðŸ™„" suggests that this might be due to issues with MMKV on iOS, possibly related to performance, compatibility, or other bugs.

**Impact on Behavior:**
The change impacts how the query client persists its state. If `queryClientStorage` is a different storage solution (e.g., AsyncStorage), it will affect how data is stored and retrieved, potentially impacting performance or data integrity depending on the new storage mechanism.

**Risks or Concerns:**
- **Data Migrating Issues:** If MMKV was storing specific types of data that `queryClientStorage` cannot handle, there might be risks associated with migrating existing data.
- **API Compatibility:** Ensure that all parts of the application that depend on query client behavior are compatible with the new storage mechanism.

Overall, this change appears to be a necessary update to address issues with MMKV and improve the application's stability or performance.

---

*Generated by CodeWorm on 2026-02-22 14:42*
