# messages

**Type:** Code Evolution
**Repository:** vuemantics
**File:** backend/core/websocket/messages.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: 4d33b24a
Message: feat: dramatiq - bulkupload
Author: CarterPerez-dev
File: backend/core/websocket/messages.py
Change type: modified

Diff:
@@ -112,6 +112,33 @@ class BatchProgressUpdate(BaseModel):
     timestamp: datetime = Field(default_factory = datetime.utcnow)
 
 
+class FileProgressPayload(BaseModel):
+    """
+    Individual file processing progress within a batch
+    """
+    batch_id: str = Field(description = "Batch UUID")
+    upload_id: str = Field(description = "Upload UUID")
+    file_name: str = Field(description = "Original filename")
+    file_size: int = Field(description = "File size in bytes")
+    progress_percentage: int = Field(
+        ge = 0,
+        le = 100,
+        description = "Processing progress"
+    )
+    status: Literal["processing", "completed", "failed"] = Field(
+        description = "File processing status"
+    )
+
+
+class FileProgressUpdate(BaseModel):
+    """
+    Per-file progress update message
+    """
+    action: Literal["file_progress"] = "file_progress"
+    payload: FileProgressPayload
+    timestamp: datetime = Field(default_factory = datetime.utcnow)
+
+
 class AuthSuccess(BaseModel):
     """
     WebSocket authentication succeeded
@@ -140,6 +167,7 @@ ServerMessage = (
     | UploadCompleted
     | UploadFailed
     | BatchProgressUpdate
+    | FileProgressUpdate
     | AuthSuccess
     | AuthError
     | Heartbeat

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The code added two new classes, `FileProgressPayload` and `FileProgressUpdate`, to the `backend/core/websocket/messages.py` file. These classes are used to represent individual file processing progress within a batch and per-file progress update messages, respectively.

**Why it was Likely Changed:**
This change likely introduces support for detailed tracking of file processing during bulk uploads in the Dramatiq messaging system. The new classes provide structured data for each file's upload status, size, and progress percentage, enabling more granular control and monitoring of batched file operations.

**Impact on Behavior:**
The addition of these classes will allow the backend to send detailed updates about individual files within a batch upload process. This can improve user experience by providing real-time feedback on which files are being processed and their current status.

**Risks or Concerns:**
- **Complexity Increase:** Adding more classes may increase code complexity, requiring careful management of these new models.
- **Performance Impact:** Frequent updates for each file could potentially impact performance if not optimized properly.
- **API Stability:** New message types should be thoroughly tested to ensure they do not break existing workflows or introduce bugs.

Overall, this change enhances the system's ability to handle and report on bulk uploads more effectively.

---

*Generated by CodeWorm on 2026-02-23 10:18*
