# useChecklist

**Type:** Code Evolution
**Repository:** angelamos-operations
**File:** CarterOS-Client/src/aspects/life-manager/facets/checklist/hooks/useChecklist.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: dae6cf01
Message: add checklist tool
Author: CarterPerez-dev
File: CarterOS-Client/src/aspects/life-manager/facets/checklist/hooks/useChecklist.ts
Change type: new file

Diff:
@@ -0,0 +1,171 @@
+// ===================
+// © AngelaMos | 2026
+// useChecklist.ts
+// ===================
+
+import {
+  useQuery,
+  useMutation,
+  useQueryClient,
+} from '@tanstack/react-query'
+import { toast } from 'sonner'
+import { apiClient } from '@/core/api'
+import { API_ENDPOINTS, QUERY_KEYS } from '@/config'
+import type {
+  ChecklistItem,
+  ChecklistItemCreateRequest,
+  ChecklistItemUpdateRequest,
+  ChecklistItemListResponse,
+  ChecklistDayResponse,
+  ChecklistLogEntry,
+  ChecklistLogUpdateRequest,
+  ChecklistStatsResponse,
+} from '../types'
+
+export const useChecklistItems = () => {
+  return useQuery({
+    queryKey: QUERY_KEYS.CHECKLIST.ITEMS(),
+    queryFn: async () => {
+      const { data } = await apiClient.get<ChecklistItemListResponse>(
+        API_ENDPOINTS.CHECKLIST.ITEMS,
+      )
+      return data
+    },
+  })
+}
+
+export const useChecklistDay = (date: string) => {
+  return useQuery({
+    queryKey: QUERY_KEYS.CHECKLIST.DAY(date),
+    queryFn: async () => {
+      const { data } = await apiClient.get<ChecklistDayResponse>(
+        API_ENDPOINTS.CHECKLIST.LOG,
+        { params: { log_date: date } },
+      )
+      return data
+    },
+  })
+}
+
+export const useChecklistStats = () => {
+  return useQuery({
+    queryKey: QUERY_KEYS.CHECKLIST.STATS(),
+    queryFn: async () => {
+      const { data } = await apiClient.get<ChecklistStatsResponse>(
+        API_ENDPOINTS.CHECKLIST.STATS,
+      )
+      return data
+    },
+  })
+}
+
+export const useCreateChecklistItem = () => {
+  const queryClient = useQueryClient()
+
+  return useMutation({
+    mutationFn: async (payload: ChecklistItemCreateRequest) => {
+      const { data } = await apiClient.post<ChecklistItem>(
+        API_ENDPOINTS.CHECKLIST.ITEMS,
+        payload,
+      )
+      return data
+    },
+    onSuccess: (newItem) => {
+      queryClient.setQueryData<ChecklistItemListResponse>(
+        QUERY_KEYS.CHECKLIST.ITEMS(),
+        (old) => {
+          if (!old) return { items: [newItem] }
+          return { items: [...old.items, newItem] }
+        },
+      )
+      queryClient.invalidateQueries({ queryKey: QUERY_KEYS.CHECKLIST.ALL })
+      toast.success('Checklist item created')
+    },
+    onError: (error) => {
+      toast.error(error.message || 'Failed to create checklist item')
+    },
+  })
+}
+
+export const useUpdateChecklistItem = () => {
+  const queryClient = useQueryClient()
+
+  return useMutation({
+    mutationFn: async ({ id, data }: { id: string; data: ChecklistItemUpdateRequest }) => {
+      const { data: result } = await apiClient.put<ChecklistItem>(
+        API_ENDPOINTS.CHECKLIST.ITEM(id),
+        data,
+      )
+      return result
+    },
+    onSuccess: (updatedItem) => {
+      queryClient.setQueryData<ChecklistItemListR
```

---

## Code Evolution

### Change Analysis

**What was Changed:**
A new file `useChecklist.ts` was added to the `CarterOS-Client/src/aspects/life-manager/facets/checklist/hooks` directory, introducing several React Query hooks for managing a checklist system. The hooks include fetching items and stats, creating, updating, and deleting checklist items, as well as updating log entries.

**Why it was Likely Changed:**
This change likely aims to provide a robust set of tools for managing a checklist within the application. By using `@tanstack/react-query`, these hooks handle data fetching and mutation operations efficiently, ensuring that state updates are consistent across the client-side.

**Impact on Behavior:**
The addition of these hooks will enable dynamic interaction with the checklist system, allowing users to create, update, delete items, and log entries seamlessly. This enhances user experience by providing real-time feedback through `toast` notifications and ensures data integrity via query invalidation.

**Risks or Concerns:**
- **Data Consistency:** Ensuring that all mutations correctly update the state is crucial. The use of `setQueryData` to modify the state based on mutation outcomes should be thoroughly tested.
- **Error Handling:** While error handling is implemented, it's important to ensure comprehensive coverage for edge cases and unexpected errors.

Overall, this change significantly improves the application’s functionality by providing a structured way to manage checklist operations.

---

*Generated by CodeWorm on 2026-02-22 19:43*
