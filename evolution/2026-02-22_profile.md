# profile

**Type:** Code Evolution
**Repository:** fullstack-template
**File:** frontends/react-native-ios/app/(app)/profile.tsx
**Language:** tsx
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```tsx
Commit: bfe947fa
Message: ios fixes - F*** MMKV btw ðŸ™„
Author: CarterPerez-dev
File: frontends/react-native-ios/app/(app)/profile.tsx
Change type: new file

Diff:
@@ -0,0 +1,224 @@
+/**
+ * @AngelaMos | 2026
+ * profile.tsx
+ */
+
+import { useChangePassword, useCurrentUser } from '@/api/hooks'
+import { useUpdateProfile } from '@/api/hooks/useUsers'
+import { Button, DottedBackground, Input, PasswordInput } from '@/shared/components'
+import { haptics } from '@/shared/utils'
+import { router } from 'expo-router'
+import { ArrowLeft } from 'lucide-react-native'
+import type React from 'react'
+import { useEffect, useState } from 'react'
+import { Alert, KeyboardAvoidingView, Platform, ScrollView } from 'react-native'
+import { SafeAreaView } from 'react-native-safe-area-context'
+import { Stack, Text, YStack } from 'tamagui'
+import { colors } from '@/theme/tokens'
+
+export default function ProfileScreen(): React.ReactElement {
+  const { data: user } = useCurrentUser()
+  const updateProfile = useUpdateProfile()
+  const changePassword = useChangePassword()
+
+  const [fullName, setFullName] = useState('')
+  const [currentPassword, setCurrentPassword] = useState('')
+  const [newPassword, setNewPassword] = useState('')
+  const [confirmPassword, setConfirmPassword] = useState('')
+
+  useEffect(() => {
+    if (user) {
+      setFullName(user.full_name ?? '')
+    }
+  }, [user])
+
+  const handleSaveProfile = (): void => {
+    if (!fullName.trim()) {
+      haptics.error()
+      Alert.alert('Error', 'Please enter your name')
+      return
+    }
+
+    updateProfile.mutate(
+      { full_name: fullName.trim() },
+      {
+        onSuccess: () => {
+          haptics.success()
+          Alert.alert('Success', 'Profile updated')
+        },
+        onError: (err) => {
+          haptics.error()
+          Alert.alert('Error', err.message)
+        },
+      }
+    )
+  }
+
+  const handleChangePassword = (): void => {
+    if (!currentPassword || !newPassword || !confirmPassword) {
+      haptics.error()
+      Alert.alert('Error', 'Please fill in all password fields')
+      return
+    }
+
+    if (newPassword !== confirmPassword) {
+      haptics.error()
+      Alert.alert('Error', 'New passwords do not match')
+      return
+    }
+
+    if (newPassword.length < 8) {
+      haptics.error()
+      Alert.alert('Error', 'Password must be at least 8 characters')
+      return
+    }
+
+    changePassword.mutate(
+      { current_password: currentPassword, new_password: newPassword },
+      {
+        onSuccess: () => {
+          haptics.success()
+          Alert.alert('Success', 'Password changed')
+          setCurrentPassword('')
+          setNewPassword('')
+          setConfirmPassword('')
+        },
+        onError: (err) => {
+          haptics.error()
+          Alert.alert('Error', err.message)
+        },
+      }
+    )
+  }
+
+  return (
+    <DottedBackground>
+      <SafeAreaView style={{ flex: 1 }} edges={['top']}>
+    
```

---

## Code Evolution

### Change Analysis for Commit `bfe947fa`

**What Changed:**
The commit introduces a new file, `profile.tsx`, which implements a profile management screen in the React Native iOS app. The file includes state management for full name and password fields, as well as hooks to interact with user data via MMKV (likely a local storage solution). It also contains validation logic for saving changes and changing passwords.

**Why Changed:**
This change was likely made to provide users with the ability to manage their profile information directly within the app. The introduction of `useChangePassword` and `useUpdateProfile` hooks suggests that user authentication and data management are being handled more robustly, possibly addressing previous issues or improving the user experience.

**Impact on Behavior:**
The new screen allows users to update their full name and change their password securely. Upon successful updates, appropriate alerts notify the user of success or failure. The use of `haptics` provides feedback through touch feedback, enhancing the user interaction experience.

**Risks or Concerns:**
- **MMKV Dependency:** The comment "F*** MMKV btw ðŸ™„" suggests potential issues with this storage solution, which could introduce risks if not managed properly.
- **Password Complexity:** The password validation checks (minimum length and matching) are basic but effective. However, more complex validation might be necessary for security.
- **Error Handling:** While the code handles some errors, it may benefit from more detailed error messages or logging to aid in debugging.

Overall, this change significantly enhances user management capabilities while introducing potential risks that should be monitored.

---

*Generated by CodeWorm on 2026-02-22 13:22*
