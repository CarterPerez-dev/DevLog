# main

**Type:** Code Evolution
**Repository:** angelamos-3d
**File:** backend/app/main.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: a61e4cd8
Message: feat: complete mvp v1.0.0
Author: CarterPerez-dev
File: backend/app/main.py
Change type: new file

Diff:
@@ -0,0 +1,69 @@
+"""
+Â©AngelaMos | 2026
+main.py
+"""
+
+from fastapi import FastAPI, Response
+from fastapi.middleware.cors import CORSMiddleware
+
+from app.config import API_PREFIX, OPENAPI_TAGS, settings
+from app.core.schemas import AppInfoResponse
+from app.chat import router as chat_router
+from app.stt import router as stt_router
+from app.tts import router as tts_router
+from app.wake import router as wake_router
+
+
+def create_app() -> FastAPI:
+    """
+    Application factory
+    """
+    app = FastAPI(
+        title = settings.APP_NAME,
+        summary = settings.APP_SUMMARY,
+        description = settings.APP_DESCRIPTION,
+        version = settings.APP_VERSION,
+        contact = {
+            "name": settings.APP_CONTACT_NAME,
+            "email": settings.APP_CONTACT_EMAIL,
+        },
+        license_info = {
+            "name": settings.APP_LICENSE_NAME,
+            "url": settings.APP_LICENSE_URL,
+        },
+        openapi_tags = OPENAPI_TAGS,
+        openapi_version = "3.1.0",
+        openapi_url = "/openapi.json",
+        docs_url = "/docs",
+        redoc_url = "/redoc",
+    )
+
+    app.add_middleware(
+        CORSMiddleware,
+        allow_origins = ["*"],
+        allow_credentials = True,
+        allow_methods = ["*"],
+        allow_headers = ["*"],
+    )
+
+    @app.get("/", response_model = AppInfoResponse, tags = ["root"])
+    async def root() -> AppInfoResponse:
+        return AppInfoResponse(
+            name = settings.APP_NAME,
+            version = settings.APP_VERSION,
+            docs_url = "/docs",
+        )
+
+    @app.get("/health", tags = ["health"])
+    async def health() -> Response:
+        return Response(content = "1", media_type = "text/plain")
+
+    app.include_router(tts_router, prefix = API_PREFIX, tags = ["tts"])
+    app.include_router(stt_router, prefix = API_PREFIX, tags = ["stt"])
+    app.include_router(chat_router, prefix = API_PREFIX, tags = ["chat"])
+    app.include_router(wake_router, prefix = API_PREFIX, tags = ["wakeword"])
+
+    return app
+
+
+app = create_app()

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The code introduces a new file `main.py` for initializing and configuring an FastAPI application. The file includes the creation of the application using an `Application factory` pattern, configuration settings from `settings`, and integration of various routers (`chat`, `stt`, `tts`, `wake`) with appropriate prefixes and tags.

**Why it was Likely Changed:**
This change likely represents a significant milestone in the development process, marking the completion of MVP v1.0.0. The introduction of an application factory pattern enhances modularity and reusability, while detailed configuration settings ensure consistent behavior across different environments.

**Impact on Behavior:**
The new `main.py` file sets up the FastAPI application with a root endpoint providing basic information about the app and a health check endpoint. It integrates multiple sub-modules (chat, STT, TTS, wake) into the main application, making it easier to manage and extend functionalities.

**Risks or Concerns:**
- The `allow_origins = ["*"]` setting in CORS middleware could pose security risks if not properly managed.
- The use of `settings` for configuration might lead to tight coupling if settings are not well-managed or documented.
- Ensuring all routers (`chat`, `stt`, `tts`, `wake`) are correctly configured and do not conflict with each other is crucial.

Overall, this change significantly improves the structure and maintainability of the application.

---

*Generated by CodeWorm on 2026-02-23 18:53*
