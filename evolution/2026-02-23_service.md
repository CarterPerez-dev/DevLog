# service

**Type:** Code Evolution
**Repository:** angelamos-3d
**File:** backend/app/tts/service.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: a61e4cd8
Message: feat: complete mvp v1.0.0
Author: CarterPerez-dev
File: backend/app/tts/service.py
Change type: new file

Diff:
@@ -0,0 +1,45 @@
+"""
+Â©AngelaMos | 2026
+service.py
+"""
+
+import io
+
+import edge_tts
+
+from app.config import settings
+from app.core.exceptions import EmptyTextError
+from app.tts.schemas import VoiceInfo
+
+
+async def synthesize(text: str) -> bytes:
+    """
+    Synthesize text to speech audio.
+    """
+    if not text.strip():
+        raise EmptyTextError()
+
+    communicate = edge_tts.Communicate(text, settings.TTS_VOICE)
+
+    buffer = io.BytesIO()
+    async for chunk in communicate.stream():
+        if chunk["type"] == "audio":
+            buffer.write(chunk["data"])
+
+    buffer.seek(0)
+    return buffer.read()
+
+
+async def list_voices() -> list[VoiceInfo]:
+    """
+    Get all available Edge TTS voices.
+    """
+    voices = await edge_tts.list_voices()
+    return [
+        VoiceInfo(
+            voice_id = v["ShortName"],
+            name = v["FriendlyName"],
+            gender = v["Gender"],
+            locale = v["Locale"],
+        ) for v in voices
+    ]

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
A new file `service.py` was added to the repository, containing two asynchronous functions: `synthesize` and `list_voices`. The `synthesize` function takes a text input, checks for empty content, and uses Edge TTS to convert it to speech. The `list_voices` function retrieves all available voices from Edge TTS.

**Why It Was Likely Changed:**
This change was likely made as part of the MVP v1.0.0 release (indicated by the commit message). The introduction of these functions supports text-to-speech functionality and voice management, essential for implementing speech synthesis capabilities in the application.

**Impact on Behavior:**
- `synthesize` allows users to convert any given text into audio.
- `list_voices` provides a list of available voices, enabling customization based on user preferences or requirements.

**Risks or Concerns:**
- The function relies on external services (Edge TTS), which could introduce latency and dependency issues if the service is unavailable.
- Error handling is basic; only empty text errors are currently managed. Additional error checks should be considered to handle other potential issues, such as network failures or authentication problems.

Overall, this change significantly enhances the application's functionality by adding speech synthesis capabilities.

---

*Generated by CodeWorm on 2026-02-23 19:04*
