# auth.store

**Type:** Code Evolution
**Repository:** fullstack-template
**File:** frontends/react-native-ios/src/core/lib/auth.store.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: bfe947fa
Message: ios fixes - F*** MMKV btw ðŸ™„
Author: CarterPerez-dev
File: frontends/react-native-ios/src/core/lib/auth.store.ts
Change type: modified

Diff:
@@ -7,7 +7,7 @@ import { create } from 'zustand'
 import { createJSONStorage, persist } from 'zustand/middleware'
 import { type UserResponse, UserRole } from '@/api/types'
 import { APP_CONFIG } from '@/core/config'
-import { zustandMMKVStorage } from '@/core/storage'
+import { zustandStorage } from '@/core/storage'
 
 interface AuthState {
   user: UserResponse | null
@@ -59,7 +59,7 @@ export const useAuthStore = create<AuthStore>()(
     }),
     {
       name: APP_CONFIG.AUTH_STORAGE_KEY,
-      storage: createJSONStorage(() => zustandMMKVStorage),
+      storage: createJSONStorage(() => zustandStorage),
       partialize: (state) =>
         ({
           user: state.user,
@@ -67,6 +67,7 @@ export const useAuthStore = create<AuthStore>()(
         }) as AuthStore,
       onRehydrateStorage: () => (state) => {
         state?.setHasHydrated(true)
+        state?.setLoading(false)
       },
     }
   )

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The code changes the import statement for `zustandStorage` from `zustandMMKVStorage`. Additionally, a line is added to set `state?.setLoading(false)` in the `onRehydrateStorage` callback.

**Why it Was Likely Changed:**
This change likely aims to simplify storage handling by removing MMKV-specific code and possibly addressing an issue where the loading state was not being properly managed during rehydration. The removal of `zustandMMKVStorage` suggests a shift towards using a more generic or different storage mechanism, which could be part of broader changes in how the application manages its state.

**Impact on Behavior:**
- **Storage Mechanism:** The use of a non-MMKV storage method might affect how data is persisted and retrieved.
- **Loading State Management:** Adding `state?.setLoading(false)` ensures that the loading state is explicitly set to false after rehydration, which could improve user experience or application behavior.

**Risks or Concerns:**
- **Storage Compatibility:** The new storage mechanism must be compatible with existing data formats.
- **State Handling:** Ensuring that all parts of the application correctly handle the new loading state logic is crucial to avoid unexpected behaviors.

---

*Generated by CodeWorm on 2026-02-22 14:24*
