# common.types

**Type:** Code Evolution
**Repository:** oneIsNun_
**File:** react-scss/src/api/types/common.types.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: fc968a71
Message: feat: transform to MongoDB management dashboard

Major refactor from auth template to MongoDB dashboard:

Backend:
- Fix WebSocket context issue (use context.Background instead of r.Context)
- Add Dockerfile.dev with Air hot reload and mongodb-database-tools
- Update go.mod to Go 1.25
- Add Makefile for mongo and app management
- Add dev.compose.yml for Docker development environment
- Configure mongo-rs.yml for 3-node replica set

Frontend:
- Add HydrateFallback to silence React Router warning
- Update CSP to allow localhost:8080 and ws connections
- Replace auth pages with dashboard, collections, backups, slow-queries
- Add WebSocket hook for real-time metrics
- Add metrics, backups, collections API hooks and types
- Update shell with connection status indicator
- Remove auth-related code (login, register, protected routes)

Removed legacy GO/*.md architecture docs (moved to CLAUDE.md)
Author: CarterPerez-dev
File: react-scss/src/api/types/common.types.ts
Change type: new file

Diff:
@@ -0,0 +1,35 @@
+// ===================
+// AngelaMos | 2026
+// common.types.ts
+// ===================
+
+import { z } from 'zod'
+
+export const ApiResponseSchema = <T extends z.ZodTypeAny>(dataSchema: T) =>
+  z.object({
+    success: z.boolean(),
+    data: dataSchema,
+    error: z
+      .object({
+        code: z.string(),
+        message: z.string(),
+      })
+      .optional(),
+  })
+
+export type ApiResponse<T> = {
+  success: boolean
+  data: T
+  error?: {
+    code: string
+    message: string
+  }
+}
+
+export const parseApiResponse = <T extends z.ZodTypeAny>(
+  schema: T,
+  response: unknown
+): z.infer<T> => {
+  const wrapped = ApiResponseSchema(schema).parse(response)
+  return wrapped.data
+}

```

---

## Code Evolution

### Change Analysis

**What was Changed:** A new file `common.types.ts` was added, introducing a utility for handling API responses using Zod validation. This includes an `ApiResponseSchema` function and corresponding `ApiResponse` type.

**Why it was Likely Changed:** The addition of this utility is likely to standardize how API responses are handled across the application. Using Zod ensures that response data conforms to expected schemas, improving robustness and reducing potential runtime errors.

**Impact on Behavior:** This change will impact any part of the codebase that processes API responses. It enforces a consistent structure for handling success, data, and error information, making it easier to manage and validate API interactions.

**Risks or Concerns:** While this is likely a refactor aimed at improving consistency and validation, there are potential risks:
- **Backward Compatibility**: Any existing code that directly accesses response properties might break if not updated to use the new utility.
- **Performance Overhead**: Zod schema parsing could introduce slight performance overhead, though it's minimal for most applications.

Overall, this change enhances type safety and error handling, making the application more robust.

---

*Generated by CodeWorm on 2026-02-23 00:02*
