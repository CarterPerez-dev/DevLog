# ops

**Type:** Code Evolution
**Repository:** CodeWorm
**File:** codeworm/git/ops.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: ca3ce30d
Message: v1.0.2: add doc type system, Docker infrastructure, and web dashboard

- Add 11 documentation types (function, class, file, security review, TIL, etc.)
  with weighted random selection so the same codebase generates 10x more unique content
- Add Docker Compose for Ollama (GPU passthrough) + Redis + Dashboard + Nginx
- Add FastAPI backend with REST API, WebSocket live events, and Redis pub/sub
- Add React dashboard with stats, live log, commit feed, repo list, and worm viz
- Add next_scheduled_run logging after each cycle completes
- Update repos config and README for v1.0.2
Author: CarterPerez-dev
File: codeworm/git/ops.py
Change type: modified

Diff:
@@ -9,7 +9,7 @@ import random
 from pathlib import Path
 from datetime import datetime
 from dataclasses import dataclass
-from typing import TYPE_CHECKING
+from typing import TYPE_CHECKING, ClassVar
 
 from git import (
     GitCommandError,
@@ -19,6 +19,7 @@ from git import (
 from git.exc import GitError
 
 from codeworm.core import get_logger
+from codeworm.models import DocType
 
 if TYPE_CHECKING:
     from codeworm.llm.generator import GeneratedDocumentation
@@ -110,6 +111,22 @@ class DevLogRepository:
 
         return self._repo
 
+    DOC_TYPE_DIRS: ClassVar[dict[str,
+                                 str]] = {
+                                     "function_doc": "snippets",
+                                     "class_doc": "classes",
+                                     "file_doc": "files",
+                                     "module_doc": "modules",
+                                     "security_review": "reviews/security",
+                                     "performance_analysis":
+                                     "reviews/performance",
+                                     "til": "til",
+                                     "code_evolution": "evolution",
+                                     "pattern_analysis": "patterns",
+                                     "weekly_summary": "analysis/weekly",
+                                     "monthly_summary": "analysis/monthly",
+                                 }
+
     def ensure_directory_structure(self) -> None:
         """
         Create the DevLog directory structure if needed
@@ -120,6 +137,13 @@ class DevLogRepository:
             "snippets/javascript",
             "snippets/go",
             "snippets/rust",
+            "classes",
+            "files",
+            "modules",
+            "reviews/security",
+            "reviews/performance",
+            "til",
+            "evolution",
             "analysis/weekly",
             "analysis/monthly",
             "patterns",
@@ -138,11 +162,18 @@ class DevLogRepository:
         content: str,
         filename: str,
         language: str,
+        doc_type: DocType = DocType.FUNCTION_DOC,
     ) -> Path:
         """
-        Write a snippet file to the appropriate directory
+        Write a snippet file to the appropriate directory base
```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The code in `ops.py` was modified to include a new class variable `DOC_TYPE_DIRS`, which maps documentation types (e.g., function, class, file) to specific directories within the repository. Additionally, the method `write_snippet()` was updated to accept an optional `doc_type` parameter and use this parameter to determine the appropriate directory for writing the document.

**Why it was Likely Changed:**
This change likely supports a more structured approach to managing different types of documentation within the CodeWorm project. By categorizing documents into specific directories, the system can better organize and manage various types of content, such as function-level documentation, class definitions, or security reviews.

**Impact on Behavior:**
The impact is significant in terms of how documents are stored and accessed. Documents will now be written to more specific and organized directories based on their type. This change enhances the maintainability and readability of the repository's structure.

**Risks or Concerns:**
- **Complexity Increase:** The introduction of multiple document types and directory structures may increase complexity, especially for new contributors.
- **Potential Errors:** If `doc_type` is not correctly specified when writing a document, it might be placed in an incorrect directory, leading to confusion or errors.

Overall, this change improves the organization and maintainability of documentation within the project.

---

*Generated by CodeWorm on 2026-02-23 21:45*
