# cli

**Type:** Code Evolution
**Repository:** CodeWorm
**File:** codeworm/cli.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: ca3ce30d
Message: v1.0.2: add doc type system, Docker infrastructure, and web dashboard

- Add 11 documentation types (function, class, file, security review, TIL, etc.)
  with weighted random selection so the same codebase generates 10x more unique content
- Add Docker Compose for Ollama (GPU passthrough) + Redis + Dashboard + Nginx
- Add FastAPI backend with REST API, WebSocket live events, and Redis pub/sub
- Add React dashboard with stats, live log, commit feed, repo list, and worm viz
- Add next_scheduled_run logging after each cycle completes
- Update repos config and README for v1.0.2
Author: CarterPerez-dev
File: codeworm/cli.py
Change type: modified

Diff:
@@ -5,6 +5,7 @@ cli.py
 from __future__ import annotations
 
 import asyncio
+import os
 import sys
 from pathlib import Path
 
@@ -13,18 +14,18 @@ from rich.console import Console
 from rich.table import Table
 
 from codeworm.core import configure_logging, load_settings
-from codeworm.core.config import load_config_from_yaml
 
 
 console = Console()
 
 
 @click.group()
-@click.option("--debug", is_flag=True, help="Enable debug logging")
+@click.option("--debug", is_flag = True, help = "Enable debug logging")
 @click.option(
     "--config",
-    type=click.Path(exists=True, path_type=Path),
-    help="Path to config directory",
+    type = click.Path(exists = True,
+                      path_type = Path),
+    help = "Path to config directory",
 )
 @click.pass_context
 def cli(ctx: click.Context, debug: bool, config: Path | None) -> None:
@@ -39,22 +40,28 @@ def cli(ctx: click.Context, debug: bool, config: Path | None) -> None:
 @cli.command()
 @click.option(
     "--devlog",
-    type=click.Path(path_type=Path),
-    help="Path to DevLog repository (overrides config)",
+    type = click.Path(path_type = Path),
+    help = "Path to DevLog repository (overrides config)",
 )
 @click.option(
     "--repo",
-    type=(str, str),
-    multiple=True,
-    help="Add repo as NAME PATH pairs (overrides config)",
+    type = (str,
+            str),
+    multiple = True,
+    help = "Add repo as NAME PATH pairs (overrides config)",
 )
 @click.option(
     "--dry-run",
-    is_flag=True,
-    help="Generate docs but don't commit (for testing)",
+    is_flag = True,
+    help = "Generate docs but don't commit (for testing)",
 )
 @click.pass_context
-def run(ctx: click.Context, devlog: Path | None, repo: tuple, dry_run: bool) -> None:
+def run(
+    ctx: click.Context,
+    devlog: Path | None,
+    repo: tuple,
+    dry_run: bool
+) -> None:
     """
     Run the CodeWorm daemon with scheduler
     """
@@ -66,11 +73,18 @@ def run(ctx: click.Context, devlog: Path | None, repo: tuple, dry_run: bool) ->
         overrides["devlog"] = {"repo_path": devlog}
 
     if repo:
-        repos = [{"name": name, "path": Path(path), "weight": 5} for name, path in repo]
+        repos = [
+            {
+                "name": name,
+                "path": Path(path),
+                "weight": 5
+
```

---

## Code Evolution

### Change Analysis for Commit `ca3ce30d`

#### What Was Changed
The changes in `cli.py` include updates to command-line options, function signatures, and logging configurations. Specifically:
- Added `os` import.
- Minor formatting improvements to option definitions.
- Updated the `run` and `run_once` functions to handle additional parameters like `redis_url`.
- Included a new log message for Redis URL if enabled.

#### Why It Was Likely Changed
These changes are part of an upgrade to support new features and infrastructure, such as Docker Compose setup and FastAPI backend. The modifications ensure that the command-line interface (CLI) can now handle additional parameters required by these new components, like the Redis URL.

#### Impact on Behavior
- **Logging**: Added logging for the Redis URL if it is enabled.
- **Functionality**: Enhanced flexibility in running CodeWorm with optional overrides for repositories and DevLog paths.
- **Configuration Handling**: Improved handling of configuration settings to support more complex setups (e.g., Docker Compose).

#### Risks or Concerns
- **Parameter Interactions**: Ensure that all parameters interact correctly, especially when overriding configurations.
- **Logging Overhead**: Adding logging for Redis URL might introduce minor overhead but is generally safe.

Overall, these changes are likely part of a broader update to support new features and infrastructure, enhancing the flexibility and robustness of CodeWorm.

---

*Generated by CodeWorm on 2026-02-23 21:24*
