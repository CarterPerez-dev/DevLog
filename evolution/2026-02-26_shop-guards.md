# shop.guards

**Type:** Code Evolution
**Repository:** CertGames-Core
**File:** frontend/user-app/src/domains/shop/types/shop.guards.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: 8086f947
Message: refactor(domains): migrate medium domain interfaces to Zod schemas
Author: CarterPerez-dev
File: frontend/user-app/src/domains/shop/types/shop.guards.ts
Change type: modified

Diff:
@@ -1,8 +1,22 @@
 // ===========================
-// Shop Type Guards
-// ©AngelaMos | 2025
+// © AngelaMos | 2026
+// shop.guards.ts
 // ===========================
 
+import {
+  shopCatalogResponseSchema,
+  shopItemDetailsResponseSchema,
+  availableItemsResponseSchema,
+  userInventoryResponseSchema,
+  userItemsResponseSchema,
+  userEquipmentResponseSchema,
+  equipmentHistoryResponseSchema,
+  purchaseHistoryResponseSchema,
+  purchaseItemResponseSchema,
+  equipItemResponseSchema,
+  unequipItemResponseSchema,
+} from './shop.interfaces';
+
 import type {
   ShopCatalogResponse,
   ShopItemDetailsResponse,
@@ -20,310 +34,65 @@ import type {
 export const isValidShopCatalogResponse = (
   data: unknown,
 ): data is ShopCatalogResponse => {
-  if (data === null || data === undefined) return false;
-  if (!Array.isArray(data)) return false;
-
-  return data.every(
-    (item: unknown) =>
-      item !== null &&
-      item !== undefined &&
-      typeof item === 'object' &&
-      Object.values(item as Record<string, unknown>).every(
-        (value: unknown) =>
-          typeof value === 'string' ||
-          typeof value === 'number' ||
-          value === null,
-      ),
-  );
+  return shopCatalogResponseSchema.safeParse(data).success;
 };
 
 export const isValidShopItemDetailsResponse = (
   data: unknown,
 ): data is ShopItemDetailsResponse => {
-  if (data === null || data === undefined) return false;
-  if (typeof data !== 'object') return false;
-
-  const obj = data as Record<string, unknown>;
-
-  return (
-    typeof obj.id === 'string' &&
-    typeof obj.title === 'string' &&
-    typeof obj.type === 'string' &&
-    (obj.cost === null || typeof obj.cost === 'number') &&
-    (obj.value === null || typeof obj.value === 'string') &&
-    typeof obj.levelRequired === 'number' &&
-    typeof obj.acquisitionType === 'string' &&
-    (obj.description === null || typeof obj.description === 'string') &&
-    (obj.imageUrl === null || typeof obj.imageUrl === 'string') &&
-    (obj.expiryDays === null || typeof obj.expiryDays === 'number') &&
-    (obj.createdAt === null || typeof obj.createdAt === 'string') &&
-    (obj.updatedAt === null || typeof obj.updatedAt === 'string') &&
-    typeof obj.is_owned === 'boolean' &&
-    typeof obj.is_level_unlocked === 'boolean' &&
-    typeof obj.can_equip === 'boolean' &&
-    typeof obj.is_equipped === 'boolean'
-  );
+  return shopItemDetailsResponseSchema.safeParse(data).success;
 };
 
 export const isValidAvailableItemsResponse = (
   data: unknown,
 ): data is AvailableItemsResponse => {
-  if (data === null || data === undefined) return false;
-  if (typeof data !== 'object') return false;
-
-  const obj = data as Record<string, unknown>;
-
-  const isValidItemArray = (arr: unknown)
```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The code in `shop.guards.ts` was refactored to use Zod schemas instead of custom type guards for validating responses from the shop domain. The file now imports and uses Zod schema validation functions, replacing the extensive type guard logic.

**Why it Was Likely Changed:**
This change likely aims to simplify the validation process by leveraging Zod's robust schema validation capabilities. Zod provides a more concise and expressive way to define and validate data structures, making the code easier to read and maintain.

**Impact on Behavior:**
The behavior of the type guards has changed from manually checking each property's type and validity to relying on Zod schemas for validation. This should result in more reliable and consistent validation logic across different response types.

**Risks or Concerns:**
- **Schema Complexity:** If not carefully designed, Zod schemas might become complex and hard to understand.
- **Error Handling:** Custom error messages from Zod need to be handled properly to maintain user-friendly error reporting.
- **Performance:** While Zod is generally efficient, there could be a slight performance overhead compared to custom type guards.

Overall, this refactor aims to improve code quality and maintainability while ensuring data integrity.

---

*Generated by CodeWorm on 2026-02-26 02:49*
