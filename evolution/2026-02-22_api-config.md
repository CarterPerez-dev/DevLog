# api.config

**Type:** Code Evolution
**Repository:** fullstack-template
**File:** frontends/react-native-ios/src/core/api/api.config.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: bfe947fa
Message: ios fixes - F*** MMKV btw ðŸ™„
Author: CarterPerez-dev
File: frontends/react-native-ios/src/core/api/api.config.ts
Change type: modified

Diff:
@@ -148,9 +148,12 @@ apiClient.interceptors.response.use(
 
     const isUnauthorized = error.response?.status === HTTP_STATUS.UNAUTHORIZED
     const isNotRetried = originalRequest._retry !== true
-    const isNotRefreshEndpoint = originalRequest.url?.includes('refresh') !== true
+    const isNotAuthEndpoint =
+      !originalRequest.url?.includes('refresh') &&
+      !originalRequest.url?.includes('login') &&
+      !originalRequest.url?.includes('register')
 
-    if (isUnauthorized && isNotRetried && isNotRefreshEndpoint) {
+    if (isUnauthorized && isNotRetried && isNotAuthEndpoint) {
       if (isRefreshing) {
         return new Promise<unknown>((resolve, reject) => {
           addRefreshSubscriber(

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
In `api.config.ts`, the line defining `isNotRefreshEndpoint` was modified to a more complex condition involving multiple endpoints (`refresh`, `login`, and `register`). The original check for `!originalRequest.url?.includes('refresh')` was replaced with a new variable `isNotAuthEndpoint`.

**Why it Was Likely Changed:**
This change likely aims to handle different authentication-related endpoints more comprehensively. By including additional endpoints like `login` and `register`, the logic now covers a broader range of scenarios where refreshing might not be necessary.

**Impact on Behavior:**
The impact is that requests to `/refresh`, `/login`, or `/register` will no longer trigger the retry mechanism for unauthorized responses, whereas other unauthorized responses will still attempt to refresh. This could improve performance and user experience by avoiding unnecessary retries during sensitive operations like authentication.

**Risks or Concerns:**
- **Potential Missed Retries:** Ensure that all relevant endpoints are correctly identified in `isNotAuthEndpoint`.
- **Maintainability:** The new logic might be harder to understand, especially for future contributors.
- **Edge Cases:** Verify that no other unexpected URL patterns could inadvertently bypass the retry mechanism.

Overall, this change likely addresses a specific issue with authentication flows while maintaining robust error handling elsewhere.

---

*Generated by CodeWorm on 2026-02-22 14:41*
