# collections.types

**Type:** Code Evolution
**Repository:** oneIsNun_
**File:** react-scss/src/api/types/collections.types.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: fc968a71
Message: feat: transform to MongoDB management dashboard

Major refactor from auth template to MongoDB dashboard:

Backend:
- Fix WebSocket context issue (use context.Background instead of r.Context)
- Add Dockerfile.dev with Air hot reload and mongodb-database-tools
- Update go.mod to Go 1.25
- Add Makefile for mongo and app management
- Add dev.compose.yml for Docker development environment
- Configure mongo-rs.yml for 3-node replica set

Frontend:
- Add HydrateFallback to silence React Router warning
- Update CSP to allow localhost:8080 and ws connections
- Replace auth pages with dashboard, collections, backups, slow-queries
- Add WebSocket hook for real-time metrics
- Add metrics, backups, collections API hooks and types
- Update shell with connection status indicator
- Remove auth-related code (login, register, protected routes)

Removed legacy GO/*.md architecture docs (moved to CLAUDE.md)
Author: CarterPerez-dev
File: react-scss/src/api/types/collections.types.ts
Change type: new file

Diff:
@@ -0,0 +1,84 @@
+// ===================
+// AngelaMos | 2026
+// collections.types.ts
+// ===================
+
+import { z } from 'zod'
+
+export const CollectionInfoSchema = z.object({
+  name: z.string(),
+  type: z.string(),
+  document_count: z.number(),
+  size_bytes: z.number(),
+  avg_doc_size: z.number(),
+  index_count: z.number(),
+})
+
+export const CollectionsListResponseSchema = z.object({
+  database: z.string(),
+  count: z.number(),
+  collections: z.array(CollectionInfoSchema),
+})
+
+export const CollectionStatsSchema = z.object({
+  name: z.string(),
+  namespace: z.string(),
+  count: z.number(),
+  size: z.number(),
+  avg_obj_size: z.number(),
+  storage_size: z.number(),
+  total_index_size: z.number(),
+  index_sizes: z.record(z.number()),
+  capped: z.boolean(),
+})
+
+export const FieldInfoSchema = z.object({
+  name: z.string(),
+  types: z.array(z.string()),
+  coverage: z.number(),
+  sample_values: z.array(z.unknown()),
+})
+
+export const SchemaAnalysisSchema = z.object({
+  collection: z.string(),
+  sample_size: z.number(),
+  total_documents: z.number(),
+  fields: z.array(FieldInfoSchema),
+})
+
+export const IndexInfoSchema = z.object({
+  name: z.string(),
+  keys: z.record(z.number()),
+  unique: z.boolean(),
+  sparse: z.boolean(),
+  background: z.boolean(),
+  expire_after_seconds: z.number().optional(),
+  partial_filter_expression: z.record(z.unknown()).optional(),
+  size_bytes: z.number(),
+})
+
+export const FieldStatsSchema = z.object({
+  collection: z.string(),
+  field: z.string(),
+  total_documents: z.number(),
+  documents_with_field: z.number(),
+  coverage_percent: z.number(),
+  types: z.record(z.number()),
+  sample_values: z.array(z.unknown()),
+})
+
+export const CountResponseSchema = z.object({
+  collection: z.string(),
+  field: z.string(),
+  value: z.unknown(),
+  count: z.number(),
+})
+
+export type CollectionInfo = z.infer<typeof CollectionInfoSchema>
+export type Co
```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The commit introduces a new file `collections.types.ts` in the backend API types directory. This file defines several Zod schemas for handling MongoDB collections and related data, including schema analysis, collection statistics, field information, index details, and count responses.

**Why it was Likely Changed:**
This change likely aims to standardize and validate data structures used by the new MongoDB dashboard. By using Zod, the team can ensure that incoming or outgoing data conforms to expected formats, improving robustness and reducing errors in data handling.

**Impact on Behavior:**
The introduction of these schemas will affect how collection-related data is validated and processed within the application. This change ensures consistency and correctness in data interactions with MongoDB, which is crucial for a management dashboard.

**Risks or Concerns:**
While Zod provides strong typing and validation, there's a risk that existing code might need adjustments to comply with these new schema definitions. Additionally, ensuring all parts of the application correctly use these schemas will be important to avoid runtime errors due to type mismatches.

---

*Generated by CodeWorm on 2026-02-22 23:45*
