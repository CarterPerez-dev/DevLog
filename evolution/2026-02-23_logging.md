# logging

**Type:** Code Evolution
**Repository:** social-media-notes
**File:** backend/app/core/logging.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: 8c757802
Message: easy peasy
Author: CarterPerez-dev
File: backend/app/core/logging.py
Change type: new file

Diff:
@@ -0,0 +1,79 @@
+"""
+â’¸AngelaMos | 2025
+logging.py
+"""
+
+import logging
+import sys
+
+import structlog
+from structlog.types import Processor
+
+from config import (
+    settings,
+    Environment,
+)
+
+
+def configure_logging() -> None:
+    """
+    Structlog with appropriate processors for the environment
+    """
+    shared_processors: list[Processor] = [
+        structlog.contextvars.merge_contextvars,
+        structlog.stdlib.add_log_level,
+        structlog.stdlib.add_logger_name,
+        structlog.processors.TimeStamper(fmt = "iso"),
+        structlog.processors.StackInfoRenderer(),
+        structlog.processors.UnicodeDecoder(),
+    ]
+
+    if settings.ENVIRONMENT == Environment.PRODUCTION:
+        shared_processors.append(structlog.processors.format_exc_info)
+        renderer: Processor = structlog.processors.JSONRenderer()
+    else:
+        renderer = structlog.dev.ConsoleRenderer(colors = True)
+
+    structlog.configure(
+        processors = shared_processors + [
+            structlog.stdlib.ProcessorFormatter.wrap_for_formatter,
+        ],
+        logger_factory = structlog.stdlib.LoggerFactory(),
+        wrapper_class = structlog.stdlib.BoundLogger,
+        cache_logger_on_first_use = True,
+    )
+
+    formatter = structlog.stdlib.ProcessorFormatter(
+        foreign_pre_chain = shared_processors,
+        processors = [
+            structlog.stdlib.ProcessorFormatter.remove_processors_meta,
+            renderer,
+        ],
+    )
+
+    handler = logging.StreamHandler(sys.stdout)
+    handler.setFormatter(formatter)
+
+    root_logger = logging.getLogger()
+    root_logger.handlers.clear()
+    root_logger.addHandler(handler)
+    root_logger.setLevel(settings.LOG_LEVEL)
+
+    for logger_name in ["uvicorn",
+                        "uvicorn.access",
+                        "uvicorn.error",
+                        "sqlalchemy.engine"]:
+        logger = logging.getLogger(logger_name)
+        logger.handlers.clear()
+        logger.addHandler(handler)
+        logger.propagate = False
+
+    if settings.ENVIRONMENT != Environment.DEVELOPMENT:
+        logging.getLogger("sqlalchemy.engine").setLevel(logging.WARNING)
+
+
+def get_logger(name: str | None = None) -> structlog.stdlib.BoundLogger:
+    """
+    Get a structured logger instance
+    """
+    return structlog.get_logger(name)

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
A new file `logging.py` was added to the repository, introducing a structured logging configuration using `structlog`. The code sets up different log processors based on the environment (production vs development) and configures handlers for various loggers.

**Why it was Likely Changed:**
This change likely aims to improve logging in the application by standardizing the logging format and behavior across environments. Using `structlog` allows for more structured logs, which can be particularly useful for debugging and monitoring.

**Impact on Behavior:**
- **Production Environment:** Logs will include stack traces and are formatted as JSON.
- **Development Environment:** Logs are displayed in a colorized console output.
- All loggers (including those from `uvicorn` and `sqlalchemy`) are configured to use the same formatter, ensuring consistency.

**Risks or Concerns:**
- The removal of existing handlers might cause logs to be lost if not managed properly.
- Hardcoding logger names could lead to issues if new loggers are added in the future without being configured.
- Ensuring that all relevant loggers are included and correctly set up is crucial, especially for critical components like `sqlalchemy`.

Overall, this change enhances logging capabilities but requires careful testing across different environments.

---

*Generated by CodeWorm on 2026-02-23 17:57*
