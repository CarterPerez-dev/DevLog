# init

**Type:** Code Evolution
**Repository:** Cybersecurity-Projects
**File:** PROJECTS/intermediate/secrets-scanner/internal/cli/init.go
**Language:** go
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```go
Commit: 294169a2
Message: feat: Complete Go secrets scanner - Portia
Author: CarterPerez-dev
File: PROJECTS/intermediate/secrets-scanner/internal/cli/init.go
Change type: new file

Diff:
@@ -0,0 +1,74 @@
+// Â©AngelaMos | 2026
+// init.go
+
+package cli
+
+import (
+	"fmt"
+	"os"
+	"path/filepath"
+
+	"github.com/spf13/cobra"
+
+	"github.com/CarterPerez-dev/portia/internal/config"
+	"github.com/CarterPerez-dev/portia/internal/ui"
+)
+
+var initCmd = &cobra.Command{
+	Use:   "init",
+	Short: "Create a default .portia.toml config file",
+	RunE:  runInit,
+}
+
+var pyprojectCmd = &cobra.Command{
+	Use:   "pyproject",
+	Short: "Create a pyproject.toml with [tool.portia] configuration",
+	RunE:  runPyproject,
+}
+
+func runInit(_ *cobra.Command, _ []string) error {
+	if _, err := os.Stat(config.DefaultConfigFile); err == nil {
+		fmt.Fprintf(os.Stderr, "%s %s already exists\n",
+			ui.Warning, config.DefaultConfigFile)
+		return nil
+	}
+
+	if err := os.WriteFile( //nolint:gosec
+		config.DefaultConfigFile,
+		[]byte(config.DefaultTemplate()),
+		0o644,
+	); err != nil {
+		return fmt.Errorf("write config: %w", err)
+	}
+
+	fmt.Fprintf(os.Stdout, "%s Created %s\n", //nolint:errcheck
+		ui.Check, ui.CyanBold(config.DefaultConfigFile))
+	return nil
+}
+
+func runPyproject(_ *cobra.Command, _ []string) error {
+	if _, err := os.Stat("pyproject.toml"); err == nil {
+		return fmt.Errorf("pyproject.toml already exists")
+	}
+
+	dir, err := os.Getwd()
+	if err != nil {
+		return fmt.Errorf("get working directory: %w", err)
+	}
+
+	name := filepath.Base(dir)
+	content := config.PyprojectTemplate(name)
+
+	if err := os.WriteFile( //nolint:gosec
+		"pyproject.toml",
+		[]byte(content),
+		0o644,
+	); err != nil {
+		return fmt.Errorf("write pyproject.toml: %w", err)
+	}
+
+	fmt.Fprintf(os.Stdout, "\n  %s %s\n\n", //nolint:errcheck
+		ui.HiGreen(ui.Check),
+		ui.HiGreen("Created pyproject.toml with [tool.portia] configuration"))
+	return nil
+}

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
The commit introduces two new commands, `init` and `pyproject`, to the CLI for a Go secrets scanner project. The `init` command creates a default `.portia.toml` configuration file if it does not already exist, while the `pyproject` command generates a `pyproject.toml` with `[tool.portia]` configuration.

**Why it was Likely Changed:**
These commands likely enhance the usability of the tool by providing out-of-the-box setup options for users. The addition of these commands simplifies the initial configuration process and ensures that essential files are present, making the project more user-friendly.

**Impact on Behavior:**
The introduction of `init` and `pyproject` commands allows users to quickly set up their environment with default configurations. This can significantly reduce the setup time for new projects or environments.

**Risks or Concerns:**
- **Security Risks:** The use of `os.WriteFile` without proper validation (e.g., file permissions, content checks) could pose security risks. For instance, writing files directly from templates might introduce vulnerabilities if not handled carefully.
- **Error Handling:** While the code includes error handling for some operations, it is important to ensure that all potential errors are properly managed and logged.

Overall, these changes enhance the tool's functionality but should be reviewed for any potential security or usability issues.

---

*Generated by CodeWorm on 2026-02-22 20:13*
