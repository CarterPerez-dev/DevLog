# verify-guards

**Type:** Code Evolution
**Repository:** CertGames-Core
**File:** frontend/user-app/scripts/verify-guards.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: ac61454c
Message: just did alot of shit basically idk
Author: CarterPerez-dev
File: frontend/user-app/scripts/verify-guards.ts
Change type: new file

Diff:
@@ -0,0 +1,203 @@
+// ===========================
+// © AngelaMos | 2026
+// verify-guards.ts
+// ===========================
+
+import axios from 'axios';
+
+// ── Guard imports ────────────────────────────────────────────────
+import {
+  isValidStreakStatusResponse,
+  isValidDailyQuestionResponse,
+  isValidUserUsageLimitsResponse,
+  isValidUserAchievementProgressResponse,
+  isValidUserLeaderboardPositionResponse as isValidDashLBPosition,
+  isValidUserLevelProgressResponse,
+} from '@/domains/dashboard/types';
+
+import {
+  isValidPublicLeaderboardResponse,
+  isValidPrivateLeaderboardResponse,
+  isValidUserLeaderboardPositionResponse as isValidLBPosition,
+} from '@/domains/leaderboard/types';
+
+import {
+  isValidGetUserCertificationsResponse,
+  isValidGetPublicProfileResponse,
+  isValidGetFriendsListResponse,
+  isValidGetPendingRequestsResponse,
+  isValidGetSentRequestsResponse,
+  isValidGetChallengesResponse,
+} from '@/domains/account/types';
+
+import {
+  isValidSupportThreadListResponse,
+  isValidSupportThreadDetailResponse,
+  isValidConversationsListResponse,
+  isValidConversationDetailResponse,
+} from '@/domains/community/types';
+
+import {
+  isValidListTestAttemptsResponse,
+  isValidTestByCategoryAndIdResponse,
+} from '@/domains/testing/types';
+
+// ── Config ───────────────────────────────────────────────────────
+const BASE = process.env.API_URL ?? 'http://localhost:5001';
+const TOKEN = process.env.JWT_TOKEN;
+
+// Optional: set these to enable parameterised tests
+const PROFILE_USERNAME = process.env.PROFILE_USERNAME ?? 'dev';
+const FRIEND_ID = process.env.FRIEND_ID ?? '';
+const THREAD_ID = process.env.THREAD_ID ?? '';
+const TEST_CATEGORY = process.env.TEST_CATEGORY ?? 'aplus';
+const TEST_ID = process.env.TEST_ID ?? '1';
+
+if (!TOKEN) {
+  console.error('\n❌  JWT_TOKEN is required');
+  console.error('   JWT_TOKEN=<token> pnpm verify:guards\n');
+  console.error('   Optional: PROFILE_USERNAME  FRIEND_ID  THREAD_ID  TEST_CATEGORY  TEST_ID\n');
+  process.exit(1);
+}
+
+const client = axios.create({
+  baseURL: BASE,
+  headers: { Authorization: `Bearer ${TOKEN}` },
+  validateStatus: () => true,
+});
+
+// ── Types ────────────────────────────────────────────────────────
+type Guard = (data: unknown) => boolean;
+type TestCase = {
+  name: string;
+  url: string;
+  method?: 'GET' | 'POST';
+  body?: unknown;
+  guard: Guard;
+  skip?: string;
+};
+type ResultStatus = 'pass' | 'fail' | 'http_err' | 'skip' | 'throw';
+type Result = { name: string; status: ResultStatus; detail?: string };
+
+// ── Test cases ───────────────────────────────────────────────────
+const tests: TestCase[] = [
+
+  // ── Dashboard ───────────────────────────────────────────────────
+  { name: 'dashboard › streak status',        url: '/progression/streak/status',      
```

---

## Code Evolution

### Change Analysis

**What was Changed:**
A new file `verify-guards.ts` was added to the repository, containing a suite of test cases for various API endpoints across different modules (dashboard, leaderboard, testing, certifications, and social). Each test case defines an HTTP request URL, a guard function to validate the response, and optional parameters like method and body. The file also includes configuration settings for environment variables.

**Why it was Likely Changed:**
This change likely aims to improve API validation by ensuring that responses from different endpoints conform to expected schemas or structures. This is crucial for maintaining data integrity and preventing bugs in production.

**Impact on Behavior:**
The introduction of these test cases will now allow developers to run automated checks against the API, which can help catch issues early in development. The `client` instance with configured headers ensures that all requests are authenticated using a JWT token.

**Risks or Concerns:**
- **Environment Variables:** Hardcoding environment variables like `JWT_TOKEN`, `PROFILE_USERNAME`, etc., could pose security risks if not properly managed.
- **Test Coverage:** While the addition of these tests is beneficial, it's important to ensure that all critical endpoints are covered and that the guards accurately reflect expected responses.

This change enhances the project’s quality assurance process by adding a layer of automated validation.

---

*Generated by CodeWorm on 2026-02-27 22:56*
