# Terminal

**Type:** Code Evolution
**Repository:** CertGames-Core
**File:** backend/api/domains/games/models/Terminal.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: fe44f45e
Message: dev v2.0.4 (#169)

* chore(deps): update uv.lock with latest dependency versions

* feat:
- add terminal takedown game
- add back buttons to landing page pages (learn, play, features)
- add back buttons to ai tools and games
- add 10 tests (1000 pratice questions) for the CompTIA SecAI+ v1 exam/certification
- update some deps
- bump to v2.0.4 of CertGames

* error there but not here wtf

* error there but not here wtf
Author: Carter Perez
File: backend/api/domains/games/models/Terminal.py
Change type: new file

Diff:
@@ -0,0 +1,112 @@
+"""
+©AngelaMos | 2026
+Terminal.py
+"""
+
+from typing import Any
+from datetime import datetime, UTC
+from mongoengine import (
+    StringField,
+    ListField,
+    DictField,
+    ObjectIdField,
+    IntField,
+    DateTimeField,
+    DynamicDocument,
+)
+
+from api.core.database import BaseDocument
+
+
+TERMINAL_INTERNAL_FIELDS = {"_cls", "_dynamic_lock"}
+
+
+class TerminalChallenge(DynamicDocument):
+    meta = {"collection": "terminalChallenges"}
+
+    type = StringField(required = True)
+    category = StringField(required = True)
+    os = StringField(required = True, default = "linux")
+    name = StringField(required = True)
+    description = StringField(required = True)
+    context = StringField(required = True)
+    simulatedOutput = DictField()
+    acceptedPatterns = ListField(DictField())
+    hints = ListField(StringField())
+    explanation = StringField(required = True)
+    difficulty = StringField(required = True)
+    points = IntField(required = True)
+    missionId = StringField()
+    missionName = StringField()
+    stepOrder = IntField()
+    totalSteps = IntField()
+    tags = ListField(StringField())
+
+    def to_dict(self) -> dict[str, Any]:
+        raw = self.to_mongo(use_db_field = True)
+
+        result: dict[str, Any] = {"_id": str(self.id)}
+
+        for key, value in raw.items():
+            if key == "_id":
+                continue
+            if key in TERMINAL_INTERNAL_FIELDS:
+                continue
+            if key == "acceptedPatterns":
+                continue
+
+            if isinstance(value, datetime):
+                result[key] = value.isoformat()
+            else:
+                result[key] = value
+
+        return result
+
+    def __str__(self) -> str:
+        return f"TerminalChallenge(type={self.type}, name={self.name}, category={self.category})"
+
+
+class TerminalScore(BaseDocument):
+    meta = {"collection": "terminalScores"}
+
+    userId = ObjectIdField(required = True)
+    score = IntField(required = True)
+    mode = StringField(required = True)
+    timestamp = DateTimeField(default = lambda: datetime.now(UTC))
+    game = StringField(default = "terminalTakedown")
+
+    def to_dict(self) -> dict[str, Any]:
+        return {
+            "_id": str(self.id),
+            "userId": str(self.userId),
+            "score": self.score,
+            "mode": self.mode,
+            "timestamp": self.timestam
```

---

## Code Evolution

### Change Analysis for Commit `fe44f45e`

**What was Changed:**
A new file, `Terminal.py`, was added to the repository. This file introduces three new MongoDB documents: `TerminalChallenge`, `TerminalScore`, and `TerminalGameHistory`. These classes are designed to manage challenges, scores, and game history in a terminal takedown game.

**Why it was Likely Changed:**
The addition of these models likely aims to support the implementation of a new feature—specifically, a terminal-based takedown game. The introduction of detailed challenge structures (`TerminalChallenge`) and user score tracking (`TerminalScore` and `TerminalGameHistory`) suggests a comprehensive system for managing gameplay data.

**Impact on Behavior:**
This change significantly enhances the backend's ability to track and manage game-related data. Users will now have their scores recorded, challenges they've completed logged, and overall game history stored. This is crucial for maintaining user progress and providing feedback.

**Risks or Concerns:**
- **Data Integrity:** Ensuring that all fields are correctly populated and validated could be a risk.
- **Performance Impact:** Storing detailed challenge data might impact database performance if not optimized.
- **Security:** Proper handling of sensitive information, such as `userId`, is crucial to avoid security vulnerabilities.

Overall, this change introduces valuable functionality for the game but requires careful implementation to ensure robustness and efficiency.

---

*Generated by CodeWorm on 2026-02-21 08:42*
