# targets

**Type:** Code Evolution
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: ca3ce30d
Message: v1.0.2: add doc type system, Docker infrastructure, and web dashboard

- Add 11 documentation types (function, class, file, security review, TIL, etc.)
  with weighted random selection so the same codebase generates 10x more unique content
- Add Docker Compose for Ollama (GPU passthrough) + Redis + Dashboard + Nginx
- Add FastAPI backend with REST API, WebSocket live events, and Redis pub/sub
- Add React dashboard with stats, live log, commit feed, repo list, and worm viz
- Add next_scheduled_run logging after each cycle completes
- Update repos config and README for v1.0.2
Author: CarterPerez-dev
File: codeworm/analysis/targets.py
Change type: new file

Diff:
@@ -0,0 +1,704 @@
+"""
+â’¸AngelaMos | 2026
+analysis/targets.py
+"""
+from __future__ import annotations
+
+import random
+from dataclasses import dataclass, field
+from pathlib import Path
+from typing import TYPE_CHECKING
+
+from git import InvalidGitRepositoryError, Repo
+
+from codeworm.analysis.parser import CodeExtractor, ParserManager
+from codeworm.analysis.scanner import RepoScanner
+from codeworm.models import LANGUAGE_EXTENSIONS, CodeSnippet, DocType, Language
+
+if TYPE_CHECKING:
+    from codeworm.core.config import AnalyzerSettings, RepoEntry
+
+
+@dataclass
+class DocumentationTarget:
+    """
+    A generalized documentation target that supports any doc type
+    """
+    doc_type: DocType
+    snippet: CodeSnippet
+    source_context: str
+    metadata: dict = field(default_factory = dict)
+
+    @property
+    def score(self) -> float:
+        return self.snippet.interest_score
+
+    @property
+    def display_name(self) -> str:
+        return self.snippet.display_name
+
+
+class FileTargetFinder:
+    """
+    Finds files worth documenting at the file level
+    """
+    def __init__(self, scanner: RepoScanner) -> None:
+        self.scanner = scanner
+
+    def find(
+        self,
+        repo: RepoEntry,
+        limit: int = 20,
+    ) -> list[DocumentationTarget]:
+        targets: list[DocumentationTarget] = []
+
+        for scanned_file in self.scanner.scan_repo(repo.path, repo.name):
+            try:
+                source = scanned_file.path.read_text(encoding = "utf-8")
+            except Exception:
+                continue
+
+            line_count = source.count("\n") + 1
+            if line_count < 20:
+                continue
+
+            extractor = CodeExtractor(source, scanned_file.language)
+            func_count = sum(1 for _ in extractor.extract_functions())
+
+            score = min(
+                100.0,
+                (
+                    min(line_count / 200,
+                        1.0) * 30 + min(func_count / 8,
+                                        1.0) * 30 +
+                    min(scanned_file.size_bytes / 5000,
+                        1.0) * 20 + min(source.count("import ") / 10,
+                                        1.0) * 20
+                )
+            )
+
+            if score < 2
```

---

## Code Evolution

### Change Analysis for `codeworm/analysis/targets.py`

**What was Changed:**
The commit added a new file, `targets.py`, which introduces classes to find and document specific types of code elements (files and classes) within repositories. The file includes dataclasses like `DocumentationTarget` and two finder classes (`FileTargetFinder` and `ClassTargetFinder`) that use a scoring system based on various metrics.

**Why it was Likely Changed:**
This change likely aims to enhance the documentation generation process by identifying and prioritizing code snippets for documentation. By implementing these finders, the system can more intelligently select which parts of the codebase are most worth documenting, potentially improving the quality and relevance of generated documentation.

**Impact on Behavior:**
The new classes will significantly impact how CodeWorm identifies and documents code elements. The scoring mechanism ensures that only high-interest snippets are selected for documentation, making the output more focused and useful. This change likely improves the overall functionality by providing a more systematic approach to generating documentation.

**Risks or Concerns:**
While the new system is designed to be intelligent, there could be risks if the scoring algorithm is not finely tuned. For instance, overly strict criteria might miss important code snippets, while too lenient criteria could result in excessive noise. Additionally, handling large files and complex classes efficiently without performance degradation should be carefully managed.

---

*Generated by CodeWorm on 2026-02-23 20:35*
