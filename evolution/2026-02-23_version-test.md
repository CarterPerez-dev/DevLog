# version_test

**Type:** Code Evolution
**Repository:** angela
**File:** internal/pypi/version_test.go
**Language:** go
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```go
Commit: ea4cc501
Message: Create canonical module source location - release v1.0.0
Author: CarterPerez-dev
File: internal/pypi/version_test.go
Change type: new file

Diff:
@@ -0,0 +1,623 @@
+// Â©AngelaMos | 2026
+// version_test.go
+
+package pypi
+
+import (
+	"errors"
+	"testing"
+)
+
+//nolint:gocognit,funlen
+func TestParseVersion(t *testing.T) {
+	t.Parallel()
+
+	tests := []struct {
+		name    string
+		input   string
+		want    Version
+		wantErr bool
+	}{
+		{
+			name:  "simple three-segment",
+			input: "1.2.3",
+			want: Version{
+				Raw: "1.2.3", Release: []int{1, 2, 3},
+				Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "two segments",
+			input: "2.0",
+			want: Version{
+				Raw: "2.0", Release: []int{2, 0},
+				Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "single segment",
+			input: "42",
+			want: Version{
+				Raw: "42", Release: []int{42},
+				Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "leading v prefix",
+			input: "v1.0.0",
+			want: Version{
+				Raw: "v1.0.0", Release: []int{1, 0, 0},
+				Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "epoch",
+			input: "2!1.0",
+			want: Version{
+				Raw: "2!1.0", Epoch: 2, Release: []int{1, 0},
+				Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "alpha pre-release",
+			input: "1.0a1",
+			want: Version{
+				Raw: "1.0a1", Release: []int{1, 0},
+				PreKind: "a", PreNum: 1, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "beta pre-release",
+			input: "1.0b2",
+			want: Version{
+				Raw: "1.0b2", Release: []int{1, 0},
+				PreKind: "b", PreNum: 2, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "release candidate",
+			input: "1.0rc1",
+			want: Version{
+				Raw: "1.0rc1", Release: []int{1, 0},
+				PreKind: "rc", PreNum: 1, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "alpha spelled out",
+			input: "1.0alpha1",
+			want: Version{
+				Raw: "1.0alpha1", Release: []int{1, 0},
+				PreKind: "a", PreNum: 1, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "beta spelled out",
+			input: "1.0beta3",
+			want: Version{
+				Raw: "1.0beta3", Release: []int{1, 0},
+				PreKind: "b", PreNum: 3, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "preview normalizes to rc",
+			input: "1.0preview2",
+			want: Version{
+				Raw: "1.0preview2", Release: []int{1, 0},
+				PreKind: "rc", PreNum: 2, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "c normalizes to rc",
+			input: "1.0c1",
+			want: Version{
+				Raw: "1.0c1", Release: []int{1, 0},
+				PreKind: "rc", PreNum: 1, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "pre normalizes to rc",
+			input: "1.0pre4",
+			want: Version{
+				Raw: "1.0pre4", Release: []int{1, 0},
+				PreKind: "rc", PreNum: 4, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "pre-release with dot separator",
+			input: "1.0.a1",
+			want: Version{
+				Raw: "1.0.a1", Release: []int{1, 0},
+				PreKind: "a", PreNum: 1, Post: -1, Dev: -1,
+			},
+		},
+		{
+			name:  "pre-release with dash separator",
+			input: "1.0-alpha1",
+			want: Version{
+				Raw
```

---

## Code Evolution

### Change Analysis for `ea4cc501`

**What was Changed:**
A new test file, `version_test.go`, was added to the `internal/pypi` package. This file contains 623 lines of test cases for parsing version strings using the `TestParseVersion` function.

**Why it Was Likely Changed:**
This change likely aims to provide comprehensive testing coverage for the version parsing logic in the `pypi` module, ensuring that all valid and edge-case version formats are correctly handled. The addition of a dedicated test file also improves code organization and maintainability.

**Impact on Behavior:**
The new tests will ensure that the version parsing function behaves as expected across various input scenarios, including simple numeric versions, pre-releases (alpha, beta, rc), post-releases, dev releases, and local metadata. This enhances reliability and robustness of the module's functionality.

**Risks or Concerns:**
- The large number of test cases might make the function overly complex if not well-structured.
- Ensuring that all edge cases are covered without introducing unnecessary complexity is crucial.
- Potential performance overhead from running these tests, though likely minimal given the nature of parsing operations.

---

*Generated by CodeWorm on 2026-02-23 14:13*
