# useStats

**Type:** Code Evolution
**Repository:** CodeWorm
**File:** dashboard/frontend/src/api/hooks/useStats.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: ca3ce30d
Message: v1.0.2: add doc type system, Docker infrastructure, and web dashboard

- Add 11 documentation types (function, class, file, security review, TIL, etc.)
  with weighted random selection so the same codebase generates 10x more unique content
- Add Docker Compose for Ollama (GPU passthrough) + Redis + Dashboard + Nginx
- Add FastAPI backend with REST API, WebSocket live events, and Redis pub/sub
- Add React dashboard with stats, live log, commit feed, repo list, and worm viz
- Add next_scheduled_run logging after each cycle completes
- Update repos config and README for v1.0.2
Author: CarterPerez-dev
File: dashboard/frontend/src/api/hooks/useStats.ts
Change type: new file

Diff:
@@ -0,0 +1,60 @@
+// Â©AngelaMos | 2026
+// useStats.ts
+
+import type { UseQueryResult } from '@tanstack/react-query'
+import { useQuery } from '@tanstack/react-query'
+import {
+  DASHBOARD_ERROR_MESSAGES,
+  DashboardResponseError,
+  isValidStatsResponse,
+  type LanguageBreakdown,
+  type StatsResponse,
+} from '@/api/types'
+import { API_ENDPOINTS, QUERY_CONFIG, QUERY_KEYS } from '@/config'
+import { apiClient } from '@/core/api'
+
+export const statsQueries = {
+  all: () => QUERY_KEYS.STATS,
+  languages: () => QUERY_KEYS.LANGUAGES,
+} as const
+
+const fetchStats = async (): Promise<StatsResponse> => {
+  const response = await apiClient.get<unknown>(API_ENDPOINTS.STATS)
+  const data: unknown = response.data
+
+  if (!isValidStatsResponse(data)) {
+    throw new DashboardResponseError(
+      DASHBOARD_ERROR_MESSAGES.INVALID_STATS_RESPONSE,
+      API_ENDPOINTS.STATS
+    )
+  }
+
+  return data
+}
+
+export const useStats = (): UseQueryResult<StatsResponse, Error> => {
+  return useQuery({
+    queryKey: statsQueries.all(),
+    queryFn: fetchStats,
+    staleTime: QUERY_CONFIG.STALE_TIME.STATS,
+    refetchInterval: QUERY_CONFIG.STALE_TIME.STATS,
+  })
+}
+
+const fetchLanguages = async (): Promise<LanguageBreakdown[]> => {
+  const response = await apiClient.get<LanguageBreakdown[]>(
+    API_ENDPOINTS.LANGUAGES
+  )
+  return response.data
+}
+
+export const useLanguages = (): UseQueryResult<
+  LanguageBreakdown[],
+  Error
+> => {
+  return useQuery({
+    queryKey: statsQueries.languages(),
+    queryFn: fetchLanguages,
+    staleTime: QUERY_CONFIG.STALE_TIME.STATIC,
+  })
+}

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
A new file `useStats.ts` was added to the repository, introducing custom React Query hooks for fetching statistics and language breakdowns from the backend API. The file includes type definitions, error handling, and configuration for query behavior.

**Why it Was Likely Changed:**
This change likely aims to improve the dashboard's functionality by providing real-time stats and language data through a structured API interaction. The use of React Query ensures efficient state management and caching, enhancing user experience with up-to-date information.

**Impact on Behavior:**
The addition of `useStats` and `useLanguages` hooks allows the frontend to seamlessly interact with the backend API endpoints for fetching statistics and language breakdowns. This will enable dynamic updates in the dashboard, such as displaying current stats or language usage trends.

**Risks or Concerns:**
- **Error Handling:** The implementation relies on throwing errors if the response is invalid, which could lead to unexpected behavior if not handled properly.
- **Performance:** Frequent refetching intervals might cause unnecessary API calls and impact performance. Proper tuning of `staleTime` and `refetchInterval` is crucial.
- **Security:** Ensure that sensitive data handling in the hooks complies with security best practices, especially when dealing with user statistics.

Overall, this change enhances the dashboard's functionality while introducing robust error handling and efficient state management.

---

*Generated by CodeWorm on 2026-02-23 21:03*
