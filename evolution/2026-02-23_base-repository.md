# base_repository

**Type:** Code Evolution
**Repository:** social-media-notes
**File:** backend/app/core/base_repository.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: 8c757802
Message: easy peasy
Author: CarterPerez-dev
File: backend/app/core/base_repository.py
Change type: new file

Diff:
@@ -0,0 +1,106 @@
+"""
+â’¸AngelaMos | 2025
+base_repository.py
+"""
+
+from collections.abc import Sequence
+from typing import (
+    Any,
+    Generic,
+    TypeVar,
+)
+from uuid import UUID
+
+from sqlalchemy import func, select
+from sqlalchemy.ext.asyncio import AsyncSession
+
+from .Base import Base
+
+
+ModelT = TypeVar("ModelT", bound = Base)
+
+
+class BaseRepository(Generic[ModelT]):
+    """
+    Generic repository with common CRUD operations
+    """
+    model: type[ModelT]
+
+    @classmethod
+    async def get_by_id(
+        cls,
+        session: AsyncSession,
+        id: UUID,
+    ) -> ModelT | None:
+        """
+        Get a single record by ID
+        """
+        return await session.get(cls.model, id)
+
+    @classmethod
+    async def get_multi(
+        cls,
+        session: AsyncSession,
+        skip: int = 0,
+        limit: int = 100,
+    ) -> Sequence[ModelT]:
+        """
+        Get multiple records with pagination
+        """
+        result = await session.execute(
+            select(cls.model).offset(skip).limit(limit)
+        )
+        return result.scalars().all()
+
+    @classmethod
+    async def count(cls, session: AsyncSession) -> int:
+        """
+        Count total records
+        """
+        result = await session.execute(
+            select(func.count()).select_from(cls.model)
+        )
+        return result.scalar_one()
+
+    @classmethod
+    async def create(
+        cls,
+        session: AsyncSession,
+        **kwargs: Any,
+    ) -> ModelT:
+        """
+        Create a new record
+        """
+        instance = cls.model(**kwargs)
+        session.add(instance)
+        await session.flush()
+        await session.refresh(instance)
+        return instance
+
+    @classmethod
+    async def update(
+        cls,
+        session: AsyncSession,
+        instance: ModelT,
+        **kwargs: Any,
+    ) -> ModelT:
+        """
+        Update an existing record
+        """
+        for key, value in kwargs.items():
+            setattr(instance, key, value)
+        await session.flush()
+        await session.refresh(instance)
+        return instance
+
+    @classmethod
+    async def delete(
+        cls,
+        session: AsyncSession,
+        instance: ModelT,
+    ) -> None:
+        """
+        Delete a record
+        """
+        await session.delete(instance)
+        await session.flush()

```

---

## Code Evolution

### Change Analysis for `base_repository.py`

**What was Changed:**
The commit added a new file, `base_repository.py`, which introduces a generic repository class named `BaseRepository`. This class provides common CRUD (Create, Read, Update, Delete) operations using SQLAlchemy. The class is parameterized with a generic type `ModelT` that must be a subclass of `Base`.

**Why it was Likely Changed:**
This change likely aims to provide a reusable and abstract base for repository implementations across the application. By defining common methods like `get_by_id`, `get_multi`, `count`, `create`, `update`, and `delete`, developers can focus on specific logic rather than implementing these operations repeatedly.

**Impact on Behavior:**
The introduction of this generic repository class will enable consistent handling of database interactions throughout the application. Developers can now inherit from `BaseRepository` to create more specific repositories, ensuring a uniform approach to data management.

**Risks or Concerns:**
- **Overhead**: The use of generics and type hints might introduce some overhead in terms of performance.
- **Type Safety**: While the use of generics improves type safety, developers must ensure that they correctly implement the generic type `ModelT` when subclassing this repository.
- **Complexity**: For simpler applications or repositories with unique requirements, this abstraction might add unnecessary complexity.

Overall, this change enhances code reusability and maintainability while providing a solid foundation for database operations.

---

*Generated by CodeWorm on 2026-02-23 17:31*
