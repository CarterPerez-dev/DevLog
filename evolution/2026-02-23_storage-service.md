# storage_service

**Type:** Code Evolution
**Repository:** vuemantics
**File:** backend/services/storage_service.py
**Language:** python
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```python
Commit: 4d33b24a
Message: feat: dramatiq - bulkupload
Author: CarterPerez-dev
File: backend/services/storage_service.py
Change type: modified

Diff:
@@ -334,6 +334,30 @@ class StorageService:
 
         return frame_paths
 
+    async def get_upload_path(self, user_id: UUID, upload_id: UUID) -> Path | None:
+        """
+        Get the path to the original upload file
+
+        Args:
+            user_id: User's ID
+            upload_id: Upload's ID
+
+        Returns:
+            Path to the original file, or None if not found
+        """
+        upload_dir = self._get_upload_dir(user_id, upload_id)
+
+        if not upload_dir.exists():
+            return None
+
+        # Find the original file (should be named original.{extension})
+        original_files = list(upload_dir.glob("original.*"))
+
+        if not original_files:
+            return None
+
+        return original_files[0]
+
     async def delete_upload(self, user_id: UUID, upload_id: UUID) -> bool:
         """
         Delete all files for an upload

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
In the `StorageService` class, a new method `get_upload_path` was added at line 334. This method takes `user_id` and `upload_id` as parameters and returns the path to the original upload file or `None` if not found.

**Why it was Likely Changed:**
This change likely introduces functionality to retrieve the path of the original uploaded file, which could be useful for various operations such as serving files, generating previews, or processing uploads. The method checks if the directory exists and then looks for a file named `original.*`, ensuring only one file is returned.

**Impact on Behavior:**
The addition of this method allows other parts of the application to easily obtain the path to the original upload file without having to manually search through directories. This can simplify code in other services or controllers that need access to these files.

**Risks or Concerns:**
- **Performance:** The `glob` method could be slow if there are many files, especially with large uploads.
- **Security:** Ensure that the path returned does not expose sensitive data outside the intended directory structure.
- **Consistency:** If multiple original files exist (though unlikely), this method will only return one. Consider handling such cases to avoid potential issues.

Overall, this change enhances functionality while maintaining a clean and modular approach.

---

*Generated by CodeWorm on 2026-02-23 10:35*
