# useRepos

**Type:** Code Evolution
**Repository:** CodeWorm
**File:** dashboard/frontend/src/api/hooks/useRepos.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: ca3ce30d
Message: v1.0.2: add doc type system, Docker infrastructure, and web dashboard

- Add 11 documentation types (function, class, file, security review, TIL, etc.)
  with weighted random selection so the same codebase generates 10x more unique content
- Add Docker Compose for Ollama (GPU passthrough) + Redis + Dashboard + Nginx
- Add FastAPI backend with REST API, WebSocket live events, and Redis pub/sub
- Add React dashboard with stats, live log, commit feed, repo list, and worm viz
- Add next_scheduled_run logging after each cycle completes
- Update repos config and README for v1.0.2
Author: CarterPerez-dev
File: dashboard/frontend/src/api/hooks/useRepos.ts
Change type: new file

Diff:
@@ -0,0 +1,25 @@
+// Â©AngelaMos | 2026
+// useRepos.ts
+
+import type { UseQueryResult } from '@tanstack/react-query'
+import { useQuery } from '@tanstack/react-query'
+import type { RepoStatus } from '@/api/types'
+import { API_ENDPOINTS, QUERY_CONFIG, QUERY_KEYS } from '@/config'
+import { apiClient } from '@/core/api'
+
+export const repoQueries = {
+  all: () => QUERY_KEYS.REPOS,
+} as const
+
+const fetchRepos = async (): Promise<RepoStatus[]> => {
+  const response = await apiClient.get<RepoStatus[]>(API_ENDPOINTS.REPOS)
+  return response.data
+}
+
+export const useRepos = (): UseQueryResult<RepoStatus[], Error> => {
+  return useQuery({
+    queryKey: repoQueries.all(),
+    queryFn: fetchRepos,
+    staleTime: QUERY_CONFIG.STALE_TIME.STATIC,
+  })
+}

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
A new file `useRepos.ts` was added to the `dashboard/frontend/src/api/hooks` directory. This file introduces a React Query hook called `useRepos`, which fetches repository statuses from an API endpoint.

**Why it Was Likely Changed:**
This change likely aims to standardize and simplify state management for repository data in the dashboard frontend. By using React Query, the team can manage caching, refetching, and error handling more efficiently, ensuring that the UI remains responsive and up-to-date with minimal code duplication.

**Impact on Behavior:**
The `useRepos` hook will now be used throughout the dashboard to fetch repository statuses, reducing boilerplate code in components. This improves maintainability and consistency across the application. The use of `staleTime` ensures that data is refreshed periodically even if no new commits are pushed, keeping the UI relevant.

**Risks or Concerns:**
- **API Dependency:** The hook relies on an external API endpoint (`API_ENDPOINTS.REPOS`). Any changes to this endpoint could break the functionality.
- **Error Handling:** While React Query handles many error cases, custom error handling might be necessary depending on specific requirements.
- **Performance:** Frequent fetches due to `staleTime` could impact performance if not optimized. Ensuring efficient data fetching and caching strategies is crucial.

Overall, this change enhances the dashboard's functionality while maintaining a clean codebase.

---

*Generated by CodeWorm on 2026-02-23 21:18*
