# ollama.client

**Type:** Code Evolution
**Repository:** angelamos-operations
**File:** CarterOS-Client/src/aspects/assistant/facets/angela/api/ollama.client.ts
**Language:** typescript
**Lines:** 1-1
**Complexity:** 0.0

---

## Source Code

```typescript
Commit: 3894239b
Message: angela-3d implementation - in prog open wake
Author: CarterPerez-dev
File: CarterOS-Client/src/aspects/assistant/facets/angela/api/ollama.client.ts
Change type: modified

Diff:
@@ -7,7 +7,7 @@ import type { OllamaMessage, OllamaStreamChunk } from '../types'
 
 export async function* streamChat(
   messages: OllamaMessage[],
-  onChunk?: (text: string) => void
+  signal?: AbortSignal
 ): AsyncGenerator<string, string, unknown> {
   const config = getAngelaConfig()
 
@@ -23,7 +23,12 @@ export async function* streamChat(
       model: config.ollama.model,
       messages: [systemMessage, ...messages],
       stream: true,
+      options: {
+        temperature: config.ollama.temperature,
+        num_predict: config.ollama.maxTokens,
+      },
     }),
+    signal,
   })
 
   if (!response.ok) {

```

---

## Code Evolution

### Change Analysis

**What was Changed:**
- The function `streamChat` now accepts an optional `AbortSignal` parameter.
- Added a new options object with properties `temperature` and `num_predict` to the API call.

**Why it Was Likely Changed:**
This change likely aims to improve the flexibility of the chat streaming functionality by allowing users to abort the stream operation at any time using an `AbortSignal`. Additionally, adding configurable parameters like `temperature` and `maxTokens` provides more control over the generated responses.

**Impact on Behavior:**
- The function now supports graceful termination via `AbortSignal`.
- Users can customize the model's response generation behavior by setting `temperature` and `num_predict`.

**Risks or Concerns:**
- Introducing an `AbortSignal` might lead to unexpected interruptions if not handled properly.
- The addition of new options could break existing implementations that do not account for these parameters.

Overall, this change enhances the API's functionality and user control while introducing minor risks related to signal handling.

---

*Generated by CodeWorm on 2026-02-22 16:15*
