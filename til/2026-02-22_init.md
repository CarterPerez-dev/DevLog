# init

**Type:** Today I Learned
**Repository:** pyproject-setup
**File:** src/pyproject_setup/cli.py
**Language:** python
**Lines:** 62-265
**Complexity:** 21.0

---

## Source Code

```python
def init(
    name: str | None = typer.Option(
        None,
        "--name",
        "-n",
        help = "Project name"
    ),
    description: str | None = typer.Option(
        None,
        "--description",
        "-d",
        help = "Project description"
    ),
    preset: str | None = typer.Option(
        None,
        "--preset",
        "-p",
        help = "Project preset (fastapi-backend, library, cli-tool)",
    ),
    python: str = typer.Option(
        ">=3.12",
        "--python",
        help = "Python version requirement"
    ),
    package_path: str = typer.Option(
        "src",
        "--package-path",
        help = "Package source path"
    ),
    repository: str | None = typer.Option(
        None,
        "--repository",
        "-r",
        help = "Repository URL"
    ),
    homepage: str | None = typer.Option(
        None,
        "--homepage",
        help = "Homepage URL"
    ),
    workflow: bool = typer.Option(
        True,
        "--workflow/--no-workflow",
        help = "Add PyPI workflow"
    ),
    output: Path = typer.Option(
        Path(),
        "--output",
        "-o",
        help = "Output directory"
    ),
    force: bool = typer.Option(
        False,
        "--force",
        "-f",
        help = "Overwrite existing files"
    ),
    yapf: bool = typer.Option(
        False,
        "--yapf/--no-yapf",
        help = "Add .style.yapf config file"
    ),
) -> None:
    """
    [bold green]Initialize[/bold green] a new pyproject.toml with pre-configured tooling.

    Run interactively or pass flags for automation.
    """
    console.print()
    console.print(
        Panel(
            "[bold cyan]pyproject-setup[/bold cyan] - Project Scaffolder",
            border_style = "cyan",
        )
    )
    console.print()

    pyproject_path = output / "pyproject.toml"
    if (
        pyproject_path.exists()
        and not force
        and not Confirm.ask(
            f"[yellow]pyproject.toml already exists at {output}. Overwrite?[/yellow]"
        )
    ):
        console.print("[red]Aborted.[/red]")
        raise typer.Exit(1)

    if name is None:
        name = Prompt.ask(
            "[bold]Project name[/bold]",
            default = output.resolve().name
        )

    if description is None:
        description = Prompt.ask("[bold]Description[/bold]", default = "")

    if preset is None:
        preset_choices = list(PRESETS.keys())
        console.print("\n[bold]Available presets:[/bold]")
        for i, p in enumerate(preset_choices, 1):
            preset_obj = PRESETS[p]
            console.print(
                f"  [cyan]{i}[/cyan]. {p} - {preset_obj.description}"
            )

        while True:
            choice = Prompt.ask(
                "\n[bold]Select preset[/bold]",
                default = "1",
            )
            try:
                idx = int(choice) - 1
                if 0 <= idx < len(preset_choices):
                    preset = preset_choices[idx]
     
```

---

## Today I Learned

TIL: In the `init` function, optional parameters are defined using `typer.Option`, which not only sets default values and help messages but also makes command-line interfaces more user-friendly. This pattern simplifies argument handling and documentation.

```markdown
Today I learned that `typer.Option` in Python is a handy way to define command-line arguments with defaults, help texts, and validation. It enhances usability and documentation for CLI tools.
```

---

*Generated by CodeWorm on 2026-02-22 11:16*
