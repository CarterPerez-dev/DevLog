# ProjectFactory.create

**Type:** Today I Learned
**Repository:** my-portfolio
**File:** v1/backend/conftest.py
**Language:** python
**Lines:** 284-312
**Complexity:** 4.0

---

## Source Code

```python
async def create(
        cls,
        session: AsyncSession,
        *,
        slug: str | None = None,
        language: Language = Language.ENGLISH,
        title: str | None = None,
        description: str | None = None,
        tech_stack: list[str] | None = None,
        is_featured: bool = False,
        status: ProjectStatus = ProjectStatus.ACTIVE,
    ) -> Project:
        cls._counter += 1

        project = Project(
            slug = slug or f"test-project-{cls._counter}",
            language = language,
            title = title or f"Test Project {cls._counter}",
            description = description
            or f"Description for project {cls._counter}",
            tech_stack = tech_stack or ["Python",
                                        "FastAPI"],
            is_featured = is_featured,
            status = status,
        )
        session.add(project)
        await session.flush()
        await session.refresh(project)
        return project
```

---

## Today I Learned

TIL: In the `create` method, the class uses an instance variable `_counter` to automatically generate unique slugs and titles for projects. This ensures each project has a distinct identifier without needing external state management, making it both elegant and efficient.

```python
cls._counter += 1

project = Project(
    slug=slug or f"test-project-{cls._counter}",
    title=title or f"Test Project {cls._counter}",
)
```

This pattern reduces redundancy and simplifies project creation logic.

---

*Generated by CodeWorm on 2026-02-21 20:06*
