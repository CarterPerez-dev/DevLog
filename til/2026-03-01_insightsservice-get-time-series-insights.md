# InsightsService.get_time_series_insights

**Type:** Today I Learned
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/analytics/facets/insights/service.py
**Language:** python
**Lines:** 390-415
**Complexity:** 3.0

---

## Source Code

```python
async def get_time_series_insights(
        session: AsyncSession,
    ) -> TimeSeriesInsightsResponse:
        """Get performance over time"""
        time_series_data = await InsightsRepository.get_time_series_data(
            session
        )

        data_points = [
            TimeSeriesDataPoint(
                date = point["date"],
                views = point["views"],
                engagement_rate = point["engagement_rate"],
                new_followers = point["new_followers"],
                video_count = point["video_count"],
            ) for point in time_series_data
        ]

        date_range = ("", "")
        if data_points:
            date_range = (data_points[0].date, data_points[-1].date)

        return TimeSeriesInsightsResponse(
            data_points = data_points,
            date_range = date_range,
        )
```

---

## Today I Learned

TIL: This function uses list comprehension to efficiently create `TimeSeriesDataPoint` objects from a list of dictionaries, making the code both concise and readable. It then calculates the date range based on these points, returning a structured response.

```markdown
TIL: List comprehension in Python can simplify data transformation. In `get_time_series_insights`, it elegantly converts each dictionary to a `TimeSeriesDataPoint` object, showcasing a clean and efficient coding style.
```

---

*Generated by CodeWorm on 2026-03-01 22:47*
