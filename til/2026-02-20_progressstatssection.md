# ProgressStatsSection

**Type:** Today I Learned
**Repository:** CertGames-Core
**File:** frontend/user-app/src/domains/study-hub/ui/components/progressStatsSection.tsx
**Language:** tsx
**Lines:** 17-99
**Complexity:** 22.0

---

## Source Code

```tsx
function ProgressStatsSection({
  activeCertification,
  user,
}: ProgressStatsSectionProps): React.ReactElement {
  const certConfig = React.useMemo(() => {
    return activeCertification !== null && activeCertification !== undefined
      ? (getCertificationConfig(activeCertification) ?? null)
      : null;
  }, [activeCertification]);

  const testCategory = certConfig?.testCategory;

  const stats = useCertificationPerformance(user?._id, testCategory);

  const isLoading = stats === undefined;

  const testsCompleted = stats?.unique_tests ?? 0;
  const totalTests = stats?.total_tests ?? 10;
  const averageScore = stats?.average_score ?? 0;
  const bestScore = stats?.best_score ?? 0;
  const completionRate = stats?.completion_rate ?? 0;

  const hasActivity = (stats?.total_attempts ?? 0) > 0;

  if (isLoading) {
    return (
      <section className={styles.statsStrip}>
        <div className={styles.loadingText}>Loading stats...</div>
      </section>
    );
  }

  return (
    <section className={styles.statsStrip}>
      <div className={styles.statsRow}>
        <div className={styles.stat}>
          <span className={styles.statValue}>
            {testsCompleted}
            <span className={styles.statDivider}>/</span>
            {totalTests}
          </span>
          <span className={styles.statLabel}>Completed</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.statValue}>
            {hasActivity ? `${averageScore.toFixed(1)}%` : '--'}
          </span>
          <span className={styles.statLabel}>Avg Score</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.statValue}>
            {hasActivity ? `${bestScore.toFixed(1)}%` : '--'}
          </span>
          <span className={styles.statLabel}>Best</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.statValue}>
            {stats?.total_attempts ?? 0}
          </span>
          <span className={styles.statLabel}>Attempts</span>
        </div>

        <div className={styles.separator} />

        <div className={styles.stat}>
          <span className={styles.completionValue}>
            {completionRate.toFixed(0)}%
          </span>
          <span className={styles.statLabel}>Progress</span>
        </div>
      </div>
    </section>
  );
}
```

---

## Today I Learned

TIL: I learned how to handle loading states elegantly using optional chaining and conditional rendering in React. In `ProgressStatsSection`, the `isLoading` state checks if `stats` is `undefined`, displaying a "Loading stats..." message until data arrives, ensuring a smooth user experience.

```tsx
const isLoading = stats === undefined;

if (isLoading) {
  return <div>Loading stats...</div>;
}
```

This pattern keeps the code clean and avoids unnecessary complexity.

---

*Generated by CodeWorm on 2026-02-20 12:50*
