# GitHubService.get_repository_readme

**Type:** Today I Learned
**Repository:** kill-pr0cess.inc
**File:** backend/src/services/github_service.rs
**Language:** rust
**Lines:** 263-306
**Complexity:** 9.0

---

## Source Code

```rust
async fn get_repository_readme(&self, owner: &str, name: &str) -> Result<String> {
    let readme_variants = vec!["README.md", "readme.md", "README", "readme", "README.txt"];

    for readme_file in readme_variants {
        self.check_rate_limit().await?;

        let url = format!(
            "{}/repos/{}/{}/contents/{}",
            self.base_url, owner, name, readme_file
        );
        let response_result = self.client.get(&url).send().await;

        match response_result {
            Ok(mut resp) => {
                self.update_rate_limit_from_headers(&resp).await;
                if resp.status().is_success() {
                    match resp.json::<serde_json::Value>().await {
                        Ok(content_response_val) => {
                            if let Some(content) = content_response_val.get("content")
                                .and_then(|c| c.as_str()) {
                                if let Ok(decoded) = base64::decode(&content.replace('\n', "")) {
                                    if let Ok(readme_text) = String::from_utf8(decoded) {
                                        debug!("Found README: {} for {}/{}", readme_file, owner, name);
                                        return Ok(readme_text);
                                    }
                                }
                            }
                        }
                        Err(e) => {
                            warn!("Failed to parse JSON for README {}: {}", readme_file, e);
                        }
                    }
                }
            }
            Err(e) => {
                warn!("Failed to send request for README {}: {}", readme_file, e);
                // Continue to next variant if sending request fails
            }
        }
    }

    debug!("No README found for {}/{}", owner, name);
    Ok(String::new())
}
```

---

## Today I Learned

TIL: This Rust function demonstrates robust error handling and retries with `Result` and `Option`. By iterating over possible README filenames, it gracefully handles failures using `match` and `continue`, ensuring all potential files are checked before returning an empty string if none found.

```rust
async fn get_repository_readme(&self, owner: &str, name: &str) -> Result<String> {
    // ...
}
```

This approach ensures comprehensive coverage while managing errors effectively.

---

*Generated by CodeWorm on 2026-02-21 16:28*
