# inspectToProject

**Type:** Today I Learned
**Repository:** angelamos-operations
**File:** Docker-Kentros/internal/docker/containers.go
**Language:** go
**Lines:** 194-266
**Complexity:** 14.0

---

## Source Code

```go
func inspectToProject(info container.InspectResponse) model.Container {
	name := strings.TrimPrefix(info.Name, "/")

	ports := make([]model.PortMapping, 0)
	if info.NetworkSettings != nil {
		for portProto, bindings := range info.NetworkSettings.Ports {
			parts := strings.Split(string(portProto), "/")
			containerPort := uint16(0)
			protocol := "tcp"
			if len(parts) >= 1 {
				_, _ = fmt.Sscanf(parts[0], "%d", &containerPort)
			}
			if len(parts) >= 2 {
				protocol = parts[1]
			}

			for _, binding := range bindings {
				hostPort := uint16(0)
				_, _ = fmt.Sscanf(binding.HostPort, "%d", &hostPort)
				ports = append(ports, model.PortMapping{
					HostIP:        binding.HostIP,
					HostPort:      hostPort,
					ContainerPort: containerPort,
					Protocol:      protocol,
				})
			}
		}
	}

	health := ""
	if info.State != nil && info.State.Health != nil {
		health = info.State.Health.Status
	}

	var createdAt, startedAt time.Time
	if info.Created != "" {
		createdAt, _ = time.Parse(time.RFC3339Nano, info.Created)
	}
	if info.State != nil && info.State.StartedAt != "" {
		startedAt, _ = time.Parse(time.RFC3339Nano, info.State.StartedAt)
	}

	state := ""
	status := ""
	if info.State != nil {
		state = info.State.Status
		status = info.State.Status
	}

	labels := make(map[string]string)
	if info.Config != nil {
		labels = info.Config.Labels
	}

	image := ""
	if info.Config != nil {
		image = info.Config.Image
	}

	return model.Container{
		ID:          info.ID,
		Name:        name,
		ServiceName: labels["com.docker.compose.service"],
		Image:       image,
		Status:      status,
		State:       state,
		Health:      health,
		Ports:       ports,
		Labels:      labels,
		CreatedAt:   createdAt,
		StartedAt:   startedAt,
	}
}
```

---

## Today I Learned

TIL: In Go, `fmt.Sscanf` is used creatively to parse strings into numeric values within a loop. This snippet demonstrates parsing host ports and container ports from string representations, showcasing how Go handles dynamic data conversion elegantly.

```go
for _, binding := range bindings {
    hostPort := uint16(0)
    _ = fmt.Sscanf(binding.HostPort, "%d", &hostPort)
    // ...
}
```

This technique simplifies handling variable-length input formats, making the code both concise and flexible.

---

*Generated by CodeWorm on 2026-02-20 18:17*
