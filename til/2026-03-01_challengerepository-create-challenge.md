# ChallengeRepository.create_challenge

**Type:** Today I Learned
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/challenge/facets/tracker/repository.py
**Language:** python
**Lines:** 86-104
**Complexity:** 1.0

---

## Source Code

```python
async def create_challenge(
        cls,
        session: AsyncSession,
        start_date: date,
        content_goal: int = 1500,
        jobs_goal: int = 1000,
    ) -> Challenge:
        """
        Create a new challenge with calculated end date
        """
        end_date = start_date + timedelta(days = 29)
        return await cls.create(
            session,
            start_date = start_date,
            end_date = end_date,
            content_goal = content_goal,
            jobs_goal = jobs_goal,
            is_active = True,
        )
```

---

## Today I Learned

TIL: In the `create_challenge` method, using `cls` as a class reference is clever for factory methods like this one. It allows the method to be defined within a class and still create instances of that class, promoting reusability and encapsulation.

```python
async def create_challenge(
    cls,
    session: AsyncSession,
    start_date: date,
    content_goal: int = 1500,
    jobs_goal: int = 1000,
) -> Challenge:
    end_date = start_date + timedelta(days=29)
    return await cls.create(
        session,
        start_date=start_date,
        end_date=end_date,
        content_goal=content_goal,
        jobs_goal=jobs_goal,
        is_active=True,
    )
```

This pattern makes the method flexible and self-referential, a common Pythonic approach.

---

*Generated by CodeWorm on 2026-03-01 15:17*
