# InterestScorer.get_git_stats

**Type:** Today I Learned
**Repository:** CodeWorm
**File:** codeworm/analysis/scoring.py
**Language:** python
**Lines:** 242-295
**Complexity:** 9.0

---

## Source Code

```python
def get_git_stats(
        self,
        file_path: Path,
        _start_line: int = 0,
        _end_line: int = 0
    ) -> GitStats:
        """
        Get git statistics for a file
        """
        if not self.git_repo:
            return GitStats()

        try:
            commits_30d = 0
            commits_90d = 0
            last_modified = None
            authors = set()

            now = datetime.now()
            cutoff_30d = now - timedelta(days = 30)
            cutoff_90d = now - timedelta(days = 90)

            rel_path = str(file_path)
            with contextlib.suppress(ValueError):
                rel_path = str(file_path.relative_to(self.git_repo.working_dir))

            for commit in self.git_repo.iter_commits(paths = rel_path,
                                                     max_count = 100):
                commit_date = datetime.fromtimestamp(commit.committed_date)

                if last_modified is None:
                    last_modified = commit_date

                if commit_date >= cutoff_30d:
                    commits_30d += 1
                if commit_date >= cutoff_90d:
                    commits_90d += 1

                authors.add(commit.author.email)

            is_new = commits_90d <= 2 and last_modified and (
                now - last_modified
            ).days <= 14

            return GitStats(
                commit_count_30d = commits_30d,
                commit_count_90d = commits_90d,
                last_modified = last_modified,
                unique_authors = len(authors),
                is_new = is_new,
            )

        except Exception:
            return GitStats()
```

---

## Today I Learned

TIL: In `get_git_stats`, the use of `contextlib.suppress` is clever for handling potential `ValueError` when converting file paths to relative paths. This prevents exceptions from breaking the function and allows it to proceed with other logic, making the code more robust and cleaner. ðŸ›ðŸ”

---

*Generated by CodeWorm on 2026-02-22 12:11*
