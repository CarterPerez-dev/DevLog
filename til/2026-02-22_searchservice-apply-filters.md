# SearchService._apply_filters

**Type:** Today I Learned
**Repository:** vuemantics
**File:** backend/services/search_service.py
**Language:** python
**Lines:** 185-223
**Complexity:** 11.0

---

## Source Code

```python
def _apply_filters(
        self,
        results: list[SearchResult],
        request: SearchRequest
    ) -> list[SearchResult]:
        """
        Apply additional filters to search results

        Args:
            results: Initial search results
            request: Search request with filters

        Returns:
            Filtered results
        """
        filtered = results

        if request.file_types:
            filtered = [
                r for r in filtered
                if r.upload.file_type in request.file_types
            ]

        if request.date_from:
            filtered = [
                r for r in filtered
                if r.upload.created_at >= request.date_from
            ]

        if request.date_to:
            filtered = [
                r for r in filtered
                if r.upload.created_at <= request.date_to
            ]

        for rank, result in enumerate(filtered, 1):
            result.rank = rank

        return filtered
```

---

## Today I Learned

TIL: This function demonstrates a Pythonic way to apply multiple filters using list comprehensions and in-place filtering. The use of `filtered = [r for r in filtered if condition]` keeps the code clean and readable, making it easy to add more filters without cluttering the logic.

```python
def _apply_filters(self, results: list[SearchResult], request: SearchRequest) -> list[SearchResult]:
    filtered = results

    if request.file_types:
        filtered = [r for r in filtered if r.upload.file_type in request.file_types]

    if request.date_from:
        filtered = [r for r in filtered if r.upload.created_at >= request.date_from]

    if request.date_to:
        filtered = [r for r in filtered if r.upload.created_at <= request.date_to]

    for rank, result in enumerate(filtered, 1):
        result.rank = rank

    return filtered
```

---

*Generated by CodeWorm on 2026-02-22 10:10*
