# TargetRouter.find_targets

**Type:** Today I Learned
**Repository:** CodeWorm
**File:** codeworm/analysis/targets.py
**Language:** python
**Lines:** 640-684
**Complexity:** 9.0

---

## Source Code

```python
def find_targets(
        self,
        doc_type: DocType,
        repo: RepoEntry,
        limit: int = 20,
    ) -> list[DocumentationTarget]:
        if doc_type == DocType.FUNCTION_DOC:
            candidates = self.perspective_finder.analyzer.find_candidates(
                repo = repo,
                limit = limit,
            )
            return [
                DocumentationTarget(
                    doc_type = DocType.FUNCTION_DOC,
                    snippet = c.snippet,
                    source_context = c.snippet.source,
                    metadata = {
                        "relative_path": str(c.scanned_file.relative_path)
                    },
                ) for c in candidates
            ]

        if doc_type == DocType.FILE_DOC:
            return self.file_finder.find(repo, limit)

        if doc_type == DocType.CLASS_DOC:
            return self.class_finder.find(repo, limit)

        if doc_type == DocType.MODULE_DOC:
            return self.module_finder.find(repo, limit)

        if doc_type == DocType.CODE_EVOLUTION:
            return self.evolution_finder.find(repo, limit)

        if doc_type == DocType.PATTERN_ANALYSIS:
            return self.pattern_finder.find(repo, limit)

        if doc_type in (
                DocType.SECURITY_REVIEW,
                DocType.PERFORMANCE_ANALYSIS,
                DocType.TIL,
        ):
            return self.perspective_finder.find(repo, doc_type, limit)

        return []
```

---

## Today I Learned

TIL: This function uses polymorphism and method dispatch to handle different `DocType` cases elegantly. By delegating work to specific finder methods, it avoids complex nested if-else logic, making the code cleaner and more maintainable.

```python
def find_targets(self, doc_type: DocType, repo: RepoEntry, limit: int = 20) -> list[DocumentationTarget]:
    # ... (omitted for brevity)
```

Each `DocType` maps to a specific finder method, showcasing Python's flexibility with polymorphism.

---

*Generated by CodeWorm on 2026-02-22 12:18*
