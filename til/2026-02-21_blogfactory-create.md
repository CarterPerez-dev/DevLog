# BlogFactory.create

**Type:** Today I Learned
**Repository:** my-portfolio
**File:** v1/backend/conftest.py
**Language:** python
**Lines:** 417-444
**Complexity:** 4.0

---

## Source Code

```python
async def create(
        cls,
        session: AsyncSession,
        *,
        language: Language = Language.ENGLISH,
        title: str | None = None,
        description: str | None = None,
        external_url: str | None = None,
        category: BlogCategory = BlogCategory.TUTORIAL,
        is_visible: bool = True,
        is_featured: bool = False,
    ) -> Blog:
        cls._counter += 1

        blog = Blog(
            language = language,
            title = title or f"Test Blog {cls._counter}",
            description = description or f"Blog description {cls._counter}",
            external_url = external_url
            or f"https://blog.test.com/post-{cls._counter}",
            category = category,
            is_visible = is_visible,
            is_featured = is_featured,
        )
        session.add(blog)
        await session.flush()
        await session.refresh(blog)
        return blog
```

---

## Today I Learned

TIL: In the `create` method, the class uses an instance variable `_counter` to auto-generate unique titles and URLs for each blog post. This clever approach ensures uniqueness without needing a database query, making it efficient and Pythonic.

```python
cls._counter += 1

blog = Blog(
    title=title or f"Test Blog {cls._counter}",
    external_url=external_url or f"https://blog.test.com/post-{cls._counter}",
)
```

This pattern is both concise and effective for generating default values.

---

*Generated by CodeWorm on 2026-02-21 20:30*
