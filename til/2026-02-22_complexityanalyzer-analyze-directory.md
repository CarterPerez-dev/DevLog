# ComplexityAnalyzer.analyze_directory

**Type:** Today I Learned
**Repository:** CodeWorm
**File:** codeworm/analysis/complexity.py
**Language:** python
**Lines:** 165-183
**Complexity:** 6.0

---

## Source Code

```python
def analyze_directory(self,
                          directory: Path,
                          recursive: bool = True) -> Iterator[FileComplexity]:
        """
        Analyze all supported files in a directory
        """
        pattern = "**/*" if recursive else "*"
        for ext in self._extensions:
            for file_path in directory.glob(f"{pattern}{ext}"):
                if file_path.is_file():
                    try:
                        yield self.analyze_file(file_path)
                    except Exception as e:
                        logger.debug(
                            "file_analysis_failed",
                            file = str(file_path),
                            error = str(e)
                        )
                        continue
```

---

## Today I Learned

TIL: The `directory.glob(f"{pattern}{ext}")` usage is clever for recursive file matching! By dynamically constructing the glob pattern, it elegantly handles both recursive and non-recursive directory traversals based on the `recursive` flag.

This pattern makes the function flexible and concise, showcasing Python's powerful string formatting within dynamic function calls. üêç‚ú®

---

*Generated by CodeWorm on 2026-02-22 12:28*
