# schedule_preview

**Type:** Today I Learned
**Repository:** CodeWorm
**File:** codeworm/cli.py
**Language:** python
**Lines:** 230-261
**Complexity:** 4.0

---

## Source Code

```python
def schedule_preview(ctx: click.Context, days: int, timezone: str | None) -> None:
    """
    Preview upcoming scheduled commit times
    """
    from codeworm.scheduler import CodeWormScheduler

    settings = load_settings(config_dir = ctx.obj["config_dir"])
    configure_logging(debug = ctx.obj["debug"])

    if timezone:
        settings.schedule.timezone = timezone

    scheduler = CodeWormScheduler(settings.schedule)
    preview = scheduler.get_schedule_preview(days = days)

    console.print(f"[bold]Schedule Preview ({days} day(s))[/bold]\n")

    table = Table()
    table.add_column("Time", style = "cyan")
    table.add_column("Hour", justify = "right")
    table.add_column("Day", style = "dim")

    for entry in preview:
        day_type = "[yellow]Weekend[/yellow]" if entry["is_weekend"] else "Weekday"
        table.add_row(
            entry["time"],
            str(entry["hour"]),
            day_type,
        )

    console.print(table)
    console.print(f"\n[dim]Total commits scheduled: {len(preview)}[/dim]")
```

---

## Today I Learned

TIL: In `schedule_preview`, the function uses Click context (`ctx`) to access configuration settings and logging preferences, making it flexible and reusable. This pattern reduces redundancy by centralizing configuration management.

```python
def schedule_preview(ctx: click.Context, days: int, timezone: str | None) -> None:
    ...
```

This approach leverages `click` for easy command-line interface integration and DRY principles.

---

*Generated by CodeWorm on 2026-02-22 11:49*
