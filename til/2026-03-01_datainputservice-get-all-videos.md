# DataInputService.get_all_videos

**Type:** Today I Learned
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/analytics/facets/data_input/service.py
**Language:** python
**Lines:** 86-109
**Complexity:** 2.0

---

## Source Code

```python
async def get_all_videos(
        session: AsyncSession,
        page: int = 1,
        page_size: int = 50,
    ) -> TikTokVideoListResponse:
        """
        Get all videos with pagination
        """
        skip = (page - 1) * page_size
        videos = await TikTokVideoRepository.get_multi(
            session,
            skip = skip,
            limit = page_size
        )
        total = await TikTokVideoRepository.count(session)

        return TikTokVideoListResponse(
            items = [
                TikTokVideoResponse.model_validate(v) for v in videos
            ],
            total = total,
            page = page,
            page_size = page_size,
        )
```

---

## Today I Learned

TIL: This function uses pagination elegantly by calculating `skip` based on `page` and `page_size`. It fetches videos and counts total items separately, then constructs a response object with validation, ensuring clean and reusable code. Clever use of async functions for efficient data retrieval! ðŸš€ðŸ”—

---

*Generated by CodeWorm on 2026-03-01 20:29*
