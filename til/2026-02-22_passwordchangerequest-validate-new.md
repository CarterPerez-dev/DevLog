# PasswordChangeRequest.validate_new_password

**Type:** Today I Learned
**Repository:** vuemantics
**File:** backend/schemas/user.py
**Language:** python
**Lines:** 121-135
**Complexity:** 4.0

---

## Source Code

```python
def validate_new_password(cls, v: str, info: ValidationInfo) -> str:
        """
        Validate new password using centralized validation logic.
        """
        is_valid, error_msg = validate_password_strength(v)
        if not is_valid:
            raise ValueError(error_msg)

        if "current_password" in info.data and v == info.data[
                "current_password"]:
            raise ValueError(
                "New password must be different from current password"
            )

        return v
```

---

## Today I Learned

TIL: This function uses context through `ValidationInfo` to compare new and current passwords without hardcoding the current password. By checking if `"current_password"` exists in `info.data`, it dynamically accesses the old password, making the validation logic reusable.

```python
def validate_new_password(cls, v: str, info: ValidationInfo) -> str:
    is_valid, error_msg = validate_password_strength(v)
    if not is_valid:
        raise ValueError(error_msg)

    if "current_password" in info.data and v == info.data["current_password"]:
        raise ValueError("New password must be different from current password")

    return v
```

This approach keeps the validation logic clean and flexible.

---

*Generated by CodeWorm on 2026-02-22 10:07*
