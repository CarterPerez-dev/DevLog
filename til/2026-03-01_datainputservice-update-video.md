# DataInputService.update_video

**Type:** Today I Learned
**Repository:** angelamos-operations
**File:** CarterOS-Server/src/aspects/analytics/facets/data_input/service.py
**Language:** python
**Lines:** 112-130
**Complexity:** 2.0

---

## Source Code

```python
async def update_video(
        session: AsyncSession,
        video_id: UUID,
        data: TikTokVideoUpdate,
    ) -> TikTokVideoResponse:
        """
        Update a video record
        """
        video = await TikTokVideoRepository.get_by_id(session, video_id)
        if not video:
            raise TikTokVideoNotFound(video_id)

        update_dict = data.model_dump(exclude_unset = True)
        video = await TikTokVideoRepository.update(
            session,
            video,
            **update_dict
        )
        return TikTokVideoResponse.model_validate(video)
```

---

## Today I Learned

TIL: I learned how to use `model_dump(exclude_unset=True)` in Pydantic models to update only the fields that have been set, making the function more efficient and cleaner. This approach ensures that unnecessary fields are not passed to the database update method.

```python
update_dict = data.model_dump(exclude_unset=True)
```

This line is both clever and useful for maintaining clean code when updating records!

---

*Generated by CodeWorm on 2026-03-01 21:54*
