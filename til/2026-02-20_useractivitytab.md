# UserActivityTab

**Type:** Today I Learned
**Repository:** CertGames-Core
**File:** frontend/admin-app/src/modules/users/components/UserDetailTabs/UserActivityTab.tsx
**Language:** tsx
**Lines:** 27-270
**Complexity:** 25.0

---

## Source Code

```tsx
function UserActivityTab({ user }: UserActivityTabProps): React.JSX.Element {
  const parseUserAgent = (
    userAgent: string | undefined,
  ): { device: string; browser: string; os: string } => {
    if (!userAgent) return { device: 'Unknown', browser: 'Unknown', os: 'Unknown' };

    let device = 'Desktop';
    let browser = 'Unknown';
    let os = 'Unknown';

    if (/Mobile/i.test(userAgent)) device = 'Mobile';
    else if (/Tablet|iPad/i.test(userAgent)) device = 'Tablet';

    if (/Chrome/i.test(userAgent) && !/Edge/i.test(userAgent)) browser = 'Chrome';
    else if (/Safari/i.test(userAgent) && !/Chrome/i.test(userAgent))
      browser = 'Safari';
    else if (/Firefox/i.test(userAgent)) browser = 'Firefox';
    else if (/Edge/i.test(userAgent)) browser = 'Edge';

    if (/Windows/i.test(userAgent)) os = 'Windows';
    else if (/Mac OS/i.test(userAgent)) os = 'macOS';
    else if (/Linux/i.test(userAgent)) os = 'Linux';
    else if (/Android/i.test(userAgent)) os = 'Android';
    else if (/iOS|iPhone|iPad/i.test(userAgent)) os = 'iOS';

    return { device, browser, os };
  };

  const userAgentInfo = parseUserAgent(user.activity?.user_agent ?? undefined);

  const getDeviceIcon = (device: string): React.JSX.Element => {
    switch (device) {
      case 'Mobile':
        return <FiSmartphone />;
      case 'Tablet':
        return <FiTablet />;
      default:
        return <FiMonitor />;
    }
  };

  const formatTimeDifference = (date: string | null | undefined): string => {
    if (!date) return 'Never';

    const now = new Date();
    const then = new Date(date);
    const diffMs = now.getTime() - then.getTime();
    const diffMins = Math.floor(diffMs / 60000);
    const diffHours = Math.floor(diffMins / 60);
    const diffDays = Math.floor(diffHours / 24);

    if (diffMins < 1) return 'Just now';
    if (diffMins < 60)
      return `${String(diffMins)} minute${diffMins > 1 ? 's' : ''} ago`;
    if (diffHours < 24)
      return `${String(diffHours)} hour${diffHours > 1 ? 's' : ''} ago`;
    if (diffDays < 30)
      return `${String(diffDays)} day${diffDays > 1 ? 's' : ''} ago`;

    return then.toLocaleDateString();
  };

  return (
    <div className={styles.activityTab}>
      <div className={styles.section}>
        <div className={styles.sectionHeader}>
          <h3>Current Status</h3>
          <div className={styles.statusBadge}>
            {user.activity?.is_online ? (
              <>
                <FiWifi className={styles.onlineIcon} />
                <span>Online</span>
              </>
            ) : (
              <>
                <FiWifiOff className={styles.offlineIcon} />
                <span>Offline</span>
              </>
            )}
          </div>
        </div>

        <div className={styles.statusGrid}>
          <div className={styles.statusCard}>
            <div className={styles.cardIcon}>
              <FiClock />
            </div>
            <div className={styles.cardContent}>
        
```

---

## Today I Learned

TIL: In `UserActivityTab`, the function uses pattern matching with a switch statement to categorize device types from user agent strings, making it easy to update and maintain. This approach keeps the code clean and readable.

```tsx
const getDeviceIcon = (device: string): React.JSX.Element => {
  switch (device) {
    case 'Mobile':
      return <FiSmartphone />;
    case 'Tablet':
      return <FiTablet />;
    default:
      return <FiMonitor />;
  }
};
```

This pattern simplifies handling different device types and ensures consistency in UI representation.

---

*Generated by CodeWorm on 2026-02-20 07:48*
