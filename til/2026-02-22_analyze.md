# analyze

**Type:** Today I Learned
**Repository:** CodeWorm
**File:** codeworm/cli.py
**Language:** python
**Lines:** 186-223
**Complexity:** 3.0

---

## Source Code

```python
def analyze(ctx: click.Context, repo: Path, limit: int) -> None:
    """
    Analyze a repository and show documentation candidates
    """
    from codeworm.analysis import CodeAnalyzer, ParserManager
    from codeworm.core.config import RepoEntry

    configure_logging(debug = ctx.obj["debug"])
    ParserManager.initialize()

    repo_config = RepoEntry(name = repo.name, path = repo, weight = 5)
    analyzer = CodeAnalyzer([repo_config])

    console.print(f"[bold]Analyzing {repo}...[/bold]\n")

    candidates = analyzer.find_candidates(repo = repo_config, limit = limit)

    if not candidates:
        console.print("[yellow]No candidates found[/yellow]")
        return

    table = Table(title = f"Top {len(candidates)} Documentation Candidates")
    table.add_column("Score", style = "cyan", justify = "right")
    table.add_column("Function", style = "green")
    table.add_column("File", style = "dim")
    table.add_column("Lines", justify = "right")
    table.add_column("Complexity", justify = "right")

    for c in candidates:
        table.add_row(
            f"{c.score:.1f}",
            c.snippet.display_name,
            str(c.scanned_file.relative_path),
            str(c.snippet.line_count),
            str(int(c.snippet.complexity)),
        )

    console.print(table)
```

---

## Today I Learned

TIL: In the `analyze` function, the use of rich text styling with `console.print(f"[bold]Analyzing {repo}...[/bold]\n")` and table formatting is both visually appealing and functional. This not only enhances readability but also provides clear visual feedback to the user, making the output more engaging and easier to parse.

This approach leverages Click's console printing capabilities for dynamic styling and rich text, improving the overall user experience without complicating the logic.

---

*Generated by CodeWorm on 2026-02-22 11:57*
