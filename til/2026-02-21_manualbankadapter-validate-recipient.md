# ManualBankAdapter.validate_recipient

**Type:** Today I Learned
**Repository:** stripe-referral
**File:** src/stripe_referral/adapters/manual.py
**Language:** python
**Lines:** 40-90
**Complexity:** 10.0

---

## Source Code

```python
def validate_recipient(
        self,
        recipient_data: dict[str,
                             Any]
    ) -> RecipientValidation:
        """
        Validate bank account information is present
        """
        required_fields = [
            "bank_account_number",
            "routing_number",
            "account_holder_name",
        ]

        missing_fields = [
            field for field in required_fields
            if field not in recipient_data
        ]

        if missing_fields:
            return RecipientValidation(
                valid = False,
                error =
                f"Missing required fields: {', '.join(missing_fields)}",
            )

        account_number = recipient_data.get("bank_account_number", "")
        if not account_number or len(account_number) < 4:
            return RecipientValidation(
                valid = False,
                error = "Invalid bank account number",
            )

        routing_number = recipient_data.get("routing_number", "")
        if not routing_number or len(routing_number) != 9:
            return RecipientValidation(
                valid = False,
                error = "Invalid routing number (must be 9 digits)",
            )

        account_holder_name = recipient_data.get(
            "account_holder_name",
            ""
        )
        if not account_holder_name or len(account_holder_name) < 2:
            return RecipientValidation(
                valid = False,
                error = "Invalid account holder name",
            )

        return RecipientValidation(valid = True)
```

---

## Today I Learned

TIL: This function uses list comprehensions to concisely check for missing required fields, making the validation logic both readable and efficient.

```python
missing_fields = [field for field in required_fields if field not in recipient_data]
```

This pattern reduces boilerplate and clearly communicates the intent of identifying absent fields.

---

*Generated by CodeWorm on 2026-02-21 23:26*
