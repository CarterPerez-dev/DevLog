# meets_achievement_criteria

**Type:** Today I Learned
**Repository:** CertGames-Core
**File:** backend/api/domains/progression/services/achieve_engine.py
**Language:** python
**Lines:** 12-61
**Complexity:** 20.0

---

## Source Code

```python
def meets_achievement_criteria(
    criteria: dict[str,
                   Any],
    user: User,
    user_counters: dict[str,
                        Any]
) -> bool:
    """
    Check if user meets the achievement criteria for unlock eligibility.
    """
    if not criteria:
        return False

    if "level" in criteria and (user.level or 1) < criteria["level"]:
        return False

    if "coins" in criteria and (user.coins or 0) < criteria["coins"]:
        return False

    if "testCount" in criteria:
        current_tests = user_counters.get("total_tests_completed", 0)
        if current_tests < criteria["testCount"]:
            return False

    if "perfectTests" in criteria:
        current_perfect = user_counters.get("perfect_tests_count", 0)
        if current_perfect < criteria["perfectTests"]:
            return False

    if "totalQuestions" in criteria:
        current_questions = user_counters.get(
            "total_questions_answered",
            0
        )
        if current_questions < criteria["totalQuestions"]:
            return False

    if "minScore" in criteria:
        highest_score = user_counters.get("highest_score_ever", 0)
        if highest_score < criteria["minScore"]:
            return False

    if "minScoreBefore" in criteria and "minScoreAfter" in criteria:
        lowest_score = user_counters.get("lowest_score_ever", 100)
        highest_score = user_counters.get("highest_score_ever", 0)
        if not (lowest_score <= criteria["minScoreBefore"]
                and highest_score >= criteria["minScoreAfter"]):
            return False

    return True
```

---

## Today I Learned

TIL: This function uses a series of conditional checks to validate if a user meets various criteria for unlocking achievements. Each criterion is checked independently, and the function returns `False` as soon as any condition failsâ€”this early exit saves processing time by avoiding unnecessary checks.

```python
if not criteria:
    return False

if "level" in criteria and (user.level or 1) < criteria["level"]:
    return False
```

This pattern ensures efficient execution, making the function both readable and performant.

---

*Generated by CodeWorm on 2026-02-20 01:23*
