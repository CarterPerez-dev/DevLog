# upgrade

**Type:** Today I Learned
**Repository:** my-portfolio
**File:** v1/backend/alembic/versions/20260103_054418_portfolio.py
**Language:** python
**Lines:** 19-160
**Complexity:** 1.0

---

## Source Code

```python
def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    language_enum = postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False)
    language_enum.create(op.get_bind(), checkfirst=True)

    op.create_table('blogs',
    sa.Column('language', postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.String(length=1000), nullable=False),
    sa.Column('external_url', sa.String(length=2048), nullable=False),
    sa.Column('category', postgresql.ENUM('unknown', 'tutorial', 'deep_dive', 'career', 'project', 'opinion', name='blogcategory', create_type=True), nullable=True),
    sa.Column('tags', postgresql.ARRAY(sa.String(length=50)), nullable=True),
    sa.Column('thumbnail_url', sa.String(length=2048), nullable=True),
    sa.Column('published_date', sa.Date(), nullable=True),
    sa.Column('read_time_minutes', sa.Integer(), nullable=True),
    sa.Column('views_count', sa.Integer(), nullable=True),
    sa.Column('display_order', sa.Integer(), nullable=False),
    sa.Column('is_visible', sa.Boolean(), nullable=False),
    sa.Column('is_featured', sa.Boolean(), nullable=False),
    sa.Column('id', sa.Uuid(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id', name=op.f('pk_blogs'))
    )
    op.create_table('certifications',
    sa.Column('language', postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('issuer', sa.String(length=200), nullable=False),
    sa.Column('issuer_url', sa.String(length=2048), nullable=True),
    sa.Column('issuer_logo_url', sa.String(length=2048), nullable=True),
    sa.Column('credential_id', sa.String(length=100), nullable=True),
    sa.Column('verification_url', sa.String(length=2048), nullable=True),
    sa.Column('date_obtained', sa.Date(), nullable=False),
    sa.Column('expiry_date', sa.Date(), nullable=True),
    sa.Column('is_expired', sa.Boolean(), nullable=False),
    sa.Column('badge_image_url', sa.String(length=2048), nullable=True),
    sa.Column('category', postgresql.ENUM('unknown', 'security', 'cloud', 'programming', 'networking', 'database', 'devops', name='certificationcategory', create_type=True), nullable=True),
    sa.Column('display_order', sa.Integer(), nullable=False),
    sa.Column('is_visible', sa.Boolean(), nullable=False),
    sa.Column('id', sa.Uuid(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=Tru
```

---

## Today I Learned

TIL: In the `upgrade` function, the use of SQLAlchemy's `postgresql.ENUM` for defining database column types is clever. It allows you to define and create PostgreSQL enum types dynamically, ensuring data integrity by restricting values to a predefined set. This approach makes the schema creation more robust and maintainable.

```python
language_enum = postgresql.ENUM('unknown', 'en', 'zh', 'hi', 'es', 'fr', 'ar', 'pt', name='language', create_type=False)
```

This snippet demonstrates how to leverage SQLAlchemy's integration with PostgreSQL enums, making the code both Pythonic and database-aware.

---

*Generated by CodeWorm on 2026-03-02 00:01*
