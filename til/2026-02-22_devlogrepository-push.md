# DevLogRepository.push

**Type:** Today I Learned
**Repository:** CodeWorm
**File:** codeworm/git/ops.py
**Language:** python
**Lines:** 217-272
**Complexity:** 8.0

---

## Source Code

```python
def push(
        self,
        remote: str = "origin",
        max_retries: int = 3,
        retry_delay: float = 5.0,
    ) -> bool:
        """
        Push commits to remote with retry logic
        """
        if not self.remote_url:
            logger.debug("no_remote_configured")
            return False

        repo = self.repo

        try:
            repo.remote(remote)
        except ValueError:
            repo.create_remote(remote, self.remote_url)
            logger.info("created_remote", name = remote, url = self.remote_url)

        last_error: Exception | None = None

        for attempt in range(max_retries):
            try:
                repo.git.push(remote, self.branch, force_with_lease = True)
                logger.info(
                    "push_successful",
                    remote = remote,
                    branch = self.branch
                )
                return True

            except GitCommandError as e:
                last_error = e
                error_msg = str(e).lower()

                if "conflict" in error_msg or "rejected" in error_msg:
                    raise GitConflictError(
                        f"Push rejected due to conflict: {e}"
                    ) from e

                if self._is_transient_error(error_msg):
                    logger.warning(
                        "push_retry",
                        attempt = attempt + 1,
                        max_retries = max_retries,
                        error = str(e),
                    )
                    time.sleep(retry_delay * (attempt + 1))
                else:
                    raise GitPushError(f"Push failed: {e}") from e

        raise GitPushError(
            f"Push failed after {max_retries} retries: {last_error}"
        )
```

---

## Today I Learned

TIL: I learned about retry logic with exponential backoff and custom exceptions in Python. The `push` method in `DevLogRepository` handles Git push retries gracefully, logging each attempt and waiting progressively longer between retries if errors are transient. This makes the function robust against temporary issues without hanging indefinitely.

```python
# Example of exponential backoff
for attempt in range(max_retries):
    # ...
    time.sleep(retry_delay * (attempt + 1))
```

This pattern is both clever and useful for handling unreliable network operations!

---

*Generated by CodeWorm on 2026-02-22 12:20*
